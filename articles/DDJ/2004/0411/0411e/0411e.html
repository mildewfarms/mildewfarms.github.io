
<html>
<head>
<title>November, 2004: Wireless USB</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; Dr. Dobb's Journal-->

<h1>Wireless USB</h1>
<p><i>Dr. Dobb's Journal</i> November, 2004</p>
<h2>Next-generation  high-speed USB is right around the corner</h2>


<h3>By Rahman Ismail, John Keys, and Rafael Kolic</h3>


<I>Rahman is a senior USB architect, John a security architect, and Rafael an engineer, all at Intel. They can be contacted at  abdul.r.ismail@intel.com, john.keys@intel.com, and rafael.kolic@intel.com, respectively.</I>

<hr>





<p>The Universal Serial Bus (USB) has been around for more than 10 years, successfully replacing many different interconnect technologies with a single standard&#151;wired USB. Recently, USB technology has ramped up to a blistering 480 Megabits-per-second (Mbps) data rate with connection support of over 127 different devices per USB host. Nonetheless, there is a problem&#151;the wire. Luckily, next-generation hi-speed USB is poised to make the jump to wireless.</p>

<p>Wireless USB (WUSB), or whatever standard name the USB Implementers Forum (http://www.usb.org/) assigns, will build on Hi-Speed USB (http://www.usb.org/ developers/usb20/) and provide ultra-fast data rates of 480 Mbps and beyond. Currently, wireless USB products will be launched sometime in 2005 and operate at 480 Mbps for short ranges (under 3 meters), and extend connectivity and fast data rates up to 10 meters.</p>

<p>But bringing WUSB to the marketplace is no small task. Currently, there are more than a dozen companies working on defining the wireless USB specification with an anticipated date of release of the 1.0 candidate specification by the end of this year. Once completed, the WUSB specification is only one piece of the puzzle. The other big piece is the radio that WUSB applications operate over.</p>

<p>The WUSB radio will be based on Ultra-Wideband (UWB), a radio technology that offers data rates of 480 Mbps and beyond at short range. UWB is able to achieve these data rates because it occupies a large spectrum&#151;from 3.1 GHz to 10.5 GHz. Transmitting data over a large bandwidth such as this lets UWB follow Shannon's Law and send many data bits within a single second. In fact, UWB is expected to achieve data rates in the Gbps range. </p>
<h3>The Common UWB Radio Platform</h3>

<p>The UWB PHY and MAC specifications for WUSB are being developed by the Multi-Band OFDM Alliance (http://www .multibandofdm.org/). PHY refers to the "physical layer," and MAC the "Medium Access and Control"&#151;the layer above the physical layer that coordinates data transfer over the wireless link. The PHY is based on a multibanded Orthogonal Frequency Division Multiplexing (OFDM) proposal, in which the available operating UWB spectrum is divided into sub-bands of 528 MHz in width, and uses OFDM modulation to send data over each of the subbands. The current proposal is based on three bands operating in the 3- to 5-GHz range with other higher bands reserved for future use.</p>

<p>The multiband OFDM approach is also advantageous in that it can coexist with other wireless technologies that reside within the available spectrum&#151;a critical necessity with the widespread adoption of 802.11, WiMAX, and other wireless communication technologies. If interference is detected, a particular band can be turned off until the interference is removed. In addition, by having multiple bands, developers can design or use fewer bands for applications that don't require all the allotted bandwidth available, while other applications can implement more bands for much higher bandwidths. Implementing fewer bands reduces the cost of the radio and is thus attractive for low-cost peripheral device manufacturers&#151;a key necessity for Wireless USB to keep the low-cost peripheral model.</p>
<h3>WiMEDIA Policy Layer</h3>

<p>WiMEDIA (http://www.wimedia.org/) will develop a common abstraction layer for the UWB radio platform that lets multiple applications share a single UWB radio. The so-called WiMEDIA policy layer acts like a traffic cop that resides on top of the MAC and allows equal access to the common radio below it for the application stacks, such as WUSB. WiMEDIA is also responsible for the interoperability testing of the many different UWB radio platforms, thus ensuring that devices and hosts from multiple vendors will be able to communicate.</p>
<h3>WUSB Architecture</h3>

<p>WUSB is a hub-and-spoke topology, in which the host initiates all the data traffic among the devices connected to it, allotting time slots and data bandwidth to each device connected. These relationships are referred to as "clusters." The connections are point-to-point and directed between the WUSB host and WUSB device. </p>

<p>The WUSB host can logically connect to a maximum of 127 WUSB devices, considered an informal WUSB cluster. WUSB clusters coexist within an overlapping spatial environment with minimum interference, thus allowing a number of other WUSB clusters to be present within the same radio cell. Multiple channel activities may take place within a given area. The topology supports multiple clusters in the same area. The number of clusters to be supported is still being determined.</p>

<p>The topology supports a dual-role model, where a device can support limited host capabilities. This model lets mobile devices access services with central hosts supporting the services (printers and viewers, for instance). This model also lets devices access data outside an existing cluster they may currently be connected to by creating a second cluster as a limited host.</p>

<p>A new class of devices called "WUSB dual-role devices" (DRDs) will give rise to use scenarios not previously possible. These devices offer both limited host and device capabilities similar to USB On-The-Go.</p>

<p>WUSB DRDs are devices that can be configured either as WUSB hosts or devices. WUSB DRDs are generally mobile devices such as PDAs, laptops, cell phones, and the like. For example, a WUSB PDA could be a WUSB host when it's printing photos to a WUSB printer, and a WUSB device where a PC retrieves files and performs data synchronization.</p>
<h3>WUSB Protocol</h3>

<p>Wired USB provides communication services for reliable operation between a host and attached USB devices. It provides mechanisms for data transfer, power management, and device discovery.</p>

<p>WUSB preserves the wired USB architecture and communication model. WUSB supports all the USB data transfer types (Control, Bulk, Interrupt, and Isochronous) via host scheduled USB-like transactions. As in USB, the Wireless protocol will also provide support for quality-of-service (QoS) of isochronous transfers. The asymmetric model has been preserved because it provides for simpler device implementations by transferring complexity to the host. In addition, existing applications "just work" because the communication model is essentially the same. This allows the best opportunity for moving USB designs to WUSB.</p>

<p>WUSB will provide analogs to USB device-discovery and power-management features. It will provide a power-efficient protocol so as to consume little power when idle. To facilitate this, the transaction protocol will provide devices better predictability as to when they should be receiving or transmitting. The WUSB protocol will provide for efficient wireless channel utilization by minimizing the media and protocol overhead. Further, it will be scalable so that it is not a bottleneck as the wireless link gets faster. </p>
<h3>WUSB Security</h3>

<p>The goal of WUSB Security is to provide the same level of user-confidence for wireless USB devices as exists for wired USB devices. A Wireless USB implementation built on the UWB radio will certainly require some level of security to match the protection provided by the wire. The owner/user's data must be kept private and protected. Likewise, the owner/user's equipment must be protected from unauthorized connections from potentially hostile agents.</p>

<p>USB Security will be designed so as not to affect the fundamental nature of the USB device model. This means that:</p>



<ul>
  <li>Significant cost or complexity should not be added to a device. Security should provide a path for device implementation solely in hardware as USB does not currently require a device to have a processor. Cost or complexity will be confined to the host.</li>
  <li>WUSB Security will preserve the basic asymmetric communications model of USB. Communications are always, with the exception of signal-replacement messages (connect, disconnect, and so on), initiated by the host. This holds true for the security architecture as well. Security operations will always be initiated and driven by the host.</li>
  <li>The association policies of WUSB Security will provide for symmetric association between host and device. That is, the device must be given the opportunity to validate the host as the host is given to validate the device. It is just as important to ensure that the owner's device connect to the right host as it is to ensure that the owner's host connect to the right device. This is especially important as some usage models may have two owners involved&#151;the owner of the host and a separate owner of the device.</li>
</ul>



<p>The standard method of encryption for first-generation Wireless USB is the AES-128 Counter with CBC-Mac (CCM). This is a symmetric encryption algorithm that uses the AES block cipher to create a robust stream cipher that can be used to provide integrity, encryption, or both. It is IP-free and capable of real-time operation when implemented in hardware. This is the only method that will be used for general session encryption. WUSB Security also defines a preshared key method of Authentication that lets you use CCM for this purpose as well. Support of this encryption standard is mandatory for all Wireless USB hosts and devices.</p>
<h3>WUSB Association Models</h3>

<p>One of the primary objectives when implementing a wireless interconnect is that it be easy to install and use. Wired connections provide users with implied expectations&#151;that the device is connected as specified by users when they install the wire. When the wire is installed, users have basic expectations and when these expectations do not take place (plug does not fit), there is a known recourse. Wireless connections, on the other hand, due to environmental characteristics, may establish connection paths that are not obvious. In fact, it may not be obvious when a device is connected. So WUSB devices installed for the first time should automatically install drivers, security features, and so on and associate with systems that they can interact with. The concept of "turn on and use it" with an easy setup procedure will be employed.</p>
<h3>Design Considerations</h3>

<p>There are several architectural considerations in developing WUSB. In addition to providing wireless connectivity, WUSB must be backwards compatible with wired USB and provide a bridge to wired USB devices. Also, the host and solutions will need to enable the exchange of data between clusters or devices not related to the same host. </p>

<p>Low-cost implementation of WUSB will also be important to the successful integration of the technology. Implementation will follow the wired USB connectivity models as closely as possible to reduce development time and to preserve the low-cost, easy-to-use model, which has become pervasive.</p>
<h3>WUSB Wire Adapter Technology</h3>

<p>Wire adapter devices will be one of the first WUSB devices in the marketplace. There are two types of Wire Adapters&#151;those that connect to the PC or host system, called "Host Wire Adapters" (HWA), and those that provide downstream USB ports to let users connect USB devices, called "Device Wire Adapters" (DWA). The purpose of the wire adapter is to let users make their existing USB hosts and devices wireless.</p>

<p>Imagine the HWA as a small device that can connect to a PC&#151;it can be in the form factor of a wired dongle, a USB flash key, or some other form factor. The basic purpose of the HWA is to provide a bridge from Wired USB to Wireless USB.</p>

<p>On the other end, the DWA has ports that existing USB devices can connect to. Here, users can take an existing USB device&#151;a printer, hard drive, or digital still camera&#151;and connect it to the DWA. The DWA lets the WUSB-enabled PC communicate with existing USB devices connected downstream of the DWA. To the host software on the PC, it seems as if the devices are connected directly to the root port of the PC, even though they are actually connected behind a DWA. <a name="rf1"></a><a href="0411ef1.html">Figure 1</a> illustrates the wire adapter model.</p>
<h3>Operational Model</h3>

<p>Again, there are two kinds of Wire Adapters&#151;the Host Wire Adapter and Device Wire Adapter&#151;both of which extend the USB 2.0 connection wirelessly. The HWA connects to the USB host side via a cable that plugs into the USB port. Devices can plug into USB ports proveded by DWAs. Each Wire Adapter provides an abstraction that delivers the capabilities of a USB Host Controller without the requirement of Host Wire Adapter being an integrated part of the Host System. </p>
<h3>Wire Adapter Device Class</h3>

<p>The Wire Adapter will be defined as another USB device class, such as hubs, mass storage devices, and the like. The Wire Adapter class exposes a USB interface and, hence, is manageable within the USB device framework. This provides a single API for host software to communicate with a wide range of Wire Adapter implementations.</p>

<p>HWAs will be USB 2.0 devices, while DWAs will be Wireless USB devices. Because the communication model is the same for both Wired and Wireless USB, the same driver will be able to communicate with both of them.</p>
<h3>WUSB In the Future</h3>

<p>The first Wireless USB implementations will likely be in the form of discrete silicon introduced in a number of form factors, such as WUSB Wire Adapters. These may include add-in cards and dongles along with embedded solutions to support the technology's introduction and subsequent rapid ramp up. This lets consumers take existing USB solutions and make them wireless at data rates of upwards of 480 Mbps.</p>

<p>Soon after the release of the WUSB Wire Adapters, devices that benefit the most from WUSB will start emerging with integrated radio solutions. Such devices could include digital projectors, HDTVs, digital camcorders, high-end printers, and the like. Eventually, WUSB and a common ultra-wideband platform will become a standard part of every processor and chipset, and integrated in CMOS silicon.</p>






<p><b>DDJ</b></p>




</body>
</html>