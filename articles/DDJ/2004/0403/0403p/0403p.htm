<html><head><title>Mar04: Embedded Space</title></head><body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000"><!--Copyright &#169; Dr. Dobb's Journal--><h1>Obsolete!</h1><p><i>Dr. Dobb's Journal</i> March 2004</p><h3>By Ed Nisley</h3><I>Ed's an EE, PE, and author in Poughkeepsie, NY. Contact him at ed.nisley@ieee.org with "Dr Dobbs" in the subject to avoid spam filters.</I><hr><p>A recent ATI press release announced a deal with Arrow Electronics that will make ATI RAGE MOBILITY-M and M1 video chips available to embedded display customers for the next five years. In a field that depends on a stable and continuous supply of components for capital equipment with long depreciation schedules, this should provide some comfort.</p><p>ATI announced the RAGE MOBILITY-M chip in late 1998, with the M1 variant following in early 1999, touting them as the "absolute industry standard for no-compromise mobile graphics performance" with nary a hint of their future destiny in embedded systems. That's typical for embedded-systems components, at least at the chip level, and shouldn't bias you against them.</p><DDJADVERTISEMENT INLINE><p>Let's see what a decade means in the PC world, then what it implies for the embedded world.</p><h3>Five Years From Today...</h3><p>Looking back, in 1999 Compaq (remember Compaq?) introduced the Presario 5461 desktop PC: 500-MHz AMD K6-3D CPU, ATI 3D RAGE PRO video, 64 MB of RAM (with 8 MB snagged by the video card), 100-MB ZIP drive, and a 10-GB Quantum (remember Quantum?) hard drive. It evidently sold reasonably well, but has long since joined the ranks of the obsolete PCs.</p><p>Our neighbor's 5461 recently presented her with an unfamiliar error message: DISK BOOT FAILURE, INSERT SYSTEM DISK AND PRESS ENTER. You and I both know what that means, but her sister said it was just asking for the Windows 98 (remember Win...oh, never mind) CD. I brought along a DOS (remember DOS?) boot diskette.</p><p>As expected, some probing around showed that the hard drive was stone-cold dead. I popped a 2.5-GB drive off my obsolete tech stack, stirred in a pair of minuscule 16-MB SIMMs, added an ISA-bus (remember ISA?) NIC, invoked the system's Quick-Restore CD, then topped it off with all the Windows Updates and driver tweaks. She'll need a new PC, just not right away, and I cleared out some stuff. A win-win situation if I ever saw one!</p><p>Moore's Law tells us that the number of active devices on an LSI chip doubles every 18 months, which works out to a factor of 11 every five years; for convenience, let's set 11 equal to 10 for small values of 11. Although clock speed increases linearly as the wiring distance decreases, system-level performance gains aren't quite so crisp.</p><p>Much of the engineering in desktop PCs goes into cost reduction rather than raw performance, so contemporary boxes are not quite a factor of 10 faster or larger than that Presario. Clock speeds hover near 3 GHz, "free" memory upgrades target the Windows sweet spot at 512 MB, and typical hard drives hold 80 GB. ZIP drives top out at 750 MB where they're losing traction against free-in-every-box CD and DVD burners.</p><p>Workstations sport peppier specs and you can certainly exceed an order of magnitude improvement without too much effort. In round numbers, however, the industry hews pretty close to Moore's Law, which should come as no surprise to anyone in the biz.</p><p>Looking forward, five years from now, PC performance should increase by another factor of 10: 30-GHz CPUs, 5-GB RAM, and 1-TB hard drives. The technologies will certainly change more than this simple extrapolation would indicate, but that'll be close.</p><p>Those are desktop-class numbers. Workstations will be correspondingly hotter, mobile PCs (whatever they're called by then) will be slightly slower, and the portion of the embedded world that uses ATI RAGE MOBILITY-M chips will be stuck with performance fully two orders of magnitude below whatever we've come to expect.</p><p>Remember, those video chips depend on late-90's clock speeds and PC architectures, so they must be built on late-90's circuit boards with late-90's CPUs and support chips. Even if ATI and Arrow can supply the video chips, producing systems designed around them may prove daunting with the latest factor-of-100-faster parts.</p><p>Apple's G5 got a lot of attention by being more-or-less a <i>binary</i> order of magnitude faster than the competition. A speedup of two <i>decimal</i> orders of magnitude should be even more attention getting. But maybe things won't be quite so fast after all.</p><h3>Power Versus Frequency</h3><p>Word is getting around that having the latest, greatest, and fastest CPU doesn't buy you much additional performance. The reason is simple: Faster clocks and deeper pipelines lose to relatively slow memory and frequent branches in program logic. System performance now depends more on the amount and speed of RAM, both cache and bulk, than on the CPU's internal clock frequency.</p><p>The CMOS technology at the heart of our processors draws current from the power supply in direct proportion to the clock frequency--doubling the clock frequency doubles the current. The relation holds in the other direction and, in fact, turning the clock off drops the power to nearly zero. The relation isn't absolute and there are many caveats, but it's a good rule of thumb.</p><p>The average power drawn by a CMOS CPU (or any other circuit) is the product of its supply voltage and average current, which means that the clock frequency's effect on current directly controls the  chip's power. If you want to double the CPU's speed, the power dissipation doubles and the battery life drops by half. Need more runtime? Just decrease the performance by the same factor!</p><p>The RAGE MOBILITY-M chip dissipates about 1 watt while producing a dynamic display on an LCD panel. It uses the now-standard AGP/PCI interface, which presumes a PC-oid architecture and places some restrictions on which CPUs can drive it. In any event, it's not the sort of chip you'd find in a PDA.</p><p>Intel's present-day CPUs intended for mobile use, the Pentium M series, draw far more power than that: the 1-GHz processor dissipates 7 W. You pay dearly for higher performance, as the 1.5-through-1.7-GHz variants dissipate 24.5 W. Those are the full-throttle, absolute-peak, worst-case power levels that Draconian power-management schemes reduce to, on average, just a few watts.</p><p>Pentium-class CPUs intended for desktop use dissipate far more power with less potential for reduction. The 1.5-GHz Pentium 4 has a maximum rating of 57.8 W and requires exotic thermal control techniques. We're well beyond the heatsink-daubed-with-silicone-grease stage!</p><p>A consumer-grade hard drive idles at 7-10 W, which it does most of the time. Entering standby mode can drop that to 1 W, but waiting for the hard drive to spin up at the twitch of a mouse can be sufficiently disconcerting that many people don't use that mode.</p><p>Surprisingly, the fluorescent backlight tubes behind the LCD panel dissipate more average power than nearly anything else in a laptop. A typical cold-cathode lamp dissipates 10 mW/mm of tube length, which works out to a quarter-watt per inch. A 15-inch LCD might have two 12-inch tubes that draw 6 W and those gorgeous wide-screen desktop monitors may have four feet of light around their perimeter for 10 W or so. The LCD panel itself doesn't require much power at all, but those backlights certainly make up for it.</p><p>Fairly obviously, increasing performance by another order of magnitude simply cannot increase power dissipation by the same amount. Nobody proposes half-kilowatt CPUs, 100-W hard drives, or even 100-W LCD panel illumination. Circuit designers have been dropping supply voltages to compensate for increased current, but those voltages are already approaching practical limits and, in any event, can't drop by an order of magnitude.</p><h3>On the Low End</h3><p>The overwhelming majority of embedded systems use 4- and 8-bit microcontrollers with clock frequencies on the order of a few megahertz. In fact, some low-power systems have clocks in the kilohertz range, a factor of a million slower than your favorite desktop CPU.</p><p>A narrower datapath reduces the number of interconnections, the gates that drive them, and the internal logic that controls them. A slower clock reduces the CPU's power dissipation. Power management consists of putting the CPU into suspended animation when it's not being used; there's a reason you don't see screen savers on battery-powered systems.</p><p>The Microchip Technology PIC18F series of microcontrollers illustrates how this works. The 18F88 draws about 4000 mA from a 5-V supply when running from a 20-MHz external oscillator, 360 mA at 1 MHz, 35 mA at 32 kHz, and a mere 5 mA in clock-stopped sleep mode: 20,000 mW, 1800 mW, 175 mW, and 25 mW. The power doesn't drop linearly with the clock frequency because the chip has other circuitry that the rule of thumb doesn't cover, but the overall trend is clear.</p><p>The Texas Instruments MSP430 family of microcontrollers have a 16-bit datapath and a much cleaner architecture. One version draws 200 mA from a 2.2-V supply at 1 MHz&#151;half a milliwatt.</p><p>Fairly obviously, present day microcontrollers are at the far end of the speed-versus-power tradeoff!</p><p>Comparing processor performance and system throughput is fraught with peril, particularly across such divergent architectures as Pentiums and PICs. The clock speed ratio of 150 says there's at least two orders of magnitude difference in performance, with some tasks simply beyond the ability of the microcontroller.</p><p>So what we find is that the present ratio between desktop machines and microcontrollers is roughly the same as the difference between desktop machines over the span of a decade. In five years, that RAGE MOBILITY chip will be perfectly suited for small-scale embedded systems, right about the time it becomes unavailable.</p><p>However, I'll risk a prediction: In five years, half of the embedded market will still be the same 4- and 8-bit microcontrollers we have today, with performance <i>three</i> orders of magnitude below then-current desktops. Yup, you'll be able to get useful work done at 0.1 percent of what's absolutely essential on the desktop.</p><p>And you still won't need a video chip! Mark my words...</p><h3>Mail Call</h3><p>Reader Sean Werkema reported that, late one night, he spent 10 minutes waiting for a green left-turn signal. At just about the point where he was ready give up, the intersection switched to blinking-red and blinking-yellow. He suspects he was present at a system failure at the edge of the day/night mode change and decided that laughter was the best response. He did, however, turn around rather than venture through the rather complex intersection.</p><p>Jan Theodore Galkowski described a large-scale embedded system he worked on some years ago that posed some unusual programming challenges. In addition, he says, "The Air Force had an even odder [requirement] in its specification for us, prescribed without explanation: IBM had to provide a wall-mounted sledge hammer next to the computer box in the trailer." Well, we've all had that sort of feeling at one time or another, haven't we? In case of frustration: break glass, apply hammer!</p><p>The November 2003 column about toasting a Java Virtual Machine to induce memory errors "seems to border on FUD" according to another reader. The point of that column was to show that hardware flaws fall outside the usual domain of our error handlers; the fact that an attacker can neutralize the JVM's security manager using a single-bit error should be cause for concern. If you download untrusted software, your system is vulnerable regardless of the system's security provisions. It's not just Java in the crosshairs.</p><p>The December 2003 column on memory that won't go away prompted Andrew D. Todd to observe that the correct way to handle Internet transactions between two parties is through a mutually trusted third party. By delivering the goods at the time the money changes hands, the agent supplies the accountability that's so sadly lacking in all the various e-whatever proposals.</p><p>He also notes that delivery companies such as UPS and FedEx could well morph into escrow, COD, and tax-collection agents. Whether this will preserve a cost advantage over brick-and-mortar businesses remains to be seen, but it seems both more practical and more easily implemented than any of the e-security schemes I've seen.</p><h3>Reentry Checklist</h3><p>ATI's press release is at http://www.ati.com/companyinfo/press/2003/4696.html. Plug "rage mobility" into their search field to find out more.</p><p>The obligatory web search on "Moore's Law," plus a few other obvious keywords, gives you a good cross section of the industry. An interesting article at http://www.reed-electronics.com/semiconductor/ index.asp?layout=articlePrint&amp;articleID=CA224710 says the rules may change before we realize it.</p><p>Microchip Technology is at http://www.microchip.com/. The Texas Instruments' MSP430 line of ultra-low-power microcontrollers is at http://www.ti.com/. A table of Intel CPU performance starting in 1971 is at http://www.eie.polyu.edu.hk/ ~enyhchan/cpu.pdf.</p><p>If your player can digest the CD (one of mine has trouble), 2nd Injection's <i>Obsolete</i> on Zoo Rave 2 will rattle your speaker cones. DJ JD's <i>Djinni</i> and Texas Audio's <i>Earthbase</i> <i>1</i> are better, but only if you like vintage techno. Keep the volume down, okay?</p><p><b>DDJ</b></p></body></html>