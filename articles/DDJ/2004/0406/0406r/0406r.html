
<html>
<head>
<title>June, 2004: Chaos Manor</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; Dr. Dobb's Journal-->

<h1>Heat, Intel,  AMD, &amp; Internet Cafes</h1>
<p><i>Dr. Dobb's Journal</i> June, 2004</p>
<h2></h2>

<h3>By Jerry Pournelle</h3>

<I>Jerry is a science-fiction writer and senior contributing editor to BYTE.com. You can contact him at jerrypjerrypournelle.com.</I>

<hr>

Last month, I speculated about the future of 64-bit Windows and how many versions of Windows there would be. The situation has apparently become clearer after the Intel Developer Forum. Although its lengthy press release never mentions AMD, Intel has said, in effect, that its new 64-bit chips will be AMD compatible. The story I hear is that Microsoft simply refused to play along with yet another incompatible hardware system. This is good news for the rest of us&#151;the last thing we need is more fragmentation of the software developer market. (Interestingly, it appears that, in turn, AMD will be putting SSE3 instructions into future Opterons. It will be interesting to see if this cross-licensing will be "official" or not.)

<p>What will you run on these processors? Linux, to start with. There have been native 64-bit versions of Linux for the Opteron since that processor was released. The 64-bit version of Windows originally built for AMD's Athlon64 and Opteron processors, in beta since 2003's WinHEC, should be released by mid year. The product name is "Windows XP 64-Bit Edition for 64-Bit Extended Systems"&#151;a mouthful.</p>

<p>Meanwhile, Microsoft's revised edition XBox will use an IBM PowerPC chip (although it's not clear which one at this point). PowerPC was originally derived from IBM's Power series processors and developed by Apple, IBM, and Motorola. The joint development effort broke apart in 1998; IBM and Motorola have been working independently since then to develop chips for Apple's Mac and embedded systems. IBM now manufactures the PowerPC and its supporting chipset in the U.S. And IBM's latest PowerPC runs the Apple G5.</p>

<p>Think on that. The XBox operating system is a cut-down version of Windows. This means Microsoft has ported at least part of Windows XP to PowerPC. In the old days, Microsoft made an effort to have Windows running on nonIntel platforms, but hasn't done much of that since porting NT for the Alpha and the early PowerPC. Bob Thompson observes, "With the Itanium disaster, I'll bet HP is regretting committing to the Itanic and abandoning both Alpha and PA-RISC, both of which had a lot of life left in them." To which Peter Glaskowsky, editor-in-chief of the <i>Microprocessor Report</i>, says, "Well, but you know, they never did abandon Alpha or PA-RISC. They just reduced their level of spending on these. There are even new Alpha and PA-RISC processors under development, but these are just minor tweaks to current chips. I think it's too late to rescue these architectures, but it's amazing how long they've survived."</p>

<p>Meanwhile, Apple's OS X obviously runs on PowerPC. And, of course, Apple has Darwin, a version of OS X running on Intel Pentium 4 systems. You can download a PC-bootable CDS image from Apple (http://www.opensource.apple.com/darwinsource/). It doesn't include the OS X GUI or any of Apple's OS X applications, but it's fully working open-source UNIX. And Linux runs on everything. Are we going to get unity at last? And will it be Linux that provides the framework?</p>

<p>Remember: Moore's Law is inexorable. Available hardware already exceeds the requirement of most software. Another iteration of Moore's Law gives the raw computing power to let any system emulate any other system without noticeable effect. Sure, emulation always costs performance, but if the hardware is fast enough, who cares?</p>
<h3>Zalman Heatsink/Fan </h3>

<p>Also recall from last month how hot the Prescott chip ran in Silver, my 3.2-GHz Pentium 4 system. I have been told that the Zalman heatsink/fan combinations run Prescott chip systems cooler than the Intel heatsink/fan. For me, that turned out not to be the case. My 3.2-GHz Prescott Pentium 4 with Hyper-Threading Technology ran from about 53 C (with nothing going on) to a peak of about 65 C (with lots of visual objects on the screen). That wasn't a problem, but it was about as hot as any system I ever had, so I replaced the Intel heatsink/fan with a Zalman CNPS7000-AlCu. This is a circular radial system, rather large. The heat sink itself isn't as massive as Intel's, but there's more cooling surface. With the CNPS7000, the same system ran at about 57 C at rest, and I had to set the alarm peak at 75 C when there was a lot going on. Clearly, this was no improvement.</p>

<p>Installing the Zalman CNPS7000 was fairly simple. The toughest part was getting the Intel heatsink/fan off. The plastic clip system attaches securely, and it never wants to let go once all four legs have snapped into place. I have never got one of those disconnected without losing some skin and muttering evil and potent curses on the ancestors and descendants of the person who designed that abomination. </p>

<p>There is a sort of trick to dismounting the thing. It involves two long thin-bladed slot head screwdrivers (Nour Singh used to call them "minus" screwdrivers as opposed to Phillips head, which were "plus"). You use one to unclip one of the legs, then leave it in place so it can't click back in again while you use the second screwdriver to disconnect another leg. I've actually been tempted to get yet a third screwdriver into the act because sometimes the second leg will reach out and snap back into place as I am working on the third.</p>

<p>The Zalman mounting system is much better. There are some small metal legs that insert into the Intel chip holder assembly and the whole thing screws down. The diagrams and instructions included in the Zalman package are clear enough, and if you do it the way they suggest, it works the first time. Zalman CNPS7000 cooling systems also include instructions and small parts for connecting to AMD systems and, once again, it's fairly easy to do.</p>

<p>But still, the CNPS7000 wasn't as good as the Intel heatsink/fan for cooling Silver. Before reverting to the Intel heatsink/cooler, I gave Zalman one more try. I have one of their classic CNPS6500-AlCu "flower fan" heatsink systems. This stands up off the board in a flower fan pattern and looked like it might be effective. </p>

<p>The 6500 uses a plastic clip mounting system different from Intel's. It works effectively and is easy to remove. The instructions need attention, but they're clear enough once you realize that the blue plastic mounting clips are not symmetrical. </p>

<p>The fan is a large muffin fan on a bracket that attaches to the system by using the screws that hold the AGP and PCI slot cards in place. That lets the fan itself sit right above the "flower" heatsink arrangement. There's a speed control, but I was pretty sure that wasn't wanted: With Prescott you want all fans running all out.</p>

<p>Alas, the CNPS6500 was even less effective than the CNPS7000, with a "resting" temperature close to 70 C, and a peak of about 75C when there was a lot going on. <i>Star Wars Galaxies</i>, for example, would drive the CPU temperature to 76C.</p>

<p>Since neither Zalman system was an improvement, I put the Intel cooling system back in place. Then I had a thought. The Zalman flower fan bracket would work with the Intel cooling system; why not try it? So I put that back in. This gives Silver the following:</p>



<ul>
  <li>The power supply exhaust fan.</li>
  <li>A large "superquiet" Antec exhaust fan just below the power supply.</li>
  <li>The AOC FC-2000-B System Blower, which is a turbine fan that mounts in a PCI slot and blows air out of the box.</li>
  <li>The Intel heatsink/fan on the CPU.</li>
  <li>The Zalman fan bracket holding a Zalman 5-inch fan above the CPU.</li>
  </ul>

<p>You'd think that, with all those fans, the system would be noisy, but it's not: It's about as quiet as any system I've ever had. Performance-wise, it's smoking hot, too.</p>

<p>It's just about smoking heat-wise, too; but with the system now in place, it idles in the mid 50s and the peaks seem to be below 70 C, and that's just going to have to do.</p>
<h3>Heat, Intel, and AMD</h3>

<p>The bottom line is that Prescott systems run hot. Moreover, for similar performance, AMD systems are at least competitive with Intel on heat generation, and the price/performance of AMD systems is good. The engineering for fastening down the heatsink/fan in AMD systems is rather poor and, as I've warned you before, one of the most common causes of DOA AMD systems is that the heatsink/fan fell off in transit. Having a pound of heatsink rattling around in the case doesn't do the other components any good at all. My advice remains: If you're going to ship an AMD system, remove the CPU, heatsink, and fan, and pack them separately. </p>

<p>Of course, you don't have to remove the CPU&#151;even though I'd advise you to&#151;lest the recipient turn the machine on with no heatsink/fan in place. Also, be sure to clean off the chip and heatsink and apply a new thermal compound each and every time you separate them. Also note that AMD doesn't recommend thermal paste at all, but insists on phase-change pads.</p>

<p>Thermal coupling has always been critical with AMD. It wasn't so important to get it just right in Intel systems back in the 2.5 GHz days, but when you get above 3 GHz, you will want to use every temperature control measure you possibly can.</p>

<p>All this may change shortly with the new form factors but, for now, heat remains a bit of a problem in fast systems; and Peter Glaskowsky says the heat dissipation problem "will get worse and worse with each new generation, as far into the future as I can see." The heat problem is not insurmountable, but it does require attention. Glaskowsky thinks we are no more than a year from some kind of liquid or biphase cooling as a mandatory component of modern systems.</p>
<h3>Start Your Own Internet Cafe</h3>

<p>If you have a high-speed Internet connection such as a cable modem, you can set up an Internet cafe without much trouble, and it won't cost you a lot either.</p>

<p>What you'll need is a computer (almost anything will do) to control things, a good access point (I use the D-Link DWL-2100AP Airplus Extreme G Wireless Access Point), and the D-Link DSA-3100 Public/Private Hotspot Gateway. </p>

<p>Setting up the system is straightforward. Connect the DSA-3100 to whatever computer you will use to control it, and configure it by running the D-Link wizard. Then plug your high-speed connection into the DSA-3100, connect it to your private network (or the controlling computer if that's the only private machine you'll be using), and plug in the access point. </p>

<p>That's pretty well it. The DSA-3100 creates and keeps track of up to 250 user accounts, managing Authentication, Authorization, and Accounting (D-Link calls this "AAA"). It handles the Net Address Translation firewall and has some built-in tricks to help with Denial of Service attacks. You may want to add the D-Link ANT24-0401 Indoor 4 dBi Omni-Directional Ceiling Antenna to extend the size of the user area.</p>

<p>You can run this pretty well wide open, allowing anyone to access the system at any time, or you can require usernames and passwords. Given any volume of business, managing user accounts can be a pain. The solution to that is the DSA-3100P Ticket Printer. This connects to the DSA-3100 by RS-232 serial cable. It's a small box with a pushbutton: Push the button and it generates, stores, and prints usernames and passwords. It keeps track of up to 2000 users, and allows up to 50 at a time to access the network for whatever length of time you have specified. </p>

<p>It all sounds more complicated than it is. D-Link's instructions are clear, with examples and diagrams, and the on-disk manuals are complete, although you may not need them because the D-Link Quick Installation Guides have been good enough for nearly everything I've done with their equipment. </p>

<p>The exception was WEP (encryption) keys, and you won't learn how to do that from the D-Link Quick Guides, or the CD-ROM manual either. WEP can be a bit of a black art, but once you cotton on to how it works, you can use the Windows Scientific Calculator to translate keys into hexadecimal math, and there are other programs that generate the proper length hex key from text strings. A quick Google search turned up a number of these. The simplest are for the Macintosh. While setting up WEP isn't simple, it's not outrageously complex either. It might take a couple of hours online to puzzle it out, but I doubt anyone reading this column will have any real problems.</p>

<p>Once you've mastered WEP, the rest is quite simple. The D-Link system (DSA-3100 with DSA-3100P Ticket Printer) lets you give Internet Access to customers as part of their receipt packages. I've seen a number of coffee shops that operate this way: You buy a cup of coffee and get an hour or two of web access. And, of course, you could just sell tickets.</p>

<p>There's even a software-only hotspot solution available for high-speed Internet users with Macs. It's called Linspot (http://www.linspot.com/) and it doesn't require any new hardware, and the hook is that they handle all credit-card processing in exchange for a percentage of the revenues.</p>

<p>I haven't tried running an Internet cafe, so I have no specific information on the best way to go, but one of Pournelle's Laws is that hardware solutions are better than software (that may become irrelevant as hardware gets better and better but, in general, it will always be true): If I wanted in on the Internet cafe/hotspot business, I'd use the D-Link equipment. Let me say again: I have a lot of D-Link stuff, and so far everything I have tried Just Works. That includes their web cameras and routers.</p>

<p>Fair warning, your ISP may prohibit this type of bandwidth reselling, so be sure to have a thorough understanding of their Acceptable Use Policy (AUP) before starting your own cafe. But I can't help musing about just how far we've come: Anyone with a cable modem or DSL line and a wireless setup can become a mini-ISP with just about zero startup costs. We do live in interesting times.</p>
<h3>Winding Down</h3>

<p>The book of the month is the crime series stories of William Coughlin. In particular, I have<i> In The Presence of Enemies, </i>but there are others including <i>Shadow of a Doubt </i>and <i>Death Penalty.</i> </p>

<p>The computer book of the month is Owen Linzmayer's<i> Apple Confidential 2.0: The Definitive History of the World's Most Colorful Company, </i>Second Edition<i> </i>(No Starch Press, 2004; ISBN 1593270100). This is the revised edition of a classic: the history of the Apple Computing Company, from name selection and the forgotten third founding partner to The Return of King Steve. I was around for much of this. I also spent some time with Steve Wozniak at the first Hacker's Conference, over 20 years ago: This was not long after Woz had been dumped from Apple. So far as I can tell, this book is accurate. It's also fascinating. </p>

<p>The second computer book of the month, <i>The Little Mac OS X Book, Version 10.1,</i> Second Edition, by Robin Williams (Peachpit Press, 2001; ISBN 0201748665), is the standard introduction and reference work for the Mac OS.</p>

<p>The game of the month is <i>Star Wars Galaxies</i>, perhaps the best multiplayer online role playing game I have ever tried.</p>
<p><b></b></p>
<p><b></b></p>
<p><b>DDJ</b></p>




</body>
</html>