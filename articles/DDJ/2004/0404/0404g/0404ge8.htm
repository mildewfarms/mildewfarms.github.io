<html><head><title>Apr04: Building  Little Languages  With Macros</title></head><body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000"><!--Copyright &#169; Dr. Dobb's Journal--><pre><b>(a)</b>(define-cbr (f a b)   (swap a b)); Produces 2:(let ((x 1) (y 2))   (f x y)   x)<b>(b)</b>(define (do-f get<sub>1</sub> get<sub>2</sub> set<sub>1</sub> set<sub>2</sub>)   (define-get/set-var a get<sub>1</sub> set<sub>1</sub>)   (define-get/set-var b get<sub>2</sub> set<sub>2</sub>)   (swap a b))<b>(c)</b>(let ((x 1) (y 2))   (f x y)  x)<b>(d)</b>(let ((x 1) (y 2))   (do-f (lambda () x)         (lambda () y)         (lambda (v) (set! x v))         (lambda (v) (set! y v)))   x)<b>(e)</b>(begin   (define (do-f get1 get2 set1 set2)      (define-get/set-var a get1 set1)      (define-get/set-var b get2 set2)      (swap a b))   (define-syntax f      (syntax-rules ()        ((f actual ...)         (do-f (lambda () actual)               ...               (lambda (v)                  (set! actual v))               ...)               ))))</pre><h4>Example 8: Call-by-reference.</h4><a href="0404g.htm#re8">Back to Article</a></body></html>