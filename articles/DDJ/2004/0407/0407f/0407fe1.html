
<html>
<head>
<title>July, 2004: C++ and the Perils of Double-Checked Locking: Part I</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; Dr. Dobb's Journal-->






<pre>
1 // from the header file
2 class Singleton {
3 public:
4 static Singleton* instance();
5    ...
6 private:
7    static Singleton* pInstance;
8 };

9
10 // from the implementation file
11 Singleton* Singleton::pInstance = 0;
12
13 Singleton* Singleton::instance() {
14    if (pInstance == 0) {
15       pInstance = new Singleton;
16    }
17    return pInstance;
18 }
</pre>

<h4><b>Example 1: </b>In single-threaded environments, this code generally works okay.</h4>
<a href="0407f.html#re1">Back to Article</a>


</body>
</html>
