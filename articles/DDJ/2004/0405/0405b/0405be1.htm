<html><head><title>May04: Optimization Techniques</title></head><body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000"><!--Copyright &#169; Dr. Dobb's Journal--><pre><b>(a) </b>__int64 readTSC() {  __asm { rdtsc }}<b>(b) </b>long long readTSC(void) {  /* Assumes 'long long' is 64 bits, 'unsigned' is 32 */  union { long long complete; unsigned part[2]; } ticks;  __asm__ ("rdtsc; mov %%eax,%0;mov %%edx,%1"       : "=mr" (ticks.part[0]),         "=mr" (ticks.part[1])        : /* No inputs */       : "eax", "edx");  return ticks.complete;}</pre><h4>Example 1: <i>(a) Reading TSC in Microsoft Visual C++; (b) reading TSC in GCC.</h4><a href="0405b.htm#re1">Back to Article</a></body></html>