<html><head><title>Sep98: The Next Great Migration: From C++ to Standard C++ </title></head><body bgcolor="FFFFFF"><!--Copyright &#169; Dr. Dobb's Journal--><h2>The Next Great Migration: From C++ to Standard C++  </h2><h3><i>By Al Stevens </i></h3><p><i>Dr. Dobb's Journal</i> September 1998 </p><pre><b>(a)</b>#include &lt;new&gt;char buffer[8192];// ...MyClass* pMC = new (buffer) MyClass; // new uses buffer, not heap<b>(b)</b>char buffer[8192];void* MyClass::operator new(size_t nSize, bool frbuffer){    if (frbuffer)        return buffer;    return new char[nSize];}MyClass* pOC1 = new (true) MyClass; // new uses buffer, not heapMyClass* pOC2 = new (false) MyClass; // new uses heap, not buffer<b>(c)</b>void MyClass::operator delete(void* p, bool frbuffer){    if (!frbuffer)        MyClass::operator delete(p);}<b>(d)</b>pOC1-&gt;~MyClass();operator delete(pOC1, true);</pre><H4>Example 3: Placement new and delete. </H4><p><a href="9809l.htm#re3">Back to Article</A></p><HR><I>Copyright &copy; 1998, Dr. Dobb's Journal</I><BR>
</body></html>