<html><head><title>Apr03: Memory  Consistency  & .NET</title></head><body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000"><!--Copyright &#169; Dr. Dobb's Journal--><pre><b>(a)</b>// Oops - compiler could reorder // writes like this.R = true;for( int i=0; i&lt;n; i++ )   M[i] = ...; <b>(b)</b>// Oops - compiler hoists loop invariant!int t = R;while( t==0 )      continue;for( int i=0; i&lt;n; i++ )   ... = M[i];</pre><h4>Example 2: Compiler that presumes single-thread semantics could transform Example 1 in a way that breaks it. (a) Sender; (b) receiver.</h4><a href="0304d.htm#re2">Back to Article</a></body></html>