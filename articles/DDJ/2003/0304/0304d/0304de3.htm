<html><head><title>Apr03: Memory  Consistency  & .NET</title></head><body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000"><!--Copyright &#169; Dr. Dobb's Journal--><pre><b>(a)</b>lock( ... )    if( Z==null )      Z = new Foo(); ... = Z;<b>(b)</b>// Z must be declared volatileif( Z==null )    lock( ... )       if( Z==null )         Z = new Foo(); ... = Z</pre><h4>Example 3: Double check is an optimization of lazy initialization that avoids acquiring a lock in the common case that Z is already initialized. (a) Lazy initialization; (b) double check. </h4><a href="0304d.htm#re3">Back to Article</a></body></html>