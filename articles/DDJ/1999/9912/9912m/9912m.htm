<html><head><title>Dec99: Dr. Ecco's Omniheurist Corner</title></head><body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000"><!--Copyright &#169; Dr. Dobb's Journal--><h1>My Enemy's  Enemy</h1><p><i>Dr. Dobb's Journal</i> December 1999</p><h3>By Dennis E. Shasha</h3><I>Dennis, a professor of computer science at New York University, is the author of The Puzzling Adventures of Dr. Ecco (Dover, 1998), Codes, Puzzles, and Conspiracy (W.H. Freeman &amp; Co., 1992), Database Tuning: A Principled Approach (Prentice Hall, 1992), and (coauthored with Cathy Lazere) Out of Their Minds: The Lives and Discoveries of 15 Great Computer Scientists (Springer Verlag, 1998). He can be contacted at DrEcco@ddj.com.</I><hr><p>He introduced himself only as Henry.  "It is our policy, the policy of the government of the United States that is, to eliminate all unnecessary wars on the planet," he said in a pure Connecticut Yankee accent. "On the other hand, we want to avoid expending ourselves in regional conflicts, as we did all too recently in the Balkans.</p><p>"Our goal, therefore, is to maintain the peace where it exists and establish it when it doesn't. Such is the role of the global superpower.</p><DDJADVERTISEMENT INLINE><p>"In the difficult island of Aresia, there are 27 ethnicities. All are proud and warlike. They seem to obey the following rules of friendship (which I use interchangeably with alliance in what follows):</p><blockquote><p>1.(nonneutrality) I am either the friend or enemy of everyone else, but not both. If someone is my enemy, then I am his (her/their) enemy.</p><p>2.(transitive and reflexive) My friend's friend is my friend and I am my own friend.</p><p>3.(expediency) My enemy's enemy is my friend.</p></blockquote><p>"Our first question is: How many different allied groups can there be at any given time?" </p><p><i></p><p>Reader: Before reading on, can you decide how many groups of friends there can be? Not their sizes, just how many groups?</i></p><p>Ecco turned to Liane. She began thinking aloud: "Let's see. By 2, friends are transitive. By 1, groups of friends partition the space and friendship is symmetric. By 3, there can be only one or two partitions. If there were three, say <i>A</i>, <i>B</i>, and <i>C</i>, then they would all mutually be enemies, but then <i>A</i> and <i>C</i> would be friends, because they are both enemies of <i>B</i>. So, this cannot happen."</p><p>Henry looked at Liane, still an 11-year old kid in her pony tail. "You are a national asset," he said appreciatively. "Is there any limitation on the number that can be in each group?"</p><p>"No, all numbers seem to be possible," Liane said. "1 and 26, 2 and 25,..., 27 and 0." </p><p>"27 and 0 means all friends, right?" asked Henry. "That is our ultimate goal, though I think it will be tough. These people have been at each other's throats for centuries."</p><p>"We have marked the current alliances on the map (see <A NAME="rf1"><A HREF="9912mf1.htm">Figure 1</A>). You can see that 2, 8, 9, 15, and 20 are in the Red alliance. All the rest are in the Blue alliance. This is temporarily stable because each group has either the sea or an ally on at least one side. We must avoid having a group surrounded by its enemies, because that would lead almost inevitably to war. (It's lucky that the place is an island. The seaside groups rarely have to worry about being attacked.) Our goal is to make everyone an ally by changing the alliance of one group at a time, while always avoiding the possibility that a group is surrounded by enemy groups. Since changing the alliance of a group is difficult and expensive, we want to do this as few times as possible.</p><p>"One of our mathematicians has suggested that achieving our goal at minimum cost should never require forcing a group to change alliances twice. What do you think of that conjecture?"</p><p>Ecco and Liane conferred for a while, then they responded.</p><p><i>Reader: What do you think?</i></p><p>"How interesting," said Henry. "Well, with that in mind what is the smallest number of alliance changes we must force in order to achieve our goal? Remember the caveat: Never leave a group surrounded by a hostile alliance on all sides."</p><p><i>Reader: Ecco and Liane were able to do this by changing nine group alliances all together (without leaving a group surrounded by its enemies). Can you do better?</i> </p><p>"Nicely done," said Henry. "Some of our analysts think that the difficulty of changing a group's alliance is proportional to the group's population times the ratio of the source alliance's population to the target alliance's population. Here is a list of the populations on Aresia.</p><table cellpadding="10">	<tr>		<td>1</td> <td>56727</td>	</tr>	<tr>		<td>2</td> <td>77232</td>	</tr>	<tr>		<td>3</td> <td>105454</td>	</tr>	<tr>		<td>4</td> <td>50660</td>	</tr>	<tr>		<td>5</td> <td>65707</td>	</tr>	<tr>		<td>6 </td> <td>24692</td>	</tr>	<tr>		<td>7 </td> <td>82943</td>	</tr>	<tr>		<td>8 </td> <td>61871</td>	</tr>	<tr>		<td>9 </td> <td>17781</td>	</tr>	<tr>		<td>10 </td> <td>21708</td>	</tr>	<tr>		<td>11 </td> <td>61758</td>	</tr>	<tr>		<td>12 </td> <td>50790</td>	</tr>	<tr>		<td>13 </td> <td>169466</td>	</tr>	<tr>		<td>14 </td> <td>82659</td>	</tr>	<tr>		<td>15 </td> <td>95675</td>	</tr>	<tr>		<td>16 </td> <td>63247</td>	</tr>	<tr>		<td>17 </td> <td>104643</td>	</tr>	<tr>		<td>18 </td> <td>144026</td>	</tr>	<tr>		<td>19 </td> <td>93559</td>	</tr>	<tr>		<td>20 </td> <td>53964</td>	</tr>	<tr>		<td>21 </td> <td>78913</td>	</tr>	<tr>		<td>22 </td> <td>155511</td>	</tr>	<tr>		<td>23 </td> <td>92888</td>	</tr>	<tr>		<td>24 </td> <td>90596</td>	</tr>	<tr>		<td>25 </td> <td>64713</td>	</tr>	<tr>		<td>26 </td> <td>105709</td>	</tr>	<tr>		<td>27 </td> <td>101417</td>	</tr></table><p>Total reds initially: 288,742</p><p>Total blues initially: 1,885,567</p><p>Total: 2,174,309</p><p>For example, if I want to change region 8 from red to blue, the difficulty is 61,871&times; (288,742/1,885,567). The ratio reflects the fact that changing from the minority alliance to the majority alliance is much easier than vice versa, because citizens like to switch to the richer team. Given this notion of difficulty, which groups should we force to change alliances to guarantee peace (everyone allied) at minimum difficulty.</p><p><i>Reader: What strategy would you propose and what would the difficulty be? Ecco was able to find a strategy having a difficulty of less than 426,000. Remember that at no time should one group be surrounded on all sides by hostile groups.</i></p><p>Henry looked at the solution. "How curious! Groups on the periphery can carry out a much more consistent alliance policy. Maybe you've discovered a new truth of geopolitics." </p><h3>Last Month's Solution</h3><p>1.	Ecco believes five gourds is the minimum because a gourd can empty at the fastest only once in five minutes. Therefore, a single gourd can only mark five-minute intervals. To mark minutes, therefore, five gourds are needed.</p><p>2.	Here is the beginning of the procedure. Call the gourds by letters and have one assistant open stops on one or two holes as necessary to meet the times stated: </p><blockquote><p>A:	5 5 5 5 5 5 5 5</p><p>B:	5 5 5 5 5 5 11</p><p>C:	5 5 5 5 11 11</p><p>D:	5 5 11 11 11</p><p>E: 	11 11 11 11</p></blockquote><p>	   Once this initial part of the procedure is over, the ceremony can start. Each calabaza is filled when it becomes empty and both holes are left open. So, <i>A</i> will mark 40, 45, 50, 55,... <i>B</i> will mark 41, 46, 51, 56,... and so on up to <i>E,</i> which will mark 44, 49, 54, 59,...</p><p>3.	No <i>n</i> is troublesome. If <i>n</i> is even, then the integer below (<i>n</i>/2) -- call it <i>m</i> -- is odd (=(<i>n</i>/2)-1). It is always possible to build a procedure having <i>m</i> rows (gourds), in which one row has only <i>m</i>s, one row has one <i>n</i> and the rest <i>m</i>s, and so on until there is one row with <i>m</i>-1 <i>n</i>s and no <i>m</i>s. For example: </p><blockquote><p>A:	20 20 20 20 20 20 20 20 -- 160</p><p>B:	20 20 20 20 20 20 20 9 9 -- 158</p><p>C:	20 20 20 20 20 20 9 9 9 9 -- 156</p><p>D:	20 20 20 20 20 9 9 9 9 9 9 -- 154</p><p>E:	20 20 20 20 9 9 9 9 9 9 9 9 -- 152</p><p>F:	20 20 20 9 9 9 9 9 9 9 9 9 9 9 -- 159</p><p>G:	20 20 9 9 9 9 9 9 9 9 9 9 9 9 9 -- 157</p><p>H:	20 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 -- 155</p><p>I:	9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 -- 153</p></blockquote><p>If <i>n</i> is odd, then <i>m</i> is even. A similar strategy works. For example, if <i>n</i>=21 and <i>m</i>=10:</p><blockquote><p>A:	21 21 21 21 21 21 21 21 21 -- 189</p><p>B:	21 21 21 21 21 21 21 21 10 10 -- 188</p><p>C:	21 21 21 21 21 21 21 10 10 10 10 -- -187</p><p>D:	21 21 21 21 21 21 10 10 10 10 10 10 -- -186</p><p>E:	21 21 21 21 21 10 10 10 10 10 10 10 10 -- 185</p><p>F:	21 21 21 21 10 10 10 10 10 10 10 10 10 10 -- -184</p><p>G:	21 21 21 10 10 10 10 10 10 10 10 10 10 10 10 -- 183</p><p>H:	21 21 10 10 10 10 10 10 10 10 10 10 10 10 10 10 -- 182</p><p>I:	21 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 -- 181</p><p>J:	10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 10 -- 180</p></blockquote><h3>Solutions to the "Monopoles" Problem</h3><p>The following clever people all improved on Dr. Ecco's solution for the "Monopoles" problem (<i>DDJ</i>, September 1999): Jon Beal, Rodney and Jialin Meyer, Steve Hammer, Richard Lipp, Greg Smith, Pearl Pauling, Ernst Munter, Paolo Friedli, Dennis Cumro, Jean-Francois Halleux, Burghart Hoffrichter, Steve Kietzman, Gene Wagenbreth, Patrick Schonfeld, Tomas Rokicki, Michael Vielhaber, Tom Dinger, Russ Williams, and C. Mark Yendt, and Onno Waalewijn.</p><p>The best solution for four rooms with a single monopole per room was 66 monopoles altogether as shown first by Ernst Munter with the solution:</p><blockquote><p>room 1:	24 26 27 28 29 30 31 32 33 36 37 	38 39 41 42 44 45 46 47 48 49</p><p>room 2:	9 10 12 13 14 15 17 18 20 54 55 56 	57 58 59 60 61 62</p><p>room 3:	1 2 4 8 11 16 22 25 40 43 53 66</p><p>room 4:	3 5 6 7 19 21 23 34 35 50 51 52 63 	64 65</p></blockquote><p>Others who showed that 66 were possible include: Ernst Munter, Paolo Friedli, Steve Kietzman, Gene Wagenbreth, Tomas Rokicki, Paolo Friedli, Michael Vielhaber, and Tom Dinger.</p><p>Tom Dinger also proposed a recursive construction, which I closely paraphrase, though it is suboptimal: Take a maximal assignment for <i>n </i>rooms, call it <i>M</i>(<i>n</i>). For <i>n</i>=1, the maximal assignment is room: 1 2. Double all the values of the monopoles in the rooms; this will not cause a violation of the problem constraints for those rooms. This results in <i>n</i> rooms, with the even numbers 2..2&times;<i>M</i>(<i>n</i>) properly assigned. Now, in the one additional room, place the odd-numbered monopoles 1..(2&times;<i>M</i>(<i>n</i>)+1). This room also satisfies the constraints, because the sum of any two of the monopole values in that room will be even, but no even numbered monopole is in that room.</p><p>Problem 2 required putting at least 52 monopoles plus 52 spares in some number of rooms without putting a monopole and its spare in the same room. The following readers showed that seven rooms (not the obvious eight) were enough: Bart Massey, Paolo Friedli, Tomas Rokicki, Tom Dinger, and Onno Waalewijn. Bart Massey was able to fit 65 monopoles with spares in those rooms. Here was his design:</p><blockquote><p>room 1:	1 3 5 10 14 16 18 20 22 29 31 44 	48 50 52 56</p><p>room 2:	2 8 12 13 16 27 32 33 38 42 52</p><p>room 3:	1 3 5 7 9 11 13 15 17 19 21 23 25 	29 35 37 41 43 45 47 49 53 55</p><p>room 4:	24 28 30 31 32 33 34 35 36 37 38 	39 40 42 44 45 46 48 49 50 51 53</p><p>room 5:	4 6 8 9 11 21 23 24 26 39 40 41 56 	57 58 59</p><p>room 6:	2 6 10 18 19 22 26 27 30 34 43 47 	51 54 55 58 59</p><p>room 7:	4 7 12 14 15 17 20 25 28 36 46 54 57</p></blockquote><p>In problem 3, spares were allowed to be in the same room as the original monopole, but the monopole constraint (no two monopoles, even those with the same value, added together could equal the third) still held. Nobody gave a correct solution with fewer than five rooms. Tomas Rokicki was able to put 123 monopoles in those five rooms -- an admirable achievement.</p><p><b>DDJ</b></p><HR><I>Copyright &copy; 1999, Dr. Dobb's Journal</I><BR>
</body></html>