<html><head><title>May02: Hash Function Performance</title></head><body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000"><!--Copyright &#169; Dr. Dobb's Journal--><h2>Hash Function Performance</h2><p>Let <i>x</i><i><sub>k</i></sub><i>(t)</i> be the fraction of the <i>m</i> buckets that hold at least <i>k</i> keys when there are <i>tm</i> keys in the hash table. Note that <i>x</i><sub>0</sub><i>(t)</i> always equals 1. Consider now what happens when you add one more key. The "time" <i>t</i> increases to <i>t+</i>1<i>/m</i>. The value of <i>x</i><i><sub>k</i></sub><i>(t)</i> increases by 1<i>/m</i> if the new key lands in a bin with exactly <i>k-</i>1 keys already there. Specifically, <i>x</i><i><sub>k</i></sub><i>(t)</i> increases if and only if both choices have at least <i>k-</i>1 keys but both choices do not have at least <i>k</i> keys. The probability that both choices have at least <i>j</i> keys is <i>(x</i><i><sub>j</i></sub><i>(t))</i><sup>2</sup>, so the probability that <i>x</i><i><sub>k</i></sub><i>(t)</i> increases is <i>(x</i><i><sub>k</i></sub><sub>-1</sub><i>(t))</i><sup>2</sup>-<i>(x</i><i><sub>k</i></sub><i>(t))</i><sup>2</sup>. You can express this result as in <A NAME="rf3"><A HREF="0205cf3.htm">Figure 3</A>(a): that is, the expected change in <i>x</i><i><sub>k</i></sub> when a new key arrives is just <i>((x</i><i><sub>k-</i></sub><sub>1</sub><i>(t))</i><sup>2</sup><i>- (x</i><i><sub>k</i></sub><i>(t))</i><sup>2</sup><i>)/m</i>. You can rewrite the equation, as in <A NAME="rf3"><A HREF="0205cf3.htm">Figure 3</A>(b). The left side looks much like the equation for a derivative, and if <i>m</i> is large, a good approximation for the aforementioned equation is in <A NAME="rf3"><A HREF="0205cf3.htm">Figure 3</A>(c).</p><p>The analysis therefore yields a family of differential equations that accurately describe the behavior of the <i>x</i><i><sub>k</i></sub><i>(t)</i> when the number of buckets <i>m</i> and the number of keys <i>n</i> are reasonably large, and <i>n=mt</i> for some constant <i>t</i>. By calculating the solution to the family numerically, you obtain <A NAME="rt2"><A HREF="0205ct2.htm">Table 2</A>. Using similar methods, you can develop families of differential equations that lead to <A NAME="rt3"><A HREF="0205ct3.htm">Tables 3</A> and <A NAME="rt4"><A HREF="0205ct4.htm">4</A>.</p><DDJADVERTISEMENT INLINE><p> &#151; M.M.</p><a href="0205c.htm#rs1">Back to Article</a></body></html>