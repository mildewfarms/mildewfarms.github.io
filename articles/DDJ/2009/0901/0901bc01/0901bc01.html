<P>
<html>
<head>
<title> The iPhone Application Builder </title>
<link rel="Stylesheet" rev="Stylesheet" href="../../../../forms/Layout.css" type="text/css">
<link rel="Stylesheet" rev="Stylesheet" href="../../../../forms/FontStyles.css" type="text/css">
<link rel="Stylesheet" rev="Stylesheet" href="../../../../forms/newarticle.css" type="text/css">
<script src="../../../../forms/popwindow.js"></script>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; Dr. Dobb's Journal-->
<p><i>Dr. Dobb's Journal</i> January 2009</p>

<h1> The iPhone Application Builder </h1>
<h2>Building an application builder for mobile devices</h2>
<P>
<h3>By Bob Cusick</h3>


    
<P>
<I>Bob is a part-time geek and full-time president of Servoy USA. He can be contacted at <a href="mailto:bcusick@servoy.com">bcusick@servoy.com</a>.</I>
<P>
<p>Why bother writing apps for Apple's iPhone when you can write an app to write the apps.
<hr>
<P>

<P>

Along with about 13 million of my closest friends, I recently bought an iPhone. Whether you love or hate the iPhone doesn't really matter. What matters is Apple (and now Google) have created mobile devices that are actually compelling. They're more than just phones&#151;they're mini-computers in your pocket.</p>
<P>

<P>
Because people are seeing them more as mobile communication devices rather than just phones, it also raises expectations as to how you interact with data&#151;especially the data you also interact with on nonmobile devices.</p>
<P>

<P>
The bottom line is that more and more users will ask for access to their data applications (or at least subsets of them) while they're on-the-go. And that, fellow developers, means you will be asked to create mobile applications like these sooner rather than later.</p>
<P>

<P>
For this project, I focused on the iPhone for several reasons:</p>
<P>

<P>
<ul>
  <li>It has a decent, nearly full-featured browser (but no Java Applet support or Flash yet).</li>
  <li>The screen resolution is fixed; no need to code for different screen sizes.</li>
  <li>I wanted to quickly create some iPhone applications that I could use for myself.</li>
</ul>
<P>

<P>

<P>
Moreover, I wanted to create an application that would, itself, build iPhone applications. Basically, a metadata repository that either IT folks or even (gasp!) end users could use to build specialty iPhone apps without having to wait for "coders" (who are always knee-deep in "urgent" projects) to get around to building it.</p>
<P>

<P>
The application had to be fast, flexible, and somewhat sexy. And once deployed, it had to run anywhere on anything, OS- and database-wise. The last thing I wanted is to create this framework and have it limited to only a certain subset of users on a certain subset of hardware that was capable of running on only a subset of database engines.</p>
<P>

<P>
While everyone has their favorite tool for creating applications, for this project I was open to anything and everything. </p>
<P>

<P>
For instance, in describing how he took some example HTML code and modified it for the prototype app he was writing, Tom Thompson presented one approach in "Porting JavaScript Applications to the iPhone" (<i>DDJ</i>, November 2008; <a href="http://www.ddj.com/mobile/211200910">www.ddj.com/mobile/211200910</a>).</p>
<P>

<P>
While that's a great approach if you only need a few applications or some really custom stuff, I was hoping for something where I could easily create lots of different iPhone applications from different database servers running on different databases and platforms. And, more importantly, I didn't want to have to handcode all the inevitable change and enhancement requests down the line.</p>
<P>

<P>

The other thing that I wanted (if possible) was to create something that would already support AJAX with little or no code, but that also had a small client-side JavaScript library due to the iPhone's limited capabilities. Because of the iPhone's limited screen real estate, I wasn't going to spend time trying to build something that had a multiple document interface.</p>
<P>

<P>
After talking with other developers and having a thorough Google session, I defaulted to my personal development tool of choice&#151;Servoy (www.servoy.com). In some ways, this choice is understandable because Servoy is the company I work for.</p>
<P>

<P>
Nonetheless, Servoy meets all of the project requirements. Moreover, because I can script it in JavaScript or straight Java (or both), I wouldn't have to do the down-and-dirty coding of database connections, data binding, connection pooling, or any of the other stuff I would have to in other environments. Additionally, Servoy automatically translates all the forms into HTML with AJAX built-in without any code. Consequently, I could develop a native client "builder" application and the actual iPhone deployment application from a single code base, in a single IDE (Eclipse).</p>
<P>

<div>
<img src="0901bc01f1.gif">
<P>
Figure 1: The main "builder" application is a mini-IDE. No programming is required to create the iPhone application.
</div>
<P>
<div>
<P>
<img src="0901bc01f2.gif">
<P>
Figure 2: By specifying the metadata about your database and table, the iPhone Application Builder program will automatically create all the necessary forms and objects for you.
</div>
<P>

    
<h3>Creating the Prototype</h3>
<P>

<P>
Once I decided on the "what" of the application, it was time for the "how." I fired up the Servoy Developer and created a basic schema, then sat down to decide on what I wanted the final output to be.</p>
<P>

<P>
After looking at a few different iPhone applications, I decided that the default Contacts application would be the inspiration for the generated iPhone applications. I took some screen captures on the iPhone, e-mailed them to myself, and used Photoshop to snag some graphic elements.</p>
<P>

<P>
Because Servoy ships with Sybase's iAnywhere database and has sample tables, I created a form based on the companies table. I then worked out what font/styles to use for the various elements. The official Apple Human Interface Guidelines for iPhone are only available to registered iPhone developers (which I'm not), so I did the next best thing&#151;I searched the Web and looked at other iPhone web frameworks' CSS.</p>
<P>

<div>
    
<img src="0901bc01f3.gif">
<P>
Figure 3: The builder application even includes a native
client "preview" that approximates how your finished application will look, so you can create and test applications without having an iPhone.
</div>
<P>

<P>

Because Servoy's style sheets are also based on CSS, I had the basic look-and-feel up and running in no time. I created a simple list view of all the company names, and a simple company detail form. Because you only have to specify a single line of code to jump to another form, it was easy to make the click on the list show the related detail and vice versa. I didn't have to worry about the database connection or data binding&#151;everything I built and previewed in the Servoy Developer automatically gets rendered in plain HTML/CSS.</p>
<P>

<P>
All that was left was to view the progress, so I started up Mobile Safari to have a look. Servoy Developer has a built-in application server so it took less than five seconds to view the application "live" on the iPhone. Everything worked exactly the same as it did in the native client, and once I made some slight adjustments to the style sheet, I had a working prototype!</p>
<P>

<P>


    
<h3>Refining the Design</h3>
<P>

<P>
Once I had a viable end product design, I turned my attention to the configuration application or "builder" app. I knew that the schema for this part would be pretty straightforward. There were going to be iPhone solutions that contained forms, and those forms would contain objects.</p>
<P>

<P>
I decided early on that I wanted to add a layer of automation that would create all the required forms for a particular solution on-the-fly so they could be easily changed. That meant I needed to create a flexible data repository to make all the form objects nearly as configurable as they are in the "regular" Servoy Developer.</p>
<P>

<P>
Luckily, Servoy makes this easy by giving you the ability to create forms and objects programmatically&#151;with all the same properties and functions they have when you use the Servoy IDE.</p>
<P>

<P>
I don't know about you, but when I'm working on a blue sky personal project like this, I want to create something that I would use. And because I had the luxury of not having a deadline, a set of hard requirements, or stakeholders and end users to please, I had a lot of flexibility.</p>
<P>

<div>
    
<img src="0901bc01f4.gif">
<P>
Figure 4: The application on the iPhone looks the same as it does in the builder's "preview" window.
</div>
<P>

<P>

I started with the basics. Create a solution. Create a form. Put form objects on the form. Generate the Servoy forms programmatically, check on iPhone.</p>
<P>

<P>
I was really amazed at how quickly it all came together. I spent maybe 20 hours and about 800 lines of code getting the basics of both the builder application and the deployed iPhone application to work.</p>
<P>

<P>
Alas, I then made the "mistake" of showing it to some colleagues and told them how easy it was to create some basic applications. They immediately fell in love with it&#151;and then the change and enhancement requests came flooding in.</p>
<P>

<div>
    
<img src="0901bc01f5.gif">
<P>
Figure 5:Your iPhone application can have edit fields&#151;and will even automatically support separate edit fields with the "&gt;" at the end of each line&#151;like the built-in "Contacts" application.
</div>
<P>

<P>

At that point, I decided that because the basic concept was sound and the application was basically functioning, it was worth the time and effort to turn it into a full-blown, detailed application.</p>
<P>

<P>
I added features such as reordering the forms and objects, added support for most of the object types that Servoy supports (text fields, text area, HTML areas, labels, buttons, and so on) and even added two custom objects&#151;a <i>Navigation Item</i> and <i>Spacer</i> that were a result of not wanting to create a bunch of separate labels and graphics every time I wanted a navigation item.</p>
<P>

<P>
As I continued to build iPhone applications for myself, I found I needed to show related data, filtered data, related value lists, and the like. So most of the time that has gone into the application has been spent in sandboxing all the GUI elements to make sure that users don't accidentally go astray. I wanted to make it as "user-proof" as possible.</p>
<P>

<P>
As you've likely experienced, it takes more coding to make an application easy and smart than it does to rely on users entering the right thing in the right spot. The good news is that I don't have to write all the guts of the code as well, only the application logic and error checking. All the heavy lifting of database connections, data broadcasting, client state, HTML generation, AJAX calls, and the like is handled by Servoy.</p>
<P>

<P>
As of this writing, the application is still technically in late alpha, but if you would like to check it out, you can download the free Community Edition of Servoy (<a href="http://www.servoy.com">www.servoy.com</a>) and my iPhone Application Builder from <i>Dr. Dobb's</i> (see <a href="http://www.ddj.com/code/">www.ddj.com/code/</a>).</p>
<P>

