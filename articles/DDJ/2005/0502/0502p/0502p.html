
<html>
<head>
<title>February, 2005: The Google Revolution</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; Dr. Dobb's Journal-->

<h1>The Google Revolution</h1>
<p><i>Dr. Dobb's Journal</i> February, 2005</p>
<h2></h2>


<h3>By Jerry Pournelle</h3>


<I>Jerry is a science-fiction writer and senior contributing editor to BYTE.com. You can contact him at jerryp@jerrypournelle.com.</I>

<hr>





<p>The first time I ever heard of Google was when Darnell Gadberry came over in some excitement to alert me to a new search engine. He called it "google" but, having read <i>Mathematics and the Imagination</i>, by Edward Kasner et al., I thought he said "googol," which is the number 10<sup>10^10</sup>. It took me some time to get my head straight.</p>

<p>Since that time, Google has created a number of revolutions. As a company, it has gone public in a way that enriched early stock buyers rather than investment bankers, while its search engines have changed scholarship the world over. The Internet always did contain a great deal of information and had the potential to let you do a lot of research without having to go down to libraries, but without Google, it was so hard to find anything that many of us went to the library anyway. Now I rarely visit one of those sepulchers of knowledge.</p>

<p>There's money in a good search engine, and Google has found a way to extract some profits from it, which may or may not get it into Microsoft's sights. But Google has a huge head start. For one thing, Google already has the infrastructure: A server farm reportedly of more than 100,000 Intel boxes running Linux. And it is adding boxes so fast that if one dies, it's just abandoned in place, with no attempt to fix or even remove it. If Microsoft is serious about getting into the search game, it needs comparable facilities.</p>

<p>Google has another advantage. With most companies, Microsoft can lose often but only has to win once before the battle is over and The Borg absorbs its enemy. Google, however, is now big enough to lose a couple of battles and still be around.</p>

<p>That is, if they lose at all. Microsoft was betting heavily on the Windows File System in Longhorn to help with its search problems&#151;the desktop Search engine is notoriously slow and clunky&#151;but now WFS is apparently not to be in the first release of Longhorn.</p>

<p>Microsoft doesn't get into fights it can't win, and Google has considerable advantages in the search engine wars. A pitched battle between these giants would harm both, probably to the advantage of Apple. After all, almost a year ago, Steve Jobs showed live a demo of something as good as Windows File System, and that may be shipping in a couple of months. My guess is that the war won't happen, and Google president Eric Schmidt's flat statement that Google isn't building a browser (http://www.marketingvox.com/archives/2004/10/25/google_ceo_no_browser_effort/) was a public signal to that effect. </p>
<h3>Some Lessons in Troubleshooting</h3>

<p>Chaos Manor is now pretty thoroughly converted to gigabit Ethernet switches. The general product line we have used is D-Link. As I have noted before, D-Link equipment Just Works, and the documentation is sufficient and in good English&#151;not that gigabit Ethernet switches need documentation.</p>

<p>You may recall from last month that I first went to gigabit when Fry's had a blowout sale on AirLink gigabit switches, and I bought several of them. In particular, I bought a 5-port 1000-base-T switch, which went up at "Ethernet Central." </p>

<p>Alas, although the AirLink 5-port was plugged into a powerstrip that supposedly has surge protection, it wasn't connected to a UPS. This turned out to be a Big Mistake, for several reasons. First, of course, if there's a power failure while you are using your Ethernet connection, either for connection to the Internet or for file transfers, you won't be able to finish those jobs and shut down gracefully. Secondly, a UPS&#151;at least, the Falcon on-line UPS systems I use&#151;offers far more surge protection than any powerstrip.</p>

<p>About a week after I installed the AirLink 5-port gigabit switch, it rained in Los Angeles. Rain here is usually either nothing or a big deal&#151;and this time it was a big deal, with storms and lightning and thunder. It got bad enough that Roberta shut everything down in her office, but I was working on something and couldn't be bothered. Sure enough, a few minutes later we had a short power failure. My computers kept working due to the Falcon UPS systems, but of course I lost Internet communications. I began shutting systems down. There are enough of them that this took some time, and before I was done, the power came back on. </p>

<p>I went back to work, but found I still didn't have communications. My first move was to go reset the cable modem by powering it off, then back on. That's on a UPS, so it stayed on until I reset it. When it came back up, all the lights came on&#151;steady green for power, rapidly blinking cable connection light quickly going to steady green to indicate lockon, and green for the "PC" Ethernet connection light. The data light blinked a couple of times indicating traffic. All was well.</p>

<p>Only it wasn't. When I got back to my desk, I didn't have any Internet connections with my main communications system. Time to do some troubleshooting.</p>

<p>The first thing was to look at the system's Ethernet port. Green light on, yellow light blinking, just what I expect. Trace the Ethernet cable to the AirLink Gigabit switch, note what port I'm connected to, and look at the lights for that port. All the port lights for the switch are blinking furiously; once again, just what I'd expect. </p>

<p>Next, go to the cable room and see if everything there is connected. All seems well. The problem isn't the cable modem, and it's not out there in the Internet. All that is working, so the difficulty is between my computer and the cable modem. Hmm. Pournelle's Law says that 90 percent of the time, it's a cable or cable connector. Could rats have gnawed the cable?</p>

<p>They certainly could have. The last time we had any work done here, the construction people didn't seal the access ways to the area under the house. Rats got in, and gnawed through the signal cable for my air conditioner. Another got a telephone line, and yet another managed to get into the washing machine motor, bringing both himself and the clothes washer motor to a spectacularly messy end, as a very surprised Maytag man found when called in. We have sealed the access ports&#151;some of them were very obscure, and we only found one when Sable, our dog, trapped a rat in the barbeque pit, and when the rat was released it made a bee line for a part of the foundation we hadn't looked at. But now, all the ways under the house are sealed off and we've been trapping rats ever since. I think we have them all. Sable hasn't been excited about anything skittering around the house for a couple of weeks.</p>

<p>And even if it was a rat, there was hardly time to gnaw through an Ethernet cable in the 10 minutes or so the power was off. This had to be a different problem.</p>
<h3>Failure without Grace</h3>

<p>The next step was to do some serious troubleshooting work isolating the problem. Back to Anastasia, the main communications system. Could she ping anything?</p>

<p>Yes. No. Yes. Hmm. That's decidedly odd. Mostly I can't get DNS resolution for anything, but if I type in an actual numerical URL, I can get maybe one ping out of 10 returned. Do <i>ipconfig /all</i> and look at the result. Seems normal, but I can't ping Imperator (the Active Directory Server) by name or by URL address number. On a whim, I did <i>ipconfig /release,</i> then<i> ipconfig /renew.</i> That had a result. Now I wasn't connected to anything. I couldn't get an address from Imperator. No DHCP service. </p>

<p>Another machine in here had the same problem. In fact, all the machines connected to the AirLink 5-port gigabit Ethernet switch had the same problem. No, or very intermittent, communications, even though the lights on the AirLink blinked furiously. I got out a different 5-port switch, connected it, and everything worked fine. The problem had been the AirLink all along, and I would have spotted it instantly if the darned thing had just failed.</p>

<p>Instead, it failed in the worst possible way, with all its lights blinking as if it were still working, when in fact, it was as dead as a doornail.</p>
<h3>D-Link Gigabit</h3>

<p>The next day, I found myself down at the Shrine Auditorium for the Microsoft Digital Entertainment Anywhere show, where D-Link had an exhibition on the show floor. It didn't take long to negotiate one of their Wireless Media Players and to tell them my tale of woe about the AirLink switch. D-Link's Brad Morse asked why I hadn't used D-Link, and I had to explain that our request had probably been lost, and I don't like to look like I am grubbing for equipment.</p>

<p>A couple of days later, I got the D-Link 24-Port gigabit switch as well as several 5-Port switches. I replaced the dead AirLink 5-port (actually replaced the older 10/100 switch that temporarily took its place) with one of the D-Link 5-ports, and put the 24-port system in the cable room where it replaced three different switches&#151;two of them older 10/100, and a 5-port gigabit switch. Then I went around replacing all the AirLink switches with D-Link. I can't blame the AirLink for succumbing to a power spike, but I fault it most grievously for failing so ungracefully. When things die, they ought to look dead, not cheerfully continue to blink lights as if nothing were wrong.</p>

<p>The bottom line here is that all the D-Link gigabit equipment worked as I expected it to work, and whenever I plug in a machine capable of gigabit communications, it just works. Gigabit file transfers are some three- to five-times faster than doing the same thing at 100 megabits. I can't call it any closer than that: That is, I have transferred the same file between the same two machines, the only difference being the Ethernet switch (D-Link gigabit versus a Netgear 100). And while the transfer times at 100 megabits are consistent, at 1000 megabits they vary in no discernible pattern, with 3&times; being about the slowest and 5&times; about the fastest. I had the same results with the AirLink switch when it was working, so it's not a D-Link problem, and is probably caused by overloading Windows. </p>

<p>I'm about to add a couple of Linux boxes capable of gigabit speeds, and I'll do the same test with those. More when I know more.</p>

<p>D-Link gigabit switches Just Work, and the time saved is significant.</p>
<h3>Building Your Ethernet</h3>

<p>Alex notes that when he is called in to troubleshoot a small business network, a good part of the time the trouble is a failed hub. Murphy's Law dictates that the hub is behind someone's desk, covered with dust, and its location isn't recorded on any document. Moreover, it cascades to another hub, rather than to a switch, and it's not at all obvious whether it needs to be connected as an uplink or downlink (on hubs that makes a difference; modern switches may not make a distinction). There are rules about how many stages of cascade you can have for hubs. It's called the "5-4-3 rule," and it mandates that between any two nodes on the network, there can only be a maximum of five segments, connected through four repeaters or concentrators, and only three of the five segments may contain user connections. </p>

<p>There are reasons for this. The Ethernet protocol requires that a signal sent out over the LAN reach every part of the network within a specified length of time. The 5-4-3 rule ensures this, and thinking about it can make your head explode.</p>

<p>If you are planning a network there's an easier way: Get a D-Link 24-port gigabit switch, put that in a central place, and when you wire your establishment, have enough cables pulled so that you have an outlet everywhere you might want a computer. This will likely turn out to be more lines than computers, and so what? It may even turn out to be more than 24 lines, and again, so what? Just connect up the ones you'll use, and if you move a computer, you just plug it into a new Ethernet outlet.</p>

<p>Of course, most of us don't have that luxury, and when I designed this part of Chaos Manor I wired it for ARCnet, and when we later abandoned the ARCNet cables in place and pulled Ethernet wires, I didn't plan enough outlets, so I need to cascade switches in several places. I'm giving you advice I haven't followed, but then at Chaos Manor, we do a lot of silly things so you don't have to.</p>
<h3>Upgrading to Gigabit</h3>

<p>Now that I have replaced all the switches with D-Link gigabit (24-port at the central location, 5-port out on the periphery), I could, in theory, put gigabit Ethernet boards in the machines that don't have it on the motherboard. I am not going to do that, and I don't advise you to do it. In the first place, if you put a gigabit board into a PCI slot, the PCI bus itself slows things to below a gigabit. The best I have ever been able to do in upgrading from 100 megabit by adding a gigabit board is to about double the throughput. Now that isn't anything to sneeze at, but it's not the Earth, either. Note that gigabit-to-gigabit throughputs tend to be three- to five-times faster than 100 megabit (the best I ever got was about 6&times;, and that was only once).</p>

<p>Note also that motherboards with a faster slot bus like PCI-Express will very likely have gigabit Ethernet on board. It seems reasonable, then, to just let nature take its course. Replace the switches, and as you upgrade your systems, you'll automatically upgrade to gigabit Ethernet. It may be worth putting a gigabit card in a server, since that's used a lot and doubling its throughput is probably worth the effort, but don't be surprised if there's no effect whatsoever. The best way to speed up server operations is to replace the motherboard with one that has gigabit Ethernet on a bus designed to handle it.</p>
<h3>Winding Down</h3>

<p>The game of the month is <i>Rome: Total War. </i>It takes an hour to install, what with all the options, and the online updating, and the rest of it. I have some complaints, but I sure like it. Fair warning: It eats time. I wouldn't bother with the Prima Game Guide book, which gives no more information than the excellent manual that comes with the game. If you want some strategy guidance, Google "smackus maximus."</p>

<p>I have two books of the month, both on the same theme. First.<i> Cowboy Capitalism: European Myths, American Reality,</i> by Olaf Gersemann (Cato Institute, 2004). The publisher is Cato Institute, which should be warning enough of the viewpoint, but the arguments are sound and there is a lot of data, unlike the usual tome on economic policy. The second book is Bill Blunden's <i>Offshoring It: The Good, The Bad, and The Ugly </i>(Apress, 2004), which once again is long on data, and intelligently discusses an important subject.</p>

<p>The Computer Book of the Month is <i>Getting Permission: How to License &amp; Clear Copyrighted Materials Online and Off,</i> by Richard Stim (Nolo Press, 2000). This is comprehensive and useful for anyone compiling materials for publication. The other computer book of the month is <i>Mac OS X Power Hound, Panther Edition, </i>by Rob Griffiths (O'Reilly &amp; Associates, 2004). It's a compilation of tricks and procedures for Mac users, and I suspect it will be as useful to experienced Mac users as it has been to me. There's just a lot of good stuff in there.</p>
<p><b></b></p>
<p><b>DDJ</b></p>




</body>
</html>