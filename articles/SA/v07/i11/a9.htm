<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 4.0//EN">


<HTML>
<HEAD>
<TITLE>v07, i11: Questions and Answers</TITLE>
<LINK REL=StyleSheet HREF="../../resource/css/sacdrom.css" TYPE="text/css" TITLE="CSS1">
</HEAD>

<body bgcolor="#ffffff" text="#000000" link="#990000" alink="#669999" vlink="#333366" topmargin=0 leftmargin=0>

<! -- Begin MASTER TABLE -- >
<!center><table width=600 cellpadding=0 cellspacing=0 border=0 bgcolor="#ffffff">

<tr>

<table cellpadding=5 cellspacing=0 border=0>
	<tr>

		<td><span class=navbarLink>Article</span></td>
		<td><a href="../../../../source/SA/1998/nov98.tar"><b class=codeListing>nov98.tar</b></a></td>

	</tr>
</table>


</tr>
<tr>
<! -- Begin Content ------ >
<td valign=top width=440 bgcolor="#ffffff">
<table width=100% cellpadding=15 cellspacing=0 border=0>
<tr><td valign=top>



<h1>Questions and Answers</h1><p>
<p>
Bjorn Satdeva<p>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0>
 How do you configure <B>sendmail</B>?<p>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0>
 This is a big question that Bryan Costales and Eric Allman took over a thousand pages to answer in the <I>Sendmail</I> book from O'Reilly and Associates. When discussing <B>sendmail</B> configuration, most people still think of the difficulties of writing the syntax for the <B>sendmail.cf</B> file. However, this is really not the biggest issue any longer. If you know the <B>sendmail</B> topology you want across the network, then you can use Eric Allman's M4 macros to build the necessary <B>sendmail</B> configuration files without too much problem. <p>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0>
 Where do I get the latest version of <B>rdist</B> source code for Sun OS 4.1.4?<p>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0>
 The original version of <B>rdist</B>, which is shipped by most vendors, was written many years ago, and is not very well implemented. In 1992, Michael A. Cooper ("Overhauling Rdist for the '90s", Proceedings of the Large Installation Systems Administration Conference, 1992) published a completely rewritten version of <B>rdist</B> that addressed all the known security and performance problems in the old version of <B>rdist</B>. You can get this version of <B>rdist</B> from <B>ftp://ftp.ucs.edu:/pub/rdist</B>. It is compiled on a large number of platforms, and should be backwards compatible with most older versions of <B>rdist</B>.<p>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0>
 What command is used to display the internal date in UNIX in a format other than the number of seconds since the base date/time (for instance, in ddmmyyyy format)? (Yes, I admit that I'm a novice....)<p>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0>
 There is nothing wrong in being a novice, or as I prefer to call it, a new guru. In UNIX, the internal time is kept as the number of seconds since 00:00:00 UTC, January 1, 1970. This date is sometimes referred to as the epoch. The <B>date</B> command will display the system date for you in a format that is more useable for a human. By default, the date will be in this format: <B>Sun Jul 19 17:35:01 PDT 1998</B>, where the three-letter code between the time and the year is the time zone.<p>
You can also have the <B>date</B> command display the date in other formats. There are variations between different versions of UNIX, so you will need to check the man page for <B>date</B> on your system to see the exact syntax. However, to use the example in your question, if you want the date displayed as ddmmyy, on many versions the command:<p>
<pre>
date "+%d%m%y"
</pre><p>will display<p>
<pre>
910798
</pre><p>which we instantly see is not a year 2000 compliant representation. On newer systems, such as newer releases of Solaris, you can use <B>+%d%m%Y</B> instead to get the requested format of ddmmyyyy.<p>
The <B>date</B> command can also be used to set the system time. It is best if this is only done at boot time, because it can cause confusion for some programs if time suddenly changes. For example, a jump back in time will break programs such as <B>make</B>.<p>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0>
 I have one dedicated modem for a user application submitting simultaneous <B>cu</B> commands. Each command will dial up the same phone number, but submit variable data from the user. How can I configure the environment to queue the commands?<p>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0>
 You will need some kind of a batch scheduler. To my knowledge, no such program is freely available, as batch schedulers are mostly used by IS organizations who prefer commercial software. There are a number of companies that offer such products, however, I have not used any of them, and thus cannot recommend any.<p>
A better solution may be to test your applications' success on getting to the modem, retrying with reasonable delays until they have success. You may need some kind of random factor when you calculate the wait before a retry. This will ensure that if several programs try to access this resource at the same time, they will wait different amount of time to retry.<p>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0>
 Why is my computer making phone calls? My computer is connected to a modem and at various times during the day attempts to call out. Fortunately, the number is not working. I am running the Solstice PPP, but according to SUN's technicians PPP is not responsible because it is not recording these calls on the PPP.log. These calls are made even when no one is logged on. Please help.<p>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0>
 You will need to look at what programs are running when the computer attempts to dial out. Try to run a <B>ps</B> while the dialout is in progress, and look for programs such as <B>uucico</B> (which is part of UUCP) or programs like <B>cu</B>, <B>tip</B>, or <B>kermit</B>, which are terminal emulators. Run <B>ps</B> a number of times, and store the output in files, so you can look at the output in your own time. Eliminate everything you know cannot do this (like maybe <B>cc</B>) and then take a closer look at the remaining programs.<p>
Another way to keep an eye on what is running on your system is to use the publicly available tool <B>top</B>, which is available for a large number of UNIX architectures (it pokes around in in-memory kernel tables, so it is non-trivial to port). This program will give you a continuous view of which processes are running. It is good, not only as a troubleshooting tool, but also to get a feel for what kind of processes are normal on your system.<p>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0>
 How do I configure a UNIX system as network gateway?<p>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0>
 You will need two network interface cards, each configured according to the network to which you are connected. If this is done correctly, then you will be able to contact the system on either network from the gateway. In order to have another system on either network contact a system on the opposite network, you will need to do two things. First, make sure that the gateway is configured to forward traffic from one network to another. Second, make sure that the routing between the network is set up correctly.<p>
How you enable packet forwarding between the two interfaces on your gateway is very system dependent; however, most vendors ship their systems with this feature enabled (something to be aware of if you use the system for a dual home bastion host). If you only have these two networks, then the routing can simply be done by having every host use your gateway as their default route to all other hosts. However, you will most likely have a more complicated situation that cannot be covered in this column. If you need to learn about routing, the best place to start would be <I>TCP/IP Network Administration</I> by Craig Hunt, published by O'Reilly and Associates. This book will teach you the basic skills needed to administer IP networks.<p>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0>
 I read in the <I>Sys Admin</I> magazine that you have a script that does random restores from backups to make sure that what the backup system said it backed up actually exists and is restorable. Would you please tell me where I can find the script? Or if you don't have the script, can you tell me how to randomly select files/directories?<p>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0>
 I have often repeated that part of a good backup routine must include quality control of the backups, and that a good way to do this is to perform a random restore every day. I have, however, never said that I had a script that could do this. You might be able to write a script to do this, but it would eliminate most of the intent behind my suggestion. You should have some human interaction in the backup loop to detect problems that may occur with your backup. The daily restore routine will also help ensure that your operators or junior system administrators know how to perform a restore.<p>
Backups and restores should by all means be performed by the most junior members of your staff. This is a purely tactical operation, which can be simplified by creating appropriate procedures. You will, however, need to have somebody on your senior staff make sure the backup is being performed as intended, and that no failure, either human or equipment, is causing a system to be without any usable backup for an extended amount of time.<p>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0>
 I have an assortment of Solaris machines. Half of the machines can send email outside of our domain, and the other half can't. All the <B>sendmail</B> configuration files are the same and so is <B>/etc/resolv.conf</B> file. Can you help?<p>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0>
 A number of possibilities can cause this situation, there is not enough information included in your question. Some things to check for would be whether the <B>snswitch.conf</B> file differs between the machines, and whether you are using the stock <B>sendmail</B> or using a recent version of <B>sendmail</B>. The <B>sendmail.cf</B> file can also create problems, even if it is identical between the systems.<p>
The best way is to make sure that you have a recent version of <B>sendmail</B>, currently version 8.9.1, and build your <B>sendmail.cf</B> files from scratch, using the M4 macros provided as part of <B>sendmail</B>. Then make sure your <B>/etc/nsswitch</B> file is the same on all your systems. It is best if your local environment allows you to use DNS and entirely bypass NIS or NIS+, but in practice, that is not always possible. If you have to use the hosts file, either directly or through NIS/NIS+, then make sure that the first name is fully qualified.<p>
When you make your <B>sendmail.cf</B> file, use the nullclient version on any host that is not required to receive mail. Once you have done this, you are likely to see your problem go away. If it still lingers, you will need to take a hard look at how you have configured your DNS, because that could also make your email misbehave.<p>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0>
 Can you please tell me how to configure NIS on Solaris 2.5.1? Thanks in advance.<p>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0>
 NIS has been unbundled under Solaris, because Sun wants us to use NIS+. You can still get NIS, if you order the Server Supplement 1.1 CDROM, which has a package called NSkit. This package contains the old NIS implementation for Solaris. The package is, according to Sun, provided to allow a smoother transition from NIS to NIS+, however, in reality it is used by many sites simply to continue to use NIS.



<h1>About the Author</h1><p>










Bjorn Satdeva is the president of /sys/admin, inc., a consulting firm which specializes in large installation system administration. Bjorn is also co-founder and former president of Bay-LISA, a San Francisco Bay Area user's group for system administrators of large sites. Bjorn can be reached at <B>questions@sysadmin.com</B>.





















<br>&nbsp;<br>
</table></center></td>
<! -- End Content ------ >

</table><!/center>
<! -- End MASTER TABLE -- >

</body></html>
