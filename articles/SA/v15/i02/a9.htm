<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 4.0//EN">


<HTML>
<HEAD>
<TITLE>v15, i02: Questions and Answers</TITLE>
<LINK REL=StyleSheet HREF="../../resource/css/sacdrom.css" TYPE="text/css" TITLE="CSS1">
</HEAD>

<body bgcolor="#ffffff" text="#000000" link="#000000" alink="#669999" vlink="#333366" topmargin=0 leftmargin=0>
<! -- Begin MASTER TABLE -- >
<!center>
<table width=98% cellpadding=0 cellspacing=0 border=0 bgcolor="#ffffff">
  <tr>

<table cellpadding=5 cellspacing=0 border=0>
	<tr>

		<td><span class="navbarLink">Article</span></td>
		<td><a href="../../../../source/SA/2006/feb2006.tar"><b class=codeListing>feb2006.tar</b></a></td>

	</tr>
</table>


</tr>
<tr>
<! -- Begin Content ------ >
    <td valign=top width=527 bgcolor="#ffffff"> 
      <table width=100% cellpadding=15 cellspacing=0 border=0>
<tr>
          <td valign=top> 
            <! -- Insert Content ------ >
            <h1><img src="../../resource/1_questions.gif" width="245" height="130" align="right">Questions 
              and Answers</h1>
            <P> Amy Rich
            <P> <b><font size="+2">Q</font></b> People in our company, a systems 
              administration consulting agency, do a lot of traveling and work 
              on a lot of remote systems. A good portion of us have Treo 600/650s 
              with Sprint PCS service (unlimited data for a cheap flat rate per 
              month) and Apple PowerBooks (they run Unix underneath the hood) 
              that we use to keep in touch from the road. The Treos are great 
              if you don't need a lot of screen territory, and the PowerBooks 
              are great when there's a network connection available. Sometimes 
              we need the usability of the laptop without having wireless or wired 
              nearby, though. I've heard you can use the Treo as a modem for your 
              laptop. This would fit the bill nicely! Do you know what software 
              is required and how to configure things?
            <P> <b><font size="+2">A </font></b> If you have a Treo 650 and use 
              Bluetooth, install the 1.12 updater patch from:
            <P> 
            <pre>
http://www.palm.com/us/support/downloads/treo650updater/sprint.html
</pre>
            This patch enables Bluetooth dial-up networking without the need for 
            any extra software. If you want to use USB instead, then you can purchase 
            the WirelessModem software from:
            <P> 
            <pre>
http://www.notifymail.com/palm/wmodem/index.shtml
</pre>
            This software supports all of the Treo models as modems and Windows, 
            Mac, or Linux on the host. There's also documentation for using the 
            AT&amp;T/Cingular network as well.
            <P> The site <B>http://www.sprintpcsinfo.com/</B> details using an 
              older, free version of the WirelessModem driver for the Mac without 
              the shareware phone portion. Detailed directions can be found at:
            <P> 
            <pre>
http://www.sprintpcsinfo.com/modules.php?name=Content&amp;pa=showpage&amp;pid=41
</pre>
            If you have a Verizon phone instead of a Sprint phone, you can enable 
            the Treo tethered mode by dialing <B>#*#TETHERED</B> (<B>##83843733</B>) 
            instead of <B>##TETHERED</B> (<B>##83843733</B>).
            <P> If you're interested in using your Treo as a wireless modem for 
              Windows, you can also take a look at the commercial software PDANet:
            <P> 
            <pre>
http://www.junefabrics.com/palmnet/index.php
</pre> <b><font size="+2">Q</font></b> We have a number of second-hand 
            Sun v240 machines that we purchased at an auction. They came preinstalled 
            with Solaris 9, but we'd like to wipe them and start over with out 
            own installations. The problem is that the ALOM password has been 
            set, and we have no idea what it is. If this were simply the root 
            password (which we DO have), we could boot from CD-ROM or the network 
            to reset it, but I'm not sure how to work around this for the ALOM. 
            Can you tell me an easy way to reset the ALOM password?
            <P> <b><font size="+2">A </font></b> Since you say that you have the 
              root password to the OS, changing the ALOM password is fairly trivial. 
              You need to run the <B>scadm</B> command and specify <B>userpassword</B> 
              and the username <B>admin</B> as arguments:
            <P> 
            <pre>
/usr/platform/'/bin/uname -i'/sbin/scadm userpassword admin
</pre>
            When you choose a new password, you must adhere to the following guidelines 
            (uppercase and lowercase letters are considered equivalent for comparison 
            purposes):
            <P> Passwords must contain between six and eight characters. Passwords 
              longer than eight characters are truncated at the eighth character.
            <P> Passwords must contain at least two alphabetic characters and 
              at least one numeric or special character.
            <P> Passwords must differ from the user's ALOM login name and any 
              reverse or circular shift of that login name.
            <P> The new password must differ from the old one by at least three 
              characters.
            <P> <b><font size="+2">Q</font></b> We have a number of end users 
              running OS X 10.3 and 10.4 on their wireless laptops. Sometimes 
              they complain about connection issues in various parts of the building. 
              When we go to the same part of the building with our own laptops 
              or they come to our offices, the problem disappears. To troubleshoot 
              this, I'd like to check the signal strength and quality every 10 
              minutes or so. I know the end user can put the wireless quality 
              graphic in the menu bar, and they can pull up the Internet Connect 
              panel from there, but that doesn't give us a continuous text-based 
              log that we can parse and graph. Are there any tools we can run 
              from cron that will output machine-readable text?
            <P> <b><font size="+2">A </font></b> There's actually a program called 
              <B>airport</B> that ships with the OS that you can query from the 
              command line (or from cron) to obtain text output instead of graphical 
              output. The command is buried at:
            <P> 
            <pre>
/System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Resources/airport
</pre>
            To keep a running log of wireless performance, you could write a script 
            that time-stamped a log file and then parsed the output of:
            <P> 
            <pre>
/System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Resources/airport -I
</pre>
            The output looks similar to the following for a laptop using 802.11g 
            with 128-bit WEP:
            <P> 
            <pre>
        commQuality: 42
         rawQuality: 26
     avgSignalLevel: -73
      avgNoiseLevel: -94
         linkStatus: ESS
           portType: Client
         lastTxRate: 54
            maxRate: 54
    lastAssocStatus: 1
              BSSID: xx:xx:xx:xx:xx:xx
               SSID: &lt;SSID Name&gt;
           Security:   cipher: WEP 128
</pre>
            The <B>airport</B> command also allows you to manipulate the wireless 
            connection as well as view the current status. If you run <B>airport</B> 
            with the <B>-h</B> option, it outputs the following list of supported 
            arguments:
            <P> 
            <pre>
-a      --autojoin          Join first available trusted network 
                            from list
-p      --applyprefs        Apply settings as currently configured 
                            via System Preferences
-u      --updateprefs       Examine network preferences and repair 
                            if necessary
-z      --disassociate      Disassociate from any network
-i&lt;arg&gt; --ibss=&lt;arg&gt;        Create IBSS
-f&lt;arg&gt; --file=&lt;arg&gt;        use &lt;arg&gt; as airport preference file 
                            instead of /Library/Preferences/ \
                            SystemConfiguration/ \
                            com.apple.airport.preferences.plist
-m&lt;arg&gt; --mac=&lt;arg&gt;         use &lt;arg&gt; instead of current AirPort 
                            MAC Address
-x      --xml               Print info as XML
-h      --help              Show this help
-o&lt;arg&gt; --oldencrypt=&lt;arg&gt;  Encrypt string &lt;arg&gt; with 
                            Panther-style encryption  
-s&lt;arg&gt; --scan=&lt;arg&gt;        Perform a wireless broadcast scan 
                            will perform a directed scan if the 
                            optional &lt;arg&gt; is provided
-r&lt;arg&gt; --repeats=&lt;arg&gt;     Repeat the command the specified 
                            number of times
-A&lt;arg&gt; --associate=&lt;arg&gt;   Associate to network will prompt for 
                            network name if arg is not specified 
                            and if necessary, for a password if 
                            the network is using WEP or WPA and 
                            the --password argument is not used
-I      --getinfo           Print current wireless status, 
                            e.g. signal info, BSSID, port type etc.
-P&lt;arg&gt; --psk=&lt;arg&gt;         Create PSK from specified passphrase 
                            and SSID
-S      --showstack         Print the current list of known networks
        --bssid=&lt;arg&gt;       Specify BSSID to associate with
        --channel=&lt;arg&gt;     Set arbitrary channel on the card
        --password=&lt;arg&gt;    Specify a WEP key or WPA password 
                            when associating to a network
        --property=&lt;arg&gt;    Set a property in the driver's 
                            IORegistry
        --ssid=&lt;arg&gt;        Specify SSID when creating a PSK, or 
                            associating to a network
							</pre> 
            <b><font size="+2">Q</font></b> As part of our Solaris 8 JumpStart 
            process, we set up all of the DiskSuite mirrors with a finish script. 
            Unfortunately, the <B>boot-device</B> is not modified to include both 
            the initial disk and its mirror. Is there a way to accomplish this 
            in a finish script?
            <P> <b><font size="+2">A </font></b> In my installations, I tend to 
              create an alias for the secondary mirror and then reference the 
              alias in the <B>boot-device</B>. Once you know the path to the disk 
              (e.g., <B>/dev/dsk/c1t0d0s0</B>), you can use the following code 
              snippet to set up an alias and configure the <B>boot-device</B>. 
              In the following example, the path to the boot device is stored 
              in the variable <B>${mpart}</B>:
            <P> 
            <pre>
# determine the device path to the mirror disk

# get the device path of the mirror disk and chop off the leading bits
mdev=`ls -l ${mpart} | awk '{print $11}' | sed -n \
  's/..\/..\/devices//p'`
echo "mdev=${mdev}"

# now we need to change sd, ssd, or dad to disk (scsi, fibre, or ide)
# test for standard sd device
if [ "X`echo ${mdev} | grep '/sd@'`" = "X${mdev}" ]; then
  mirror1=`echo ${mdev} | sed -n 's/sd@/disk@/p'`
# test for fibre disk
elif [ "X`echo ${mdev} | grep '/ssd@'`" = "X${mdev}" ]; then
  mirror1=`echo ${mdev} | sed -n 's/ssd@/disk@/p'`
# test for ide
elif [ "X`echo ${mdev} | grep '/dad@'`" = "X${mdev}" ]; then
  mirror1=`echo $mdev | sed -n 's/dad@/disk@/p'`
# we haven't found a known disk type
else
  echo "No valid disk type (ssd, sd, dad) found." &amp;&amp; exit 1
fi

echo "mirror1=${mirror1}"

# set up nvramrc and a devalias if we have a valid mirror

if [ "X${mirror1}" != "X" ]; then
  echo "setting up nvramrc and a devalias for mirror1"
  eeprom 'use-nvramrc?=true'
  echo "saving old nvramrc settings"
       eeprom nvramrc | \
   egrep -v 'data not available|devalias mirror1' | \
   sed 's/nvramrc=//g' &gt; /tmp/nvramrc.$$
 echo "devalias mirror1 ${mirror1}" &gt;&gt;  /tmp/nvramrc.$$

  eeprom nvramrc="`cat /tmp/nvramrc.$$`"
       rm /tmp/nvramrc.$$

  # reset the boot-path to include the first entry (the main disk)
  # and our newly defined boot mirror

  # get the current boot disk, and drop everything else from 
  # the bootpath
  bdisk=`eeprom boot-device| sed -n 's/boot-device=//p'|awk \
    '{print $1}'`
  # set our new boot path
  if [ "X${bdisk}" != "X" ]; then
    echo "setting boot-device to \"${bdisk} mirror1\""
    eeprom boot-device="${bdisk} mirror1"
  else
         echo "No valid boot disk found, not setting boot-path" \
           &amp;&amp; exit 1
  fi
     else
       echo "Can not find mirror device name, not changing eeprom" \
         &amp;&amp; exit 1
  fi

# also make sure that we can boot with only half of the replicas, 
# since we tend not to store them anywhere but the two boot mirrors

echo '* enable booting with only half of the \
  replicas' &gt;&gt; /etc/system
echo 'set md:mirrored_root_flag=1' &gt;&gt; /etc/system
</pre> 
            <b><font size="+2">Q</font></b> We purchased many of the first generation 
            17" Apple PowerBooks for our systems administration staff. I happened 
            to pick up a big lot of Memorex DVD+RW 4.7 GB discs on Ebay, but I 
            can't get any of them to work in my Powerbook. I first suspected faulty 
            DVDs, but since they all failed, I couldn't imagine that was the case. 
            I then tried another admin's PowerBook, and they failed there, too. 
            It turns out that the PowerBook has a Matshita DVD-R UJ-815A drive 
            in it, which the System Profiler lists as a DVD-RW drive. I'm guessing 
            there's a big difference between DVD+RW and DVD-RW?
            <P> <b><font size="+2">A </font></b> You are correct in assuming that 
              the DVD+RW blanks you bought are not compatible with your DVD-RW 
              hardware. Like the early days of VCRs where Betamax competed with 
              VHS, there are multiple recordable DVD formats. There are actually 
              three different DVD recording standards:
            <P> 
            <ul>
              <li> <B>DVD-RW</B>: Developed by Pioneer and approved by the DVD 
                Forum. 
              <li> <B>DVD+RW</B>: Developed by the <B>DVD+RW</B> Alliance (led 
                by Dell, HP, Mitsubishi, Philips, Ricoh, Sony, RCA, and Yamaha) 
                but not approved by the DVD Forum. 
              <li> <B>DVD-RAM</B>: Marketed by the RAM Promotion Group (Hitachi, 
                Toshiba, Maxell, LG Electronics, Matsushita/Panasonic, Samsung 
                and Teac) and approved by the DVD Forum.</ul>
                <P> 
                <P> The naming scheme chosen by the developers of each standard 
                  makes it confusing when buying drives and media. The <B>DVD-RW</B> 
                  and <B>DVD+RW</B> formats contain similar features and are compatible 
                  with many standalone DVD players and most DVD-ROMs. Most new 
                  DVD recorders use a hybrid of the two formats called <B>DVD&#177;RW</B>, 
                  supporting both types of media. If your drive only supports 
                  <B>DVD+RW</B> or <B>DVD-RW</B>, though, you must buy the corresponding 
                  media.
                <P> <B>DVD-RAM</B>, on the other hand, is generally a better quality 
                  but less popular format, much like Betamax.
                <P> <b><font size="+2">Q</font></b> We're running a mix of Solaris 
                  8 and Solaris 9 hosts at our site. Our new security administrator 
                  has dictated that we implement time restrictions on when people 
                  can log into the machines. I'm looking for some software that 
                  would allow me to configure applicable login hours based on 
                  username or group, or something like that. Know of anything 
                  that might fit the bill?
                <P> <b><font size="+2">A </font></b> There's a freely available 
                  collection of PAM modules created by a company called Computer 
                  Smiths that might do what you're looking for. The modules are 
                  available from:
                <P> 
                <pre>
http://www.comsmiths.com.au/pam/
</pre>
                Of particular interest to you would be the <B>PAM_login_times</B> 
                module, which is configurable with a 15-minute granularity. To 
                use <B>PAM_login_times</B>, download the appropriate Solaris package 
                file for your OS version, and use <B>pkgadd</B> to install it 
                on each target machine. The <B>login_times</B> program allows 
                you to examine or set the enable and prohibit times, stored in 
                <B>/var/adm/login_times</B>, for the specified users:
                <P> 
                <pre>
login_times  [ -e RANGE ] [ -p RANGE ] [ user ... ]

-e   Set the enable range. This specifies the times logins are 
allowed. See below for a description of the valid input for a RANGE

-p   Set the prohibit range. This specifies the times logins are 
not allowed.  If both the -e and -p options are specified the 
ranges are checked in the specified order.

user One or more users can be specified for the set, or 
informational modes of operation. If no users are specified only 
the informational mode is permissible.

RANGE

The range input is specified as ddd hh:mm - ddd hh:mm. Multi-day 
ranges can be specified if desired. The days start on Sunday and 
go to Saturday.  An example range would be Sun 00:00 - Sat 23:59 
which specifies all periods during the week.  The times are 
converted to 15 minute periods, so the smallest period specifiable 
is 15 minutes.

Either the starting time, or the ending time may be left off, 
leaving the RANGE '-' to mean Sun 00:00 - Sat 23:59.

Note that spaces in the range have to be quoted to protect them 
from the shell.
</pre>
                You'll also need to modify <B>/etc/pam.conf</B> and insert the 
                entry for the Login Times PAM module near the top of the authentication 
                group. If you're restricting telnet, for example, you'd want the 
                line:
                <P> 
                <pre>
telnet auth required /usr/lib/security/pam_login_times.so.1
</pre>
                before the line:
                <P> 
                <pre>
telnet auth required /usr/lib/security/pam_unix.so.1
</pre>
                If you're trying to restrict access to your machine via SSH and 
                you're using OpenSSH, make sure to turn on PAM support within 
                OpenSSH or modifications made to <B>/etc/pam.conf</B> will have 
                no affect.
                <P> <I>Amy Rich has more than a decade of Unix systems administration 
                  experience in various types of environments. Her current roles 
                  include that of Senior Systems Administrator for the University 
                  Systems Group at Tufts University, Unix systems administration 
                  consultant, author, and charter member of LOPSA. She can be 
                  reached at: <B>qna@oceanwave.com</B>.</I></table></table>&nbsp;

<! -- End Content ------ >

<!/center>
<! -- End MASTER TABLE -- >

</body>



<! -- Begin Content ------ >
</html>
