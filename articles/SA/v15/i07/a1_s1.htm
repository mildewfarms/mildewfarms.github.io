<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 4.0//EN">


<HTML>
<HEAD>
<TITLE>v15, i07: Sidebar 1</TITLE>
<LINK REL=StyleSheet HREF="../../resource/css/sacdrom.css" TYPE="text/css" TITLE="CSS1">
</HEAD>

<body bgcolor="#ffffff" text="#000000" link="#000000" alink="#669999" vlink="#333366" topmargin=0 leftmargin=0>
<! -- Begin MASTER TABLE -- >
<!center>
<table width=98% cellpadding=0 cellspacing=0 border=0 bgcolor="#ffffff">
  <tr>

<table cellpadding=5 cellspacing=0 border=0>
	<tr>

		<td><span class="navbarLink"><a href="a1.htm">Article</a></span></td>
		<td><span class="navbarLink"><a href="a1_l1.htm">Listing 1</a></span></td>
		<td><span class="navbarLink"><a href="a1_l2.htm">Listing 2</a></span></td>
		<td><span class="navbarLink"><a href="a1_l3.htm">Listing 3</a></span></td>
		<td><span class="navbarLink"><a href="a1_l4.htm">Listing 4</a></span></td>
	</tr>
	<tr>
		<td><span class="navbarLink"><a href="a1_l5.htm">Listing 5</a></span></td>
		<td><span class="navbarLink"><a href="a1_l6.htm">Listing 6</a></span></td>
		<td><span class="navbarLink"><a href="a1_l7.htm">Listing 7</a></span></td>
		<td><span class="navbarLink"><a href="a1_l8.htm">Listing 8</a></span></td>
		<td><span class="navbarLink">Sidebar 1</span></td>
	</tr>
	<tr>
		<td><span class="navbarLink"><a href="a1_s2.htm">Sidebar 2</a></span></td>
		<td><a href="../../../../source/SA/2006/jul2006.tar"><b class=codeListing>jul2006.tar</b></a></td>

	</tr>
</table>


</tr>
<tr>
<! -- Begin Content ------ >
    <td valign=top width=527 bgcolor="#ffffff"> 
      <table width=100% cellpadding=15 cellspacing=0 border=0>
<tr>
          <td valign=top> 
            <! -- Insert Content ------ >
            <h1>HADR and Heartbeat Timing Settings </h1>
            <P>One of the hardest things to figure out was the 
              correct timing settings. For most folks, setting these values is just a 
              matter of preference (i.e., how soon you want things to fail over). But 
              timing becomes critical when dealing with resources like a HADR database, 
              which, when it fails over, takes some time to do so. If you don't 
              configure these numbers correctly, you can end up with a 
             "split-brain" scenario. This is essentially a situation where 
              both the HADR primary and HADR standby believe they are the primary for the 
              database. They are then "independent", with neither one knowing 
              what the other is doing nor shipping logs to the other. After a lot of 
              digging and some judicious translation of German texts, we found the 
              following suggestions to avoid split brain: 
            <p>            
	        <ul>
	          <li>Initially, set deadtime to 60 or more (we 
	            used 120 when we started) and set warntime to between 1/4 and 1/2 of the 
	            deadtime value. <br>
              <li>Once things 
	              are running, recheck these figures by checking the logs for any "late 
	              heartbeat" warnings. Then, set deadtime to 1 1/2 to 2 times the 
	              longest time interval that went by without a heartbeat. Set warntime to the 
	              keepalive time, times two. 
            </ul>
	        <p>On our tuned systems at the lab, we use the following 
	          values, because the systems sit on the same network segment and are fairly 
	          "unloaded": 
            <p>            
	        <ul>
	          <li>keepalive: 1 <br>
              <li>deadtime: 20 <br>
              <li>warntime: 5 
            </ul>
        </table></table>

<! -- End Content ------ >

<!/center>
<! -- End MASTER TABLE -- >

</body>



<! -- Begin Content ------ >
</html>
