<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 4.0//EN">


<HTML>
<HEAD>
<TITLE>v03, i04:  A refer Macro Package</TITLE>
<LINK REL=StyleSheet HREF="../../resource/css/sacdrom.css" TYPE="text/css" TITLE="CSS1">
</HEAD>

<body bgcolor="#ffffff" text="#000000" link="#990000" alink="#669999" vlink="#333366" topmargin=0 leftmargin=0>

<! -- Begin MASTER TABLE -- >
<!center><table width=600 cellpadding=0 cellspacing=0 border=0 bgcolor="#ffffff">

<tr>

<table cellpadding=5 cellspacing=0 border=0>
	<tr>

		<td><span class=navbarLink>Article</span></td>
		<td><span class=navbarLink><a href="a11_f1.htm">Figure 1</a></span></td>
		<td><span class=navbarLink><a href="a11_f2.htm">Figure 2</a></span></td>
		<td><span class=navbarLink><a href="a11_f3.htm">Figure 3</a></span></td>
		<td><span class=navbarLink><a href="a11_f4.htm">Figure 4</a></span></td>
	</tr>
	<tr>
		<td><span class=navbarLink><a href="a11_f5.htm">Figure 5</a></span></td>
		<td><span class=navbarLink><a href="a11_f6.htm">Figure 6</a></span></td>
		<td><span class=navbarLink><a href="a11_l1.htm">Listing 1</a></span></td>
		<td><a href="../../../../source/SA/1994/jul94.tar"><b class=codeListing>jul94.tar</b></a></td>

	</tr>
</table>


</tr>
<tr>
<! -- Begin Content ------ >
<td valign=top width=440 bgcolor="#ffffff">
<table width=100% cellpadding=15 cellspacing=0 border=0>
<tr><td valign=top>




<H1>A refer Macro Package</H1><p>
<P>
Thomas Richter<P>

refer is a preprocessor for the nroff/troff 
text formatter found on most UNIX systems. It is used
to cite bibliographic 
references -- including journals, books, reports, and
other forms 
of publication -- in documents. On AIX 3.2, however,
the macro 
package dealing with the refer output is not available
[IBM88a,IBM93a]. 
This article presents a macro package (see Listing 1),
based on the 
macro package, that processes the output produced by
refer.<P>

<B>refer Input</B><P>

refer scans its input for keywords surrounded by brackets,

as in<P>
<PRE>
.[
richter
.]</pre><p>
<p>
refer searches its database for an entry which 
contains the keyword and replaces the three lines with
a label. The 
label is generated by refer and a set of nroff/troff

string and macro definitions. When invoked with flag
&quot;-e,&quot; 
refer replaces the above three lines with the label
string 
and appends all bibliographic data to the end of its
input, to be 
printed at the end of the document. If refer encounters
several 
keyword sequences without any intervening text, it generates
one label 
comprising the entire bibliography.<P>

The database used by refer for keyword lookup is an
ASCII 
file. Each line contains a key-letter preceeded by a
percent sign 
(%) and its associated data (see Figure 1).<P>

Only relevant key-letters should be supplied and all
key-letters but 
%A should be supplied just once.<P>

<B>Macro Package</B><P>

refer places the string definitions and macro invocations

shown in Figure 2 in its output. If these macros are
not defined, 
the output generated by refer is completely ignored.<P>

The package uses the register &quot;r?&quot; to distinguish
between 
list mode, where all references are printed at the end
of the document, 
and footnote mode, where all references are printed
as footnotes.<P>

<B>Example</B><P>

The file biblio (Figure 3) contains the database refer

uses when processing the sample input file text in Figure
4. The formatting 
command is shown in Figure 5. In the command the &quot;-p&quot;
parameter 
specifies the database file name and the &quot;-l&quot;
parameter instructs 
refer to generate labels from the author's last name
and date 
of publication. The resultant output is shown in Figure
6. refer.mm 
(Listing 1) contains the string and macro definitions.<P>

<B>Bibliography</B><P>

IBM88a. IBM. <I>Text Formatting Guide</I> (IBM RT 
PC). SC23-0810-0, 1988.<P>

IBM93a. IBM. <I>Text Formatting Reference</I> (IBM 
RISC System/6000). SC23-2453-00, 1993. <P>




<P>


<H1>About the Author</H1><p>
<P>
Thomas Richter has studied mathematics and Computer
Science 
at the University of Ulm, Germany. He has worked on
various UNIX platforms 
as a software developer and C/C++ as main programming
languages. His 
projects include compiler construction, device drivers,
and network 
programming. He has also administered various UNIX machines
for the 
last 8 years. He has worked for IBM UK since January
1993.
He can be reached at richter@vnet.ibm.com.<P>




<P>
<br>&nbsp;<br>
</table></center></td>
<! -- End Content ------ >

</table><!/center>
<! -- End MASTER TABLE -- >

</body></html>
