<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 4.0//EN">


<HTML>
<HEAD>
<TITLE>v10, i02: Listing 1 Complete script with comments</TITLE>
<LINK REL=StyleSheet HREF="../../resource/css/sacdrom.css" TYPE="text/css" TITLE="CSS1">
</HEAD>

<body bgcolor="#ffffff" text="#000000" link="#000000" alink="#669999" vlink="#333366" topmargin=0 leftmargin=0>

<! -- Begin MASTER TABLE -- >
<!center>
<table width=98% cellpadding=0 cellspacing=0 border=0 bgcolor="#ffffff">
  <tr>

<table cellpadding=5 cellspacing=0 border=0>
	<tr>

		<td><span class="navbarLink"><a href="a6.htm">Article</a></span></td>
		<td><span class="navbarLink">Listing 1</span></td>
		<td><a href="../../../../source/SA/2001/feb2001.tar"><b class=codeListing>feb2001.tar</b></a></td>

	</tr>
</table>


</tr>
<tr>
<! -- Begin Content ------ >
<td valign=top width=440 bgcolor="#ffffff">
<table width=100% cellpadding=15 cellspacing=0 border=0>
<tr>
          <td valign=top> 
            <! -- Insert Content ------ >
            <H1><b>Listing 1 </b><i>Complete script with comments</i></h1>
            <p> 
            <pre>#!/bin/csh

#
# Viagra for BSD
#
# A simple little csh script for keeping services up and
# at the ready on a BSD system. Taken from Unix Guru
# Universe (http://www.ugu.com), then hacked together
# to run on BSD and given a little bit more versatility by
# James O'Gorman (jameso@elwood.net).
#

# Define the process to look for

foreach DAEMON ( inetd apache )

# Look for the process and send any output to /dev/null

    ps -cax | fgrep "$DAEMON:t" | cut -c27-80 &gt; /dev/null

# If the process is not running, start it and give me
# the date and time that it happened

    if ( $status &gt; 0) then
        echo "Restarting $DAEMON"
        date

# Have a dir with scripts named the process name that
# you are watching for, the scripts in there will
# restart the process. It is up to you to write the
# scripts and make them start the app correctly. But,
# that is not so hard now is it? We do this so that
# we have a bit more control over how the process starts.

        /root/scripts/start/$DAEMON &amp;

# And end the script

    endif
end</pre>
          </table></table><br>&nbsp;<br>

<! -- End Content ------ >

<!/center>
<! -- End MASTER TABLE -- >

</body>



<! -- Begin Content ------ >
</html>
