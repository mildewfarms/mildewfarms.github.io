<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 4.0//EN">


<HTML>
<HEAD>
<TITLE>v01, i03:  Figure 5: Calculating Open File Table Requirements</TITLE>
<LINK REL=StyleSheet HREF="../../resource/css/sacdrom.css" TYPE="text/css" TITLE="CSS1">
</HEAD>

<body bgcolor="#ffffff" text="#000000" link="#990000" alink="#669999" vlink="#333366" topmargin=0 leftmargin=0>

<! -- Begin MASTER TABLE -- >
<!center><table width=600 cellpadding=0 cellspacing=0 border=0 bgcolor="#ffffff">

<tr>

<table cellpadding=5 cellspacing=0 border=0>
	<tr>

		<td><span class=navbarLink><a href="a2.htm">Article</a></span></td>
		<td><span class=navbarLink><a href="a2_f1.htm">Figure 1</a></span></td>
		<td><span class=navbarLink><a href="a2_f2.htm">Figure 2</a></span></td>
		<td><span class=navbarLink><a href="a2_f3.htm">Figure 3</a></span></td>
		<td><span class=navbarLink><a href="a2_f4.htm">Figure 4</a></span></td>
	</tr>
	<tr>
		<td><span class=navbarLink>Figure 5</span></td>
		<td><span class=navbarLink><a href="a2_f6.htm">Figure 6</a></span></td>
		<td><span class=navbarLink><a href="a2_f7.htm">Figure 7</a></span></td>
		<td><span class=navbarLink><a href="a2_f8.htm">Figure 8</a></span></td>
		<td><span class=navbarLink><a href="a2_f9.htm">Figure 9</a></span></td>
	</tr>
	<tr>
		<td><span class=navbarLink><a href="a2_s1.htm">Sidebar 1</a></span></td>
		<td><a href="../../../../source/SA/1992/sep92.tar"><b class=codeListing>sep92.tar</b></a></td>

	</tr>
</table>


</tr>
<tr>
<! -- Begin Content ------ >
<td valign=top width=440 bgcolor="#ffffff">
<table width=100% cellpadding=15 cellspacing=0 border=0>
<tr><td valign=top>




<H1>Figure 5: Calculating Open File Table Requirements</H1><p>
<P>
A.  To use pstat to monitor usage:
<PRE>
# pstat -f | head -1</pre><p>
<p>
B.  To use crash to monitor usage:
<PRE>
# crash

dumpfile = /dev/kmem, namelist = /sysV68,
outfile = stdout
&gt; file</pre><p>
<p>
Output for this command shows the number of currently 
defined open file entries and the maximum number of entries, 
which is the SLOT number of the last entry in the table. It
is also possible that the list will not be entirely numerical. 
In that case, you will want to pipe the output of the file 
subcommand through the command wc -l, so the actual 
number of table entries can be ascertained. Don't forget to 
subtract the appropriate number of lines for the header from crash<P>
<PRE>
&gt; file ! wc -l
28
&gt; </pre><p>
<p>
C.  The Formula<P>
<PRE>
NFILE = BASE + (number-of-users *
( largest-number-of-files-used )</pre><p>
<p>
This calculation gives the minimum number of entries 
to have configured in the kernel for the open file table.




<P>
<br>&nbsp;<br>
</table></center></td>
<! -- End Content ------ >

</table><!/center>
<! -- End MASTER TABLE -- >

</body></html>
