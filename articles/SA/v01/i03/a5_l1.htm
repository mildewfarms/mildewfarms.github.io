<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 4.0//EN">


<HTML>
<HEAD>
<TITLE><title>v01, i03: Listing 1: The load Script</title></TITLE>
<LINK REL=StyleSheet HREF="../../resource/css/sacdrom.css" TYPE="text/css" TITLE="CSS1">
</HEAD>

<body bgcolor="#ffffff" text="#000000" link="#990000" alink="#669999" vlink="#333366" topmargin=0 leftmargin=0>

<! -- Begin MASTER TABLE -- >
<!center><table width=600 cellpadding=0 cellspacing=0 border=0 bgcolor="#ffffff">

<tr>

<table cellpadding=5 cellspacing=0 border=0>
	<tr>

		<td><span class=navbarLink><a href="a5.htm">Article</a></span></td>
		<td><span class=navbarLink><a href="a5_f1.htm">Figure 1</a></span></td>
		<td><span class=navbarLink><a href="a5_f2.htm">Figure 2</a></span></td>
		<td><span class=navbarLink><a href="a5_f3.htm">Figure 3</a></span></td>
		<td><span class=navbarLink><a href="a5_f4.htm">Figure 4</a></span></td>
	</tr>
	<tr>
		<td><span class=navbarLink>Listing 1</span></td>
		<td><span class=navbarLink><a href="a5_l2.htm">Listing 2</a></span></td>
		<td><span class=navbarLink><a href="a5_l3.htm">Listing 3</a></span></td>
		<td><a href="../../../../source/SA/1992/sep92.tar"><b class=codeListing>sep92.tar</b></a></td>

	</tr>
</table>


</tr>
<tr>
<! -- Begin Content ------ >
<td valign=top width=440 bgcolor="#ffffff">
<table width=100% cellpadding=15 cellspacing=0 border=0>
<tr><td valign=top>
<H1>Listing 1: The load Script</H1><p>
<PRE>
1: #
2: # load: Display system load, with suggestions as to how appropriate a
3: #       time it is to run a CPU-intensive process.
4: #
5:
6: echo
7: echo &quot;     SYSTEM LOAD ANALYSIS&quot;
8: echo
9:
10: uptime | awk '{
11:     val = $(NF - 2)
12:
13:     if (substr(val, length(val), length(val)) == &quot;,&quot;)
14:         val = substr(val, 1, length(val)-1)
15:
16:     printf &quot;The current system load is %s\n\n&quot;, val
17:
18:     if (val &lt; 1) {
19:         print &quot;This is a very light system load.&quot;
20:         print &quot;It is a good time to run a report.&quot;
21:     }
22:     else if (val &lt; 1.5) {
23:         print &quot;This is a relatively light system load. It is OK to run&quot;
24:         print &quot;a report now.&quot;
25:     } else if (val &lt; 2) {
26:         print &quot;This is a moderate system load. Long reports will slow&quot;
27:         print &quot;the system down a bit, but go ahead if you must.&quot;
28:         print &quot;Better yet, for low-priority reports, wait until the&quot;
29:         print &quot;system load drops below 1.00.&quot;
30:     } else if (val &lt; 3) {
31:         print &quot;This is a medium-to-heavy load. Please do not run long reports&quot;
32:         print &quot;unless you really have to. They WILL slow the system down somewhat.&quot;
33:     } else if (val &lt; 4) {
34:         print &quot;This is a heavy load. Please do not run reports unless they are&quot;
35:         print &quot;very urgent.&quot;
36:     } else if (val &lt; 5) {
37:         print &quot;This is an EXTREMELY HEAVY system load. Please defer running any&quot;
38:         print &quot;reports at least until the load drops down under 3.00,&quot;
39:         print &quot;preferably under 2.00. Thank you.&quot;
40:     }
41:     else if (val &lt; 7) {
42:         print &quot;At this rate, the CPU may soon have a meltdown...&quot;
43:         print &quot;Please, PLEASE do NOT run any reports until the load&quot;
44:         print &quot;settles down below 3.00 !! THANK YOU!&quot;
45:     }
46:     else {
47:         print &quot;This is a ridiculously heavy load; there may be&quot;
48:         print &quot;something wrong with the system. Please contact a Tech&quot;
49:         print &quot;person immediately, and, of course, do not run any reports.&quot;
50:     }
51: }'</pre><p>
<p>



<P>
<br>&nbsp;<br>
</table></center></td>
<! -- End Content ------ >

</table><!/center>
<! -- End MASTER TABLE -- >

</body></html>
