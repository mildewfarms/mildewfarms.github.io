<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 4.0//EN">


<HTML>
<HEAD>
<TITLE>v09, i06: Questions and Answers</TITLE>
<LINK REL=StyleSheet HREF="../../resource/css/sacdrom.css" TYPE="text/css" TITLE="CSS1">
</HEAD>

<body bgcolor="#ffffff" text="#000000" link="#990000" alink="#669999" vlink="#333366" topmargin=0 leftmargin=0>

<! -- Begin MASTER TABLE -- >
<!center><table width=600 cellpadding=0 cellspacing=0 border=0 bgcolor="#ffffff">

<tr>

<table cellpadding=5 cellspacing=0 border=0>
	<tr>

		<td><span class=navbarLink>Article</a></span></td>
		<td><a href="../../../../source/SA/2000/jun2000.tar"><b class=codeListing>jun2000.tar</b></a></td>

	</tr>
</table>


</tr>
<tr>
<! -- Begin Content ------ >
<td valign=top width=440 bgcolor="#ffffff">
<table width=100% cellpadding=15 cellspacing=0 border=0>
<tr><td valign=top>
<! -- Insert Content ------ >

<H1>Questions and Answers</H1><p>
<P>Jim McKinstry
<P>
A couple of months ago, I received a question about deleting files with a &#147;<B>/</B>&#148; in the name. The answer I published was wrong. I received many emails from readers pointing this out to me. Here's an excerpt from an email I received from Brad Morrison with the correct answer:<P>
&#147;I don't think the <B>find</B> command will work, because it execs <B>/bin/sh</B> with <B>{}</B> for args. I think you have to use <B>clri</B> (clear inode) in a case like this, which means you have to <B>fsck</B> the partition later to zap the all-zeroes inode.&#148;<P>
Thanks Brad (and everyone else) for spotting my error and sending me a correct answer.<P>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0> I want to network my Red Hat 6.1 box with an NT neighbor. I want to be able to share resources. How and where do I start?<P>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0> Set up Samba. It comes with Red Hat and can be configured with the <B>linuxconf</B> tool.<P>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0> How can I know which port number is available on Linux and which one is in use by another application?<P>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0> Start by looking in <B>/etc/services</B>. This file defines all of the &#147;well-known&#148; ports that are used by standard network services (<B>telnet</B>, <B>ftp</B>, etc.). Also, good administrators keep this file updated with any other ports that they may be using. You can also use <B>netstat</B> to look at what ports are currently active. Finally, you can use one of many hacker tools to probe all of the ports to see what ports are in use.<P>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0> I need to conduct TPC-C benchmarking for Oracle. What are the details involved with setting up this hardware and software?<P>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0> Go to <B>http://www.tcp.org</B> and download the specification. It's about 130 pages long. The TPC-C tests are complex and expensive to set up and execute. I recommend looking at the Web site and finding a scenario that is close to what you are using; you can then extrapolate numbers from that. TPC-C setups can cost millions of dollars to configure and execute.<P>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0> When I do a <B>df -k</B> on Solaris 2.6, I get this partial result: <B>/dev/dsk/c0t2d0s0</B> <B>962134 870898 0 100% /idx</B>. Why is this output wrong? How can I fix it?<P>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0> I'm assuming that you are asking why <B>/dev/dsk/c0t2d0s0</B> has 962134 blocks and only 870898 are used, but <B>df</B> shows 0 blocks free and 100% utilization. This output is not wrong. There is approximately a 10% overhead in a file system. That means that a file system with 962134 blocks has only about 865921 blocks available (962134 - 96213 = 865921). That's why you are at 100% utilization. You may actually see some systems report utilization at over 100%. This is because some systems allow root to write to a file system's reserved space.<P>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0> We have a mixture of Sun OS, Solaris, Linux, OpenBSD, Win98, and Win NT systems and need to decide on a repository to be used by all. Should we upgrade Sun OS and Solaris to OpenBSD or Linux? For a repository, should we use CVS, SourceSafe, or something else?<P>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0> Let's start with the operating systems that you are running. SunOS and OpenBSD are both Berkeley-based operating systems. Linux and Solaris are both SVR4-based operating systems. Throw Microsoft in the mix and managing these can be a nightmare. I'd pick a common UNIX operating system to move forward with.  If you are currently running Solaris or SunOS on a SPARC box, upgrade the SunOS, Linux, and OpenBSD to Solaris (since Solaris is the only OS that runs on both SPARC and x86 architectures). You may also want to try Linux on your SPARC systems. I've never tried it but heard that it smokes. If it works well, then you can consider going completely to Linux. As for your repository, I know that MKS has a nice product (Source Integrity) that I've used in the past. It is RCS based. You can also download RCS for free by searching on the Web for it. I prefer RCS to CVS.<P>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0> Presently, <B>/usr</B> and <B>/var</B> reside on the root file system, which is 90% full. To make room, I would like to move these <B>/usr</B> and <B>/var</B> directories to another file system. These file system mount points should be <B>/usr</B> and <B>/var</B>. How can I do this without reinstalling the operating system?<P>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0>Here's a step-by-step process.<P>
1. Create two file systems of appropriate sizes (one for <B>usr</B> and one for <B>var</B>).<br>
2. Boot into single-user mode (you don't need to do this but it's safer).<br>
3. Mount the two file systems on temporary mount points (<B>/usr_temp</B> and <B>/var_temp</B>).<br>
4. Copy <B>/var</B> to <B>/var_temp</B> and <B>/usr</B> to <B>/usr_temp<BR>
cd /var</B><BR>
<B>find</B> <B>. -xdev -depth -print | cpio -puxdm /var_temp<BR>
cd /usr</B> <BR>
<B>find</B> <B>. -xdev -depth -print | cpio -puxdm /usr_temp</B><br>
5. Modify <B>/etc/vfstab</B> to mount <B>/usr</B> and <B>/var</B> on the new file systems.<br>
6. Boot from CDROM and mount <B>/</B>.<br>
7. Remove all of <B>/usr</B> and <B>/var</B>.<br>
8. Reboot; <B>/usr</B> and <B>/var</B> should now be on their own file systems and <B>/</B> should have a ton of room.<br>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0> How can I open large files in the <B>vi</B> editor? I am using SCO UnixWare 7.1.0.<P>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0> You are probably running out of space in the file system that holds the temp file that <B>vi</B> creates. <B>vi</B> a large file in one session (<B>telnet</B>, x-windows, etc.). In another session, do a <B>df -k</B> to see if there is a full file system (probably <B>/var</B>). If this is the case, increase the size of the file system in question or clean up the file system. I believe that <B>vi</B> uses <B>/var/tmp</B> to store its temporary file.<P>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0> What can I do if I see:<P>
<pre>Jan 30 19:30:00 smtp3 unix: NOTICE: /home: out of inodes
Jan 30 19:30:00 smtp3 unix:</pre>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0> It sounds like <B>/home</B> has a lot of smaller files in it, using up all of the inodes. You need to recreate the <B>/home</B> file system one of two ways:<P>
<P>
1. Create a larger file system that will give you more inodes.<br>
2. Create the same size file system with a smaller size inode (it's the <B>-i</B> flag in <B>newfs</B>). The default inode size is 4096. To double the amount of inodes, use <B>-i 2048</B>. Unless you have enough space, you will need to backup <B>/home</B>, create the new file system with more inodes, and restore the data.<br>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0> When I log into an account named &#147;Zhang&#148; with the correct password, it is not successful. It is successful, however, when I log in as root. As root, I enter <B>su</B> <B>Zhang</B> after prompt and return, and a &#147;No shell&#148; error appears. I have changed attributes of some files as superuser in order to raise system security, but I've forgotten what files. Until now, other functions have had no problems. Any suggestions?<P>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0> Check <B>/etc/passwd</B> and verify that the account in question (Zhang) has a default shell defined. Next, verify that the shell exists and that it has the correct permissions associated with it.<P>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0> What's the purpose of the scripts in <B>/etc/init.d</B>?<P>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0> <B>/etc/init.d</B> (or <B>/sbin/init.d</B> on HP-UX 10.x) holds all of the scripts that are called as the system goes through the different init levels. On HP-UX 10.x, if you do a <B>ls -l /sbin/rc2.d</B>, you will see that all of the scripts are links to files in <B>/sbin/init.d</B>. Let's say that you are running in init state 3 and you issue the shutdown command. The system will execute all of the files in <B>/sbin/rc3.d</B>, <B>/sbin/rc2.d</B>, <B>/sbin/rc1.d</B>, and <B>/sbin/rc0.d</B> that start with a &#147;K&#148;. Each &#147;K&#148; script is passed a parameter of &#147;stop&#148;. During a boot (to init state 3), the system executes all of the files in <B>/sbin/rc0.d</B>, <B>/sbin/rc1.d</B>, <B>/sbin/rc2.d</B>, and <B>/sbin/rc3.d</B> that start with an &#147;S&#148;. Each &#147;S&#148; script is passed a parameter of &#147;start&#148;. If you edit any of the <B>/sbin/init.d</B> scripts, you will see that they are all the same format. Basically, they are a big &#147;case&#148; statement that handle at least &#147;start&#148; and &#147;stop&#148;. All user scripts written to be used during startup/shutdown should be placed in the <B>init.d</B> directory and links should be set to them in the appropriate <B>rc</B> directory. They should also be written in the same format that the system supplied startup/shutdown scripts are written.<P>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0> I am interested in getting certified in UNIX administration. Where should I start?<P>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0> Start by picking the flavor of UNIX you want to be certified in (Solaris, HP-UX, Red Hat, Caldera, etc.) then visit the vendor Web site for that operating system. Most vendors offer certification. There is no industry recognized UNIX certification. Many UNIX administrators I know feel that lots of the certifications out there are a joke and don't really add any value. Frequently, employers care more about a candidate's experience than about a specific certification. In addition to investigating the various vendors' certification processes, I recommend checking out the qualifications and duties expected of systems administrators on the Usenix Web site.<P>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0> I have five years of computer experience working in the Windows environment. Now I'd like to get into the UNIX world. What is the best approach to take to obtain employable UNIX skills? Do you know of any UNIX training programs other than taking classes at a university?<P>
Can you suggest any books or other resources that could help me learn UNIX from the beginning level to advanced level?<P>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0> I get a lot of these &#147;How do I become a UNIX Administrator&#148; questions. Basically, I'm a big fan of the apprenticeship/on-the-job-training/&#148;Just Do It&#148; approach. If you work somewhere that uses UNIX, ask if you can take over some of the basic tasks (I don't think you will get much resistance from the current administrator). Start with account management (adding/deleting users). Use the system tools at first and then start doing it by hand. When you are very comfortable, write a script to do it. You will learn a lot.  Also ask the administrator to include you when debugging problems. Tag along and watch. You should also read the books that come with the operating system. HP supplies a book named something like <I>Tasks for the Systems Administrator</I>. Get a copy of the <I>Essential Systems Administration</I> book (O'Reilly and Associates). You should also look into taking classes from the vendor that you are using (Sun, HP, IBM, etc.). As I mentioned above, the Usenix Web site has a list of duties and skill expectations for various levels of systems administration. They, along with other organizations, also offer conferences that you should consider attending.<P>
<img src="../../resource/q.gif" alt=" Q " width=29 height=32 align=bottom hspace=0 vspace=0> What are the duties of a UNIX systems administrator?<P>
<img src="../../resource/a.gif" alt=" A " width=28 height=32 align=bottom hspace=0 vspace=0> The duties for a UNIX administrator (or any administrator for that matter) include all or some of the following:<P>
<P>
&#149; Account Management<br>
&#149;  add/delete users<br>
&#149;  defining/implementing standard login environments<br>
&#149;  password rules<br>
&#149; Backup/Recovery/DRP Strategy<br>
&#149;  tape rotation<br>
&#149;  backup schedule<br>
&#149;  recovery testing<br>
&#149;  backup verification<br>
&#149; Security<br>
&#149;  user level (password, group membership, etc.)<br>
&#149;  file/directory level<br>
&#149;  network (<B>/etc/services</B>, <B>tcp_wrappers</B>, etc.)<br>
&#149; Software Installation and Maintenance<br>
&#149;  operating system patches (determining need, installing, testing)<br>
&#149;  operating system upgrades<br>
&#149;  application install/patches/upgrades<br>
&#149; Hardware Maintenance<br>
&#149;  monitor system logs for errors<br>
&#149;  schedule downtime for fixes<br>
&#149;  maintain support contracts<br>
&#149; Capacity Planning/System Tuning<br>
&#149;  monitor and track CPY, network, memory, disk utilization and performance using system tools (<B>sar</B>, <B>iostat</B>, <B>netstat</B>, etc.) and third party applications<br>
&#149;  perform trend analysis to map out growth plan<br>
&#149;  work with DBAs, users, and management to determine future growth<br>
<P>

<h1>About the Author</h1><p>
Jim McKinstry is a Senior Sales Engineer for MTI Technology Corporation (www.mti.com). MTI is a leading international provider of data storage management products and services. He can be reached at: jrmckins@yahoo.com.




<! -- Begin Content ------ >
<br>&nbsp;<br>
</table></center></td>
<! -- End Content ------ >

</table><!/center>
<! -- End MASTER TABLE -- >

</body></html>
