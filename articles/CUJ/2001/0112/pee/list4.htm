<HTML><HEAD>
<TITLE>December 2001/Guidelines for Wrapping Sockets in Classes/Listing 4</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 4: Socket.h &#151; Definition of class Socket</A></h4>
<pre>
#include &lt;string&gt;

class Streamable;

class Socket
{
public:

  Socket ( int domain, int type, int protocol );
  ~Socket ();

  void Bind ( u_short port );
  Socket Accept ();
  void Listen ( int queue );
  void Connect ( const string&amp; host, u_short port );
  void Close ();

  Socket&amp; operator &lt;&lt; ( char );
  Socket&amp; operator &lt;&lt; ( int );
  Socket&amp; operator &lt;&lt; ( long );
  Socket&amp; operator &lt;&lt; ( float );
  Socket&amp; operator &lt;&lt; ( double );

  Socket&amp; operator &gt;&gt; ( char&amp; );
  Socket&amp; operator &gt;&gt; ( int&amp; );
  Socket&amp; operator &gt;&gt; ( long&amp; );
  Socket&amp; operator &gt;&gt; ( float&amp; );
  Socket&amp; operator &gt;&gt; ( double&amp; );

  Socket&amp; operator &lt;&lt; ( const Streamable&amp; );
  Socket&amp; operator &gt;&gt; ( Streamable&amp; );

private:
  void Read ( void*, int );
  void Write ( const void*, int );

  Socket ( int fd, const string&amp; clientip );

  bool Initialized;

  int Domain;
  int SocketDescriptor;
  string ClientIP;
};
&#151; End of Listing &#151;</pre></body></html>
