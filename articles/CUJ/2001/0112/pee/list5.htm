<HTML><HEAD>
<TITLE>December 2001/Guidelines for Wrapping Sockets in Classes/Listing 5</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 5: Example echo server using Socket</A></h4>
<pre>
#include &lt;sys/socket.h&gt;
#include "Socket.h"

int main ()
{
  char message;

  Socket s ( AF_INET, SOCK_STREAM, 0 );
  s.Bind ( 2112 );
  s.Listen ( 1 );

  for ( ;; )
  {
    Socket t = s.Accept ();

    for ( ;; )
    {
      t &gt;&gt; message;
      t &lt;&lt; message;
      
      if ( message == '\n' )
      {
        break;
      }
    }

    t.Close ();
  }

  return ( 1 );
}
&#151; End of Listing &#151;</pre></body></html>
