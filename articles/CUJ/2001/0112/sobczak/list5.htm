<HTML><HEAD>
<TITLE>December 2001/An Iostream-Compatible Socket Wrapper/Listing 5</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 5: Complete stream class</A></h4>
<pre>
template
&lt;
    class charT,
    class traits = std::char_traits&lt;charT&gt;
&gt;
class TCPGenericStream :
    private TCPStreamBuffer&lt;charT, traits&gt;,
    public std::basic_iostream&lt;charT, traits&gt;
{
public:
    explicit TCPGenericStream(TCPSocketWrapper &amp;sock,
                              bool takeowner = false)
        : TCPStreamBuffer&lt;charT, traits&gt;(sock, takeowner),
        std::basic_iostream&lt;charT, traits&gt;(this)
    {
    }

private:
    // copy not provided
    TCPGenericStream(const TCPGenericStream&amp;);
    TCPGenericStream&amp; operator=(const TCPGenericStream&amp;);
};
&#151; End of Listing &#151;</pre></body></html>
