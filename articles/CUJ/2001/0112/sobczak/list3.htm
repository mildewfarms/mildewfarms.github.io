<HTML><HEAD>
<TITLE>December 2001/An Iostream-Compatible Socket Wrapper/Listing 3</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 3: Simple client program that sends a message using the TCPSocketWrapper class</A></h4>
<pre>
#include "Sockets.h"
#include &lt;iostream&gt;
#include &lt;cstring&gt;

using namespace std;

int main()
{
    if (socketsInit() == false)
    {
    cout &lt;&lt; "cannot initialize sockets library"
        &lt;&lt; endl;
    return 0;
    }

    try
    {
        const char *message = "Hello, Socket!";
        int msglen = strlen(message) + 1;

        TCPSocketWrapper sock;

        // connect to the same machine
        // and the IP port of the server process
        sock.connect("127.0.0.1", 12345);

        sock.write(message, msglen);
    }
    catch (const SocketRunTimeException &amp;e)
    {
        cout &lt;&lt; "socket exception: "
            &lt;&lt; e.what() &lt;&lt; endl;
    }

    socketsEnd();

    return 0;
}
&#151; End of Listing &#151;</pre></body></html>
