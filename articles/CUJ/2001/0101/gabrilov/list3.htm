<HTML><HEAD>
<TITLE>January 2001/JNI-C++ Integration Made Easy/Listing 3</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 3:	Sample native code that uses the JNI encapsulation framework (excerpt from jni_example.cpp)</A></h4>
<pre>
JNIEXPORT void JNICALL 
Java_JniExample_native_1call 
   (JNIEnv *env, jclass clazz, jobject obj) {
  
   // Lookup the Java fields in 'obj'
   JNIField&lt;jint&gt; intField(env, obj, "intField");
   JNIStringUTFChars str(env, "JniExample", "stringField");
   JNIArray&lt;jint&gt; arr(env, obj, "intArray");

   // Set new values 
   intField = 0;
   arr[0] = 0; arr[1] = 0;
   JNIStaticField&lt;jstring&gt;(env, obj, "stringField") = 
      env-&gt;NewStringUTF("Good-bye, world!");

  // Destructors for 'arr' and 'str' are invoked automatically
}
&#151; End of Listing &#151;</pre></body></html>
