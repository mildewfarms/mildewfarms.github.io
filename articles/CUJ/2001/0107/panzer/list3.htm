<HTML><HEAD>
<TITLE>July 2001/A Toolbox of String Classes/Listing 3</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 3: test_time.cc &#151; Test program for testing string performance</A></h4>
<pre>
#include &#147;xstr.h&#148;
#include &lt;string&gt;

int NUM_ITERS=100000;
                               
int test01() {
    clock_t t0 = clock();
    for (int i=1;i&lt;NUM_ITERS;++i) {
        STRINGCLASS str1(&#147;Now this is a test...&#148;);
        STRINGCLASS str2(&#147;Now this is a test...&#148;);
        STRINGCLASS str3(&#147;Now this is a test...&#148;);
...etc...
        STRINGCLASS str10(&#147;Now this is a test...&#148;);
    }    
    clock_t t1 = clock();

    cout &lt;&lt; &#147;Construction time: &#147; &lt;&lt; t1 - t0 &lt;&lt; &#147;/&#148; &lt;&lt; 
            CLOCKS_PER_SEC &lt;&lt;&#148; secs for &#147; &lt;&lt; NUM_ITERS &lt;&lt; 
            &#147; iterations &#147; &lt;&lt; endl; 
}

#define Str(x) #x
#define Xstr(x) Str(x)

int main(int argc, char *argv[]) {
    if (argc&gt;=2) NUM_ITERS = atol(argv[1]);

    cout &lt;&lt; &#147;test_time; STRINGCLASS = &#147; &lt;&lt; Xstr(STRINGCLASS) &lt;&lt;
            &#147;, FLAGS = &#147; &lt;&lt; Xstr(FLAGS) &lt;&lt; endl;
    test01();
}
&#151; End of Listing &#151;</pre></body></html>
