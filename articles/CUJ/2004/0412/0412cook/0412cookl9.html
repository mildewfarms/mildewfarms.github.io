<html>
<head>
<title>December, 2004: Flash, Ming, &amp; C++</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; C/C++ Users Journal-->






<h4>Listing 9</h4>
<pre>
void draw_with_clips(SWFSprite *movieclip,float ox,float oy,float xr,float yr,
                                        double rot,const char *prefix){
double total=std::accumulate(data.begin(),data.end(),0.0, get_value);
if(total&lt;=0.0)return;
size_t cnt=1;
for(const_iterator i=data.begin();i!=data.end();++i,++cnt){
    double arc=(i-&gt;value/total)*M_PI*2;
    SWFSprite *clip=new SWFSprite();
    i-&gt;appearance.draw_pie_slice(clip,ox,oy,rot,rot+arc,xr,yr);
    rot+=arc;
    clip-&gt;nextFrame();
    SWFDisplayItem *item=movieclip-&gt;add(clip);
    char name[64];
    sprintf(name,"%s%d",prefix,cnt);
    item-&gt;setName(name);
    }
}
</pre>



</body>
</html>
