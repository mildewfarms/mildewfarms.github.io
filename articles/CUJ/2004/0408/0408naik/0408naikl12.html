<html>
<head>
<title>August, 2004: Loops, Metaloops, &amp; C++</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; C/C++ Users Journal-->






<h4>Listing 12</h4>
<pre>
// Nested loops with For&lt;&gt;

// templates for inner loop
template&lt;typename state&gt;
struct  incr_in  { ... };

template&lt;typename state&gt;
struct  cond_in { ... };

// templates for outer loop
template&lt;typename state&gt;
struct  incr_out { ... };

template&lt;typename state&gt;
struct  cond_out { ... };

// body of inner loop (i.e one iteration)
template &lt;typename state &gt;
struct body
{
    typedef state result;
    static void exec() { ... };
};
// simulate template typedef (a feature forthcoming in C++0x)
template &lt;typename T&gt;
struct inner_loop
{
    typedef T result;
    static void eval()     {
          For_&lt; cond_in, incr_in, body, T&gt;::exec();
    }
};
// nest  "inner_loop" into For&lt;&gt;
For_&lt; cond_out, incr_out, inner_loop, state&lt;...&gt; &gt;::eval() ;
</pre>



</body>
</html>
