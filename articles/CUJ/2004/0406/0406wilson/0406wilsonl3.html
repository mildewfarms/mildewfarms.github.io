<html>
<head>
<title>June, 2004: Fast, Nonintrusive String Concatenation</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; C/C++ Users Journal-->






<h4>Listing 3</h4>
<pre>
template&lt; . . . &gt;
size_t fast_string_concatenator&lt;S, C, T&gt;::length() const
{
  return m_lhs.length() + m_rhs.length();
}
template&lt; . . . &gt;
size_t fast_string_concatenator&lt;S, C, T&gt;::Data::length() const
{
  size_t len;
  assert( type == cstring || type == single || 
          type == concat || type == seed);
  switch(type)
  {
    case    seed:
      len = 0;
      break;
    case    single:
      len = 1;
      break;
    case    cstring:
      len = ref.cstring.len;
      break;
    case    concat:
      len = ref.concat-&gt;length();
      break;
  }
  return len;
}
</pre>



</body>
</html>
