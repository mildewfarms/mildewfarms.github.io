<html><head><title>March 04: </title></head><body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000"><!--Copyright &#169; C/C++ Users Journal--><h4>Listing 3:	<i>Modification of the typical existing implementation</i>.</h4><pre>initialize a pointer to the rollback listtry   for each element, e, in the range (first, last]      search the tree for a place to insert e      if e is not already in the tree         allocate a new node, n         try            call n's constructor         catch            deallocate n            rethrow the exception         add n to the tree         add n to the rollback listcatch   for each node, n, in the rollback list      remove n from the tree      call n's destructor      deallocate n   rethrow the exception</body></html>