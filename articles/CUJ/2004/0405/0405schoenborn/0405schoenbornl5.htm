<html><head><title>May 04: </title></head><body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000"><!--Copyright &#169; C/C++ Users Journal--><h4>Listing 5:	<i>Replacing the reference count with a pointer to another </i>Context.</h4><pre>class InValueContainer2 {    public:        FreeDefaultContext2(): _other(NULL) {}        bool soleOwner() const {return _other == NULL;}    public: // allow copy construction and assign        FreeDefaultContext2(FreeDefaultContext2&amp; rhs)            : _other(&amp;rhs) {            assert(rhs._other == NULL); // line 1            rhs._other = this;        }        void operator=(const FreeDefaultContext2&amp; rhs) {            assert(rhs._other == NULL); // line 1            if (_other) _other-&gt;_other = NULL;             _other = &amp;rhs;            rhs._other = this;        }    private:        InValueContainer2* _other;};</body></html>