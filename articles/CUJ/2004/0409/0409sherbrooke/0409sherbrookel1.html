<html>
<head>
<title>September, 2004: GenSerial: A Generic  C++ Serialization Library</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; C/C++ Users Journal-->






<h4>Listing 1</h4>
<pre>
// shapes.h
#include &lt;SerDef.h&gt;
#include &lt;vector&gt;
#include &lt;boost/shared_ptr.hpp&gt;

class Point
{
   DECLARE_SIMPLE_SERIALIZABLE (Point);
public:
   // ...
   Point() { m_pt[0] = m_pt[1] = 0.0; }
private:
   double m_pt[2];
};
class Shape : public SER_DECL AbstractSerializable
{
   DECLARE_ABSTRACT_SERIALIZABLE (Shape, AbstractSerializable);
   // ...
public:
   virtual void draw() = 0;
private:
   int m_shapeId;
};
class Circle : public Shape
{
   DECLARE_SERIALIZABLE (Circle, Shape);
public:
   Circle() : m_radius (1.0) {}
   virtual void draw() { /* ... */ }
   // ...
private:
   Point m_center;
   double m_radius;
};
class BunchOfShapes
{
   DECLARE_SIMPLE_SERIALIZABLE (BunchOfShapes);
   // ...
   std::vector&lt;boost::shared_ptr&lt;Shape&gt; &gt; m_shapes;
};
</pre>



</body>
</html>
