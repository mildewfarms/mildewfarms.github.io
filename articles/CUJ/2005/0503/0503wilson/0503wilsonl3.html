


<html>
<head>
<title>March, 2005: Open-RJ Memory Databases and C++.NET</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; C/C++ Users Journal-->






<h4>Listing 3</h4>
<pre>
// Use of .netSTL c_string_accessor for database initialisation
using ::dotnetstl::c_string_accessor;

/* static */ ::openrj::ORJDatabaseA const 
  *FileDatabase::create_database_(char const *path, unsigned   flags)
{
  ::openrj::ORJDatabaseA const  *database;
  ::openrj::ORJError            error;
  ::openrj::ORJRC               rc = ... 

  /// call ::openrj::ORJ_ReadDatabaseA(), and 
  /// ... throw new DatabaseException(rc, error); on failure
  /// ... or return databse
}
FileDatabase::FileDatabase(String *path, unsigned int flags)
  : Database(create_database_(c_string_accessor&lt;char&gt;(path), flags))
     , m_path(path)
{}
/* static */ ::openrj::ORJDatabaseA const 
  *MemoryDatabase::create_database_(char const *contents
                            , size_t     cbContents, unsigned   flags)
{
  ::openrj::ORJDatabaseA const  *database;
  ::openrj::ORJError            error;
  ::openrj::ORJRC               rc = ... 

  /// call ::openrj::ORJ_CreateDatabaseFromMemoryA(), and 
  /// ... throw new DatabaseException(rc, error); on failure
  /// ... or return databse
}

MemoryDatabase::MemoryDatabase(String *contents, unsigned int flags)
  : Database(create_database_(c_string_accessor&lt;char&gt;(contents)
                            , contents-&gt;get_Length(), flags))
{}
</pre>



</body>
</html>
