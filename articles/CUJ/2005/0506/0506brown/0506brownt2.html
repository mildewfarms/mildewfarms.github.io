


<html>
<head>
<title>June, 2005: Embracing  64-Bit Windows</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; C/C++ Users Journal-->






<h4>Table 2:	APIs that let 64-bit aware 32-bit applications undo virtualization.</h4>
<table cellpadding=3 cellspacing=3>
  <tr bgcolor="lightblue">
    <td>API</td>
    <td>Description</td>
  </tr>
  <tr>
    <td>GetSystemWow64Directory</td>
    <td>A 32- or 64-bit application may request the location of the 32-bit "system32" (SysWow64) directory.</td>
  </tr>
  <tr>
    <td>IsWow64Process</td>
    <td>A 32- or 64-bit process may ask if a process is running in the Wow64 "emulation" layer.</td>
  </tr>
  <tr>
    <td>Wow64DisableWow64FsRedirection</td>
    <td>For a 32-bit application running under Wow64 to indicate that it understands the 64-bit filesystem layout and wishes to discontinue the mappings. We found an issue with the Winsock API gethostbyname() with FS redirection disabled that has yet to be investigated. The caution here is that existing code may simply not run once you disable this.</td>
  </tr>
  <tr>
    <td>Wow64EnableWow64FsRedirection</td>
    <td>For a 32-bit application running under Wow64 to indicate that it understands the 64-bit filesystem layout and wishes to enable the emulation.</td>
  </tr>
  <tr>
    <td>Wow64RevertWow64FsRedirection</td>
    <td>For a 32-bit application running under Wow64 to indicate that it understands the 64-bit filesystem layout and wishes to revert the emulation to its default state.</td>
  </tr>
  <tr>
    <td>RegOpenKeyEx</td>
    <td>Not new, but takes two new flags: KEY_WOW64_32KEY for a 64-bit application to open a registry key as it would appear to a 32-bit application, and KEY_WOW64_64KEY, for a 32-bit application to open the registry as it would appear to a 64-bit application.</td>
  </tr>
  <tr>
    <td>RegDisableReflectionKey</td>
    <td>Disable reflection for a key and so allow a Wow64 process to see full 64-bit registry. This appears to affect HKLM/Software and HKCR.</td>
  </tr>
  <tr>
    <td>RegEnableReflectionKey</td>
    <td>Enable reflection and so disallow a Wow64 process from seeing the full 64-bit registry.</td>
  </tr>
  <tr>
    <td>ReqQueryReflectionKey</td>
    <td>Query the reflection state of an open registry key.</td>
  </tr>
</table>


</body>
</html>
