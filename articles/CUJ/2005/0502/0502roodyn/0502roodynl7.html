


<html>
<head>
<title>February, 2005: Mapping, Web Services,  &amp; C++</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; C/C++ Users Journal-->






<h4>Listing 7</h4>
<pre>
void BuildGetMapSoapRequest(TCHAR* szLat, TCHAR* szLong, TCHAR* pszSoap)
{
    _tcscpy(pszSoap, _T("&lt;?xml version=\"1.0\" encoding=\"") );
    _tcscat(pszSoap, _T("utf-8\" ?&gt;") );
    _tcscat(pszSoap, 
        _T("&lt;soap:Envelope 
                 xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" "));
    _tcscat(pszSoap, _T("
                 xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" "));
    _tcscat(pszSoap, _T("xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;") );
    _tcscat(pszSoap, _T("&lt;soap:Header&gt;") );
    _tcscat(pszSoap, _T("&lt;/soap:Header&gt;") );
    _tcscat(pszSoap, _T("&lt;soap:Body&gt;") );
    _tcscat(pszSoap, _T("&lt;GetMap 
                  xmlns=\"http://s.mappoint.net/mappoint-30/\"&gt;") );
        _tcscat(pszSoap, _T("&lt;specification&gt;") );
            _tcscat(pszSoap, _T("&lt;DataSourceName&gt;") );
            _tcscat(pszSoap, _T("MapPoint.AP") );
            _tcscat(pszSoap, _T("&lt;/DataSourceName&gt;") );
            _tcscat(pszSoap, _T("&lt;Views&gt;") );
                _tcscat(pszSoap, _T("&lt;MapView xsi:type=\"ViewByScale\"&gt;") );
                    _tcscat(pszSoap, _T("&lt;CenterPoint&gt;") );
                        _tcscat(pszSoap, _T("&lt;Latitude&gt;") );    
                        _tcscat(pszSoap, szLat );    
                        _tcscat(pszSoap, _T("&lt;/Latitude&gt;") );    
                        _tcscat(pszSoap, _T("&lt;Longitude&gt;") );    
                        _tcscat(pszSoap, szLong );    
                        _tcscat(pszSoap, _T("&lt;/Longitude&gt;") );    
                    _tcscat(pszSoap, _T("&lt;/CenterPoint&gt;") );
                _tcscat(pszSoap, _T("&lt;/MapView&gt;") );
            _tcscat(pszSoap, _T("&lt;/Views&gt;") );
        _tcscat(pszSoap, _T("&lt;/specification&gt;") );
    _tcscat(pszSoap, _T("&lt;/GetMap&gt;") );
    _tcscat(pszSoap, _T("&lt;/soap:Body&gt;") );
    _tcscat(pszSoap, _T("&lt;/soap:Envelope&gt;") );
}
</pre>



</body>
</html>
