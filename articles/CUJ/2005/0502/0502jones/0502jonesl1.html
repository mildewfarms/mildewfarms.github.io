


<html>
<head>
<title>February, 2005: Defensive Programming</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; C/C++ Users Journal-->






<h4>Listing 1</h4>
<pre>
#ifdef AUTO_REGRESS
int stack_regress( void )
{
   int a, test, ret;
   extern int push( int a );
   extern int pop( int *a );
   a = 1;
   do {
      /* Test 1 -- Empty stack test */
      ret = pop( &amp;test );
      if (test != ERROR) break;
      /* Test 2 -- One push/pop test */
      ret = push( a );
      if (test == ERROR) break;
      ret = pop( &amp;test );
      if ((test == ERROR) || (a != test)) break;
      /* ... more tests, break on failure */ 
      return( SUCCESS );
   } while (0);
   printf("Stack Failure\n");
   return( ERROR );
}
#endif
</pre>



</body>
</html>
