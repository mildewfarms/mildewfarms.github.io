


<html>
<head>
<title>September, 2005: C++/CLI: Cloning</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; C/C++ Users Journal-->






<h4>Listing 5</h4>
<pre>
generic &lt;typename T&gt;
public ref class Vector
{
     int length;
/*1*/     array&lt;T&gt;^ vector;

public:
     virtual Object^ Clone()
     {
          Vector&lt;T&gt;^ v = static_cast&lt;Vector&lt;T&gt;^&gt;(MemberwiseClone());
          v-&gt;vector = static_cast&lt;array&lt;T&gt;^&gt;(vector-&gt;Clone());
          return v;
     }

};

int main()
{
/*1*/     Vector&lt;int&gt;^ v1 = gcnew Vector&lt;int&gt;(5, 7);
/*2*/     Console::WriteLine("v1: {0}", v1);
/*3*/     Vector&lt;int&gt;^ v2 = static_cast&lt;Vector&lt;int&gt;^&gt;(v1-&gt;Clone());
/*4*/     Console::WriteLine("v2: {0}", v2);
/*5*/     v1[0] = 3;
/*6*/     v1[3] = 9;
/*7*/     v2[4] = 1;
/*8*/     Console::WriteLine("v1: {0}", v1);
/*9*/     Console::WriteLine("v2: {0}", v2);
}
</pre>



</body>
</html>
