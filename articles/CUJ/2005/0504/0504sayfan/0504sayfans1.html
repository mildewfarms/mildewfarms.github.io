


<html>
<head>
<title>April, 2005: Method Call Interception</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; C/C++ Users Journal-->






<h2>#defining {</h2>
When I first conjured the idea of MCI, I thought about making it look completely transparent. I wanted to <b>#define</b> the opening curly brace like this:

<pre>
<b>#define {  { Mci m(...);</b>

</pre>

<p>The code would have looked totally normal (sans <b>Mci</b>), but under the covers, MCI would have done its stuff. There are many problems with this approach, such as the fact that <i>every</i> opening curly brace gets an MCI object including regular scope braces (<b>if</b>, <b>while</b>, <b>for</b>, and so on), and braces in namespace, enum, struct, and class definitions:</p>

<pre>
<b>namespace { Mci m(...);</b>
<b>enum { Mci m(...); SUNDAY, MONDAY... }</b>

</pre>

<p>Yet, what really threw me off this track is the simple fact that you can't <b>#define</b> curly braces. If I think objectively about it, it looks like the only advantage for this approach is the "Wows" I would have gotten from my colleagues (which clearly makes it a worthwhile endeavor). </p>


</body>
</html>
