


<html>
<head>
<title>August, 2005: Extensible  Data Processing Without Inheritance</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; C/C++ Users Journal-->






<h4>Listing 2</h4>
<pre>
class ProcessorMgr
{
private:
  std::map&lt;std::string, void *&gt; my_processors;
public:
  void addProcessor(std::string input_category, void * processor) 
  { my_processors[input_category] = func; }

  void processInput(std::string input_category, InputObj i)
  { my_processors.find(input_category)-&gt;second-&gt;operator()(i); }
}; 
class FooProcessor 
{ public: void operator(InputObj I) const {  /* ... */ } };

class BarProcessor 
{ public: void operator(InputObj I) const {  /* ... */ } };

int main()
{
  ProcessorMgr mgr;
  mgr.addProcessor("foo", new FooProcessor());
  mgr.addProcessor("bar", new BarProcessor());
  InputObj x1, x2;
  mgr.processInput("foo", x1);
  mgr.processInput("bar", x2);

  return 0;
}
</pre>



</body>
</html>
