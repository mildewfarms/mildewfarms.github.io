


<html>
<head>
<title>October, 2005: The Perl-Compatible Regular Expressions Library</title>
</head>

<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000">
<!--Copyright &#169; C/C++ Users Journal-->






<h2>Version Compatibility</h2>
Some operating systems ship with PCRE Version 3 or 4. As of this writing, Version 5 is available for those who wish to compile a private copy. Given the slight differences between them&#151;most notably, the work area size&#151;your code is more robust if it detects the version at buildtime or runtime and behaves accordingly. PCRE includes tools to help you do this. From the command line, call: <b>$ pcre-config --version</b> to retrieve the system's installed (runtime) version. From code, test against the preprocessor constants <b>PCRE_MAJOR</b> (library major version), <b>PCRE_MINOR</b> (minor version), and <b>PCRE_DATE</b> (source-code date). The sample code uses these constants to size a regexp's work area:

<pre>
const int WORK_AREA_SIZE = (
  3 == PCRE_MAJOR
    ?
  ( 3 * ( totalMatches ) )
    :
  ( 3 * ( 1 + totalMatches ) )
) ;
int workArea[ WORK_AREA_SIZE ] ;

</pre>

<p>You can also call <b>pcre_version()</b> at runtime to print the full API revision and source-code date. </p>


</body>
</html>
