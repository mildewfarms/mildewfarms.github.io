<HTML>
<HEAD>
<TITLE>Threading from Managed C++</TITLE>
</HEAD><BODY>
<h4>Listing 5: Only one class function&#146;s lock block can execute at a time 
</h4>
<Pre>
#using &lt;mscorlib.dll&gt;
using namespace System;
using namespace System::Threading;

__gc class Th05
{
public:
   static void M1()
   {
      // ...
      Monitor::Enter(__typeof(Th05));
      try
      {
         // read from a file
      }
      __finally
      {
         Monitor::Exit(__typeof(Th05));
      }
      // ...
   }

   public static void M2()
   {
      // ...
   static void M2()
   {
      // ...
      Monitor::Enter(__typeof(Th05));
      try
      {
         // update a display
      }
      __finally
      {
         Monitor::Exit(__typeof(Th05));
      }
      // ...
   }
};<B>
</b>&#151; End of Listing &#151;</pre>
</BODY>
</HTML>
