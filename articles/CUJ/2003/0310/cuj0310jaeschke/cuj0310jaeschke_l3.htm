<HTML>
<HEAD>
<TITLE>Threading from Managed C++</TITLE>
</HEAD><BODY>
<h4>Listing 3: A lock block </h4>
<Pre>
#using &lt;mscorlib.dll&gt;
using namespace System;
using namespace System::Threading;

class ArrayManip
{
public:
   static int TotalValues(int array __gc[])
   {
/*1*/      int sum = 0;

/*2*/      Monitor::Enter(array);
      for (int i = 0; i &lt; array.Length; ++i)
      {
         sum += array[i];
      }
      Monitor::Exit(array);

      return sum;
   }

   static void SetAllValues(int values __gc[], int newValue)
   {
/*3*/      Monitor::Enter(values);
      for (int i = 0; i &lt; values.Length; ++i)
      {
         values[i] = newValue;
      }
      Monitor::Exit(values);
   }<B>
</b>&#151; End of Listing &#151;</pre>
</BODY>
</HTML>
