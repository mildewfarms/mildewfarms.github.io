<HTML><HEAD><TITLE>Listing 1:	Extending the LockHolder class and delegating to the policy class</TITLE></HEAD><body bgcolor="#FFFFFF" text="000000"><B> Listing 1:</B>	Extending the LockHolder class and delegating to the policy class<p><pre>// For brevity, a simplified version is shown here. The complete// version is available online at &lt;www.cuj.com/code&gt;. template &lt;class LockType, class LockingPolicy = ClassicScope&gt;class Guard : private LockHolder&lt;LockType&gt; {  friend class LockHolder&lt;LockType&gt;;public:  Guard(LockType&amp; lock) : LockHolder&lt;LockType&gt;(lock) {    LockingPolicy::createScope(*this);  };  Guard(Guard&amp; g) : LockHolder&lt;LockType&gt;(g) {    LockingPolicy::shareScope(*this, g);  }  Guard(Guard&amp; g, LockType&amp; lock) : LockHolder&lt;LockType&gt;(lock) {    LockingPolicy::transferScope(*this, g);  }  ~Guard() throw() {      if(!isDisabled())        LockingPolicy::destroyScope(*this);  }};</pre></BODY></HTML>