<HTML><HEAD><TITLE>Listing 5:	Two implementations of LockPolicy</TITLE></HEAD><body bgcolor="#FFFFFF" text="000000"><B>Listing 5:</b>	Two implementations of LockPolicy<p><pre>template &lt;class Target&gt;class NoLocking{public:    struct Lock    {        Lock() {}        Lock(const Target&amp;) {}    };    typedef Target    VolatileType;};template &lt;class Target&gt;class MutexLocking{public:    class Lock;    friend class Lock;    class Lock    {    public:        Lock() : lock_(mtx_)    {}        Lock(Target&amp;) : lock_(mtx_)    {}    private:        boost::mutex::scoped_lock    lock_;    };    typedef volatile Target VolatileType;private:    static boost::mutex    mtx_;};</pre></BODY></HTML>