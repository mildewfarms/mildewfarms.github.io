<html>
<head>
<title>FOR_EACH and LOCK</title>
</head>

<body>


<h4>Listing 1:	<i>The</i> gclock <i>class.</i></h4>

<pre>
class gclock
{
    gcroot&lt;System::Object*&gt; m_object;
public:
    gclock( System::Object * object ) : m_object( object )
    {
        System::Threading::Monitor::Enter( object );
    }
    ~gclock()
    {
        System::Threading::Monitor::Exit( m_object );
    }
    operator bool() const
    {
        return true;
    }
};
</pre>
</body>
</html>
