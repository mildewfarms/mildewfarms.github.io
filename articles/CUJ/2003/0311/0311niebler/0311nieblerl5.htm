<html>
<head>
<title>FOR_EACH and LOCK</title>
</head>

<body>


<h4>Listing 5:	<i>Final</i> FOR_EACH.</h4>

<pre>
#define ENUM_T(coll) \
    enumerator&lt;sizeof(select(coll))&gt;
#define FOR_EACH( type, var, coll ) \
    if( ENUM_T(coll)::enum_type _num_ = 0 ) {} \
    else if( ENUM_T(coll)::init_enum(_num_, coll) ) {} \
    else for( type var; ENUM_T(coll)::move_next(var,_num_,coll); )
</pre>
</body>
</html>
