<HTML><HEAD><TITLE> Listing 3:	Test harness for the Keyboard FSM</TITLE></HEAD><body bgcolor="#FFFFFF" text="#000000"><B> Listing 3:</B>	Test harness for the Keyboard FSM<p><pre> 1: int main() { 2:    Keyboard k; 3:    KeyboardCtor(&amp;k); 4:    FsmInit((Fsm *)&amp;k, 0); 5:    for (;;) { 6:       KeyboardEvt ke; 7:       printf("\nSignal&lt;-"); 8:       ke.code = getc(stdin);  9:       getc(stdin);                      /* discard '\n' */10:       switch (ke.code) {11:       case '^': ke.super_.sig = SHIFT_DEPRESSED_SIG; break;12:       case '6': ke.super_.sig = SHIFT_RELEASED_SIG; break;13:       case '.': return 0;          /* terminate the test */14:       default: ke.super_.sig = ANY_KEY_SIG; break;15:       }16:       FsmDispatch((Fsm *)&amp;k, (Event *)&amp;ke);  /* dispatch */17:    }18:    return 0;19: }</pre></BODY></HTML>