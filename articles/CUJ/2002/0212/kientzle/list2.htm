<HTML><HEAD>
<TITLE>December 2002/Fast UDP-Based Network Storage/Listing 2</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 2: Using recvfrom/sendto in the server</A></h4>
<pre>
/* 's' is a socket identifier from Listing 1 */
char buffer[2048];
struct sockaddr_in client_addr;
socklen_t addr_len;
int len = recvfrom(s,buffer,sizeof(buffer),0,
                   (struct sockaddr *)(&amp;client_addr),
                   &amp;addr_len);
if(len &lt; 0) { /* Error receiving */ }

/* Parse request, Generate response here */

/* Send packet back to client */
int result =  sendto(s,response,response_length,0,
                     (struct sockaddr *)(&amp;client_addr),
                     sizeof(client_addr));
if(result &lt; response_length) { /* Error sending */ }
&#151; End of Listing &#151;</pre></body></html>
