<HTML><HEAD>
<TITLE>July 2002/The Application Watchman Class/Listing 3</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Listing 3: Confidence Check scenario code</A></h4>
<pre>
int main(int argc, char* argv[])
{
  bool bError = false;
  AppWatchMan  myAppWatchMan;
  bError = myAppWatchMan.DoRounds("Before Test, ",
                                   AWM::BEGIN_CONF_CHECK);
  IntroduceLeak();
 
  bError = myAppWatchMan.DoRounds("After Test, ",
                                   AWM::END_CONF_CHECK);
  return bError;
}

void IntroduceLeak(void)
{
  char* pBuffer = new char [sizeof("Hello World")];
  strcpy(pBuffer, "Hello World");
//  delete [] pBuffer;  // intentional
}
&#151; End of Listing &#151;</pre></body></html>
