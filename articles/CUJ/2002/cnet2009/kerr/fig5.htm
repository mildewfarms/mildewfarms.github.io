<HTML><HEAD>
<TITLE>September 2002 C++ .NET Solutions/Icon Browser: An Exercise in Resource Management/Figure 5</TITLE></HEAD>

<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<h4><A NAME="heading1">Figure 5: Using template class</A></h4>
<pre>
#include &lt;gcroot.h&gt;

template &lt;typename T&gt;
struct Using : gcroot&lt;T&gt;
{
    Using(T t) :
        gcroot&lt;T&gt;(t)
    {
        // Do nothing
    }

    ~Using()
    {
        T t = operator-&gt;();

        if (0 != t)
        {
            static_cast&lt;System::IDisposable*&gt;(t)-&gt;Dispose();
        }
    }
};
&#151; End of Figure &#151;</pre></body></html>
