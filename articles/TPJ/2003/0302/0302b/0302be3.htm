<html><head><title>Feb03: Parsing MIME & HTML</title></head><body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#330066" ALINK="#ff0000" TEXT="#000000"><!--Copyright &#169; The Perl Journal--><pre>103 sub decode_entities104 {105     my $ent = shift;106 107     if (my @parts = $ent-&gt;parts)108     {109         decode_entities($_) for @parts;110     }111     elsif (my $body = $ent-&gt;bodyhandle)112     {113         my $type = $ent-&gt;head-&gt;mime_type;114 115         setup_decoder($ent-&gt;head);116 117         if ($type eq 'text/plain')118         { print d($body-&gt;as_string); }119         elsif ($type eq 'text/html')120         { $parser-&gt;parse($body-&gt;as_string); }121         else122         { print "[Unhandled part of type $type]"; }123     }124 }</pre><h4>Example 3: The decode_entities function.</h4><a href="0302b.htm#re3">Back to Article</a></body></html>