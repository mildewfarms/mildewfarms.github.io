<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <title>Perl, Politics, and Pairwise Voting: Perl as the Activist's Friend - The Perl Journal, Autumn 1996</title>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 12 April 2005), see www.w3.org">
  <meta name="vscategory" content="Perl">
  <meta name="vsisbn" content="">
  <meta name="vstitle" content=
  "Perl, Politics, and Pairwise Voting: Perl as the Activist's Friend">
  <meta name="vsauthor" content="Rob Lanphier">
  <meta name="searchdescription" content=
  "The U.S. Presidential election once again draws near, and once again we see a contest between two men, each representing one of the two major U.S. political parties. So it goes with the two-party system.">
  <meta name="vsimprint" content="The Perl Journal">
  <meta name="vspublisher" content="Earthweb">
  <meta name="vspubdate" content="Fall 1996">
  <!-- always update the article title and issue -->

  <!-- end head -->
</head>

<body>
  <font face="verdana" size="1">Issue 3, Fall 1996</font>

  <h2 align="center">Perl, Politics, and Pairwise Voting: Perl as
  the Activist's Friend</h2>

  <h4><i>Rob Lanphier</i></h4>

  <p>The U.S. Presidential election once again draws near, and once
  again we see a contest between two men, each representing one of
  the two major U.S. political parties. So it goes with the
  two-party system.</p>

  <p>What is it that makes the two-party system a two-party system?
  It's a direct consequence of plurality voting, the predominant
  form of balloting used in the United States where the highest
  vote getter wins an election. This relationship between the
  two-party duopoly and plurality voting is known as "Duverger's
  Law," after the 20th century political scientist who had the guts
  to call it a "law" (Riker, 1982).</p>

  <p>Duverger's Law has some disturbing consequences which leaves
  many voters dissatisfied with the status quo. Politicians will
  always claim to "feel our pain," but at least in the U.S.,
  two-party skeptics abound. Recent polls have shown that nearly
  60% of Americans would support the formation of a new major party
  (Barrett, 1996).</p>

  <p>The main reason Duverger's Law rings so true is that we have a
  binary ballot that groups people into two categories: a winner
  and one or more losers. The resulting dilemmas that voters are
  faced with in siding with a winner manifest themselves several
  ways:</p>

  <ul>
    <li>Because you can't please all of the people all of the time,
    it is in politicians' best interest to build divisions, and
    then build consensus among slightly over 50% of the electorate,
    allowing them to alienate the other 49%.</li>

    <li>Divisive issues encourage voters to ally with just enough
    people to give themselves a majority. This gives politicians a
    "path of least resistance" toward which they target their
    campaigns.</li>

    <li>Ultimately, since voters are powerless to state more than
    one preference, they are forced to take sides even when they
    stand in the middle.</li>
  </ul>

  <p>The bottom line is that the ballot doesn't let people state
  what they really feel. They can only make a crude approximation
  of their preference, and then hope that, somehow, the politicians
  will "get it."</p>

  <p>Voters are often forced into a choice between the lesser of
  two evils. They might not like either candidate, but rather than
  make a principled stand by voting for none of the above, or a
  lesser known candidate with no chance of winning, they vote for
  the major candidate who displeases them least.</p>

  <p>Have the strategy problems above ever demonstrably taken the
  electorate where it didn't want to go? Yes. While Abraham Lincoln
  is widely considered to be the best U.S. president in history, he
  owes his victory largely to the strategic error of his foes. He
  won the gnarled four-way 1860 election with the smallest
  plurality of any president - 39% of the vote - and the result of
  that election led to U.S. Civil War. (Of course, if slaves had
  had the right to vote, the numbers would have been substantially
  different.)</p>

  <p>In our century, the most famous three-way strategy dilemma was
  when Theodore Roosevelt, angry about losing the Republican
  nomination, split the Republican Party vote for their 1912
  Nominee (and incumbent president) Howard Taft by creating the
  Bull Moose Party. This allowed Woodrow Wilson to win handily with
  a mere 42% of the vote (as opposed to Roosevelt's 27% and Taft's
  23%). This inspired many states to create "sore loser" laws that
  keep candidates who fail to win major party nominations from
  forming third parties, and by making third-party ballot access
  much more difficult.</p>

  <p>Even recently, presidential politics were affected by the
  three-way split. In 1966, Thomas Finan and Carlton Sickles, two
  relatively liberal candidates from the left-of-center state of
  Maryland, split the liberal vote within the state Democratic
  party gubernatorial nominations. As a result, conservative George
  P. Mahoney won the Democratic nomination, only to be beaten by
  Spiro Agnew, who went on to become Richard Nixon's Vice
  President. When Agnew resigned in 1973, it opened the door for
  Gerald Ford to be appointed Vice President, and then later
  President. A tenuous connection to the presidency, but a very
  real one nonetheless (Anderson, 1994).</p>

  <p>And then there are the candidacies that might have been, if
  only our system hadn't discouraged third parties so much.
  Rosenstone, Behr, and Lazarus (1984) state that few qualified
  candidates would run under a third-party label because of the
  disadvantages they face. They note the bias that third-party
  candidacies face in the media by quoting James M. Perry of The
  Wall Street Journal (Rosenstone et al., 1984):</p>

  <p><i>We base [our decision] on the simple proposition that
  readers don't want to waste their time on someone who won't have
  a role in the campaign. We're not going to run a page-one spread
  on a fringe candidate. We don't have a multiparty system. Until
  we do, nobody's going to cover these candidates.</i></p>

  <p>With such biases built into the system, it is little wonder
  that third-party candidates can't gain the critical mass of
  support necessary to become credible contenders. A pragmatic,
  intelligent potential candidate might look at the seemingly
  insurmountable odds and simply not run. Thus, the dearth of
  credible third-party candidates becomes a self-fulfilling
  prophecy, and the two-party duopoly maintains control of the
  system.</p>

  <h3>The Preference Ballot</h3>

  <p>The solution is simple: convince voters to vote for candidates
  regardless of their perceived odds of winning. To do this, we
  must expand the power of the ballot. This are many ways to do
  this; the method that I will discuss here is the ranked ballot,
  or "preference ballot," as shown below:</p>
  <pre>
 
2               Fred Flintstone
                Wilma Flintstone
3               Barney Rubble
1               Betty Rubble
</pre>

  <p>The great thing about preference votes is that they're much
  more expressive than a vote-for-one ballot, allowing them to
  bargain for a compromise should their top choice be unpopular.
  This allows people greater flexibility in casting protest votes,
  while not throwing the election to the most evil candidate (not
  that Wilma Flintstone is evil - this is just an example).</p>

  <p>Ranked ballots are great at limiting voting "strategies" that
  encourage people to choose candidates based on poll results. But
  they can't eliminate strategies completely, no matter how the
  ballots are tallied. Political scientists have debated the
  relative merits of ranked ballots for years, and many of the
  discussions have involved Arrow's Impossibility Theorem.</p>

  <h3>Impossibility Theorems</h3>

  <p>Political scientists have been debating for some time now
  about whether or not it's even possible to come up with a way to
  tally preference votes. Most of the debate started with Arrow's
  Impossibility Theorem, which claims that any system where people
  are allowed to freely and exactly list their preferences must
  have some major defect. Arrow proves this by showing a series of
  conditions for fairness, not all of which can be satisfied
  simultaneously.</p>

  <p>Arrow's criteria are a bit too complicated to summarize here,
  but other mathematicians have tweaked and fiddled with the
  conditions, and have come up their own sets of conditions.
  Fishburn and Brams (1983) came up with a particularly concise
  set, listed below:</p>

  <p><b>No-Show Paradox:</b> A voter helps his favored candidate
  most by not voting.</p>

  <p><b>Thwarted-Majorities Paradox:</b> A candidate who defeats
  all other candidates in direct-comparison majority votes still
  loses the election. Also known as the Condorcet criterion, named
  after the 18th century election theorist who popularized it.</p>

  <p><b>Multiple-Districts Paradox:</b> A candidate wins in every
  district, but loses the general election.</p>

  <p><b>More-is-less Paradox:</b> If the winner had been ranked
  higher by some voters, another candidate would have won.</p>

  <p>Fishburn and Brams maintain in their 1983 paper that at least
  one of these four paradoxes will be possible in any election
  method with a ranked ballot. One may make the case that since all
  voting systems are vulnerable to at least one of these paradoxes,
  that a perfect system doesn't exist. Pragmatists counter that
  it's not necessary to eliminate all of them (Anderson, 1994).</p>

  <p>In preference voting, as in anything else, you can't please
  all of the people all of the time. This means we are stuck with
  the task of merely minimizing the sticking points rather than
  pursuing the holy grail of a perfect system. There are many
  (myself included) who believe that we can relegate the flaws to
  rare circumstances.</p>

  <h3>The Borda Method</h3>

  <p>This is probably the best known method within the United
  States for tallying ranked ballots. It is used by the Associated
  Press and the United Press International to determine the
  champions in NCAA college sports. Sports writers or coaches are
  asked to rank the 25 best teams, and then the top team on each
  ballot gets 25 points, the second team gets 24, and so on. The
  top vote getters are ranked by points received.</p>

  <p>This relatively simple method is easy to understand, hence its
  appeal. However, it discourages people from ranking anything but
  their top preference, thus making it difficult to derive
  compromise candidates from their vote. Consider a three way
  election between Joe Left, Sally Middle, and Martha Right. I'll
  use this example to describe an election where a reasonable
  compromise (Sally Middle) exists between two somewhat popular
  extremes. Given that the seat in question must go to one person
  and only one, it seems reasonable that the middle candidate be
  chosen. Suppose the sincere wishes of these voters are as shown
  below:</p>

  <p align="center"><a href="images/rl-figa.gif"><img src=
  "images/rl-figa_small.gif" align="center" alt=
  "Figure 1: Three way Election" border="0" width="250" height=
  "179"></a></p>

  <p align="center"><font size="-1"><b>Figure 1:</b> Three way
  Election</font></p>

  <p>If Borda's method is used, where the first place candidate on
  the ballot receives two points per ballot, and the second place
  candidate receives one point per ballot, here's what happens:</p>

  <p align="center"><a href="images/rl-figb.gif"><img src=
  "images/rl-figb_small.gif" align="center" alt=
  "Figure 2: Total points per Candidate" border="0" width="250"
  height="272"></a></p>

  <p align="center"><font size="-1"><b>Figure 2:</b> Total points
  per Candidate</font></p>

  <p>The good news here is that Borda's method does indeed choose
  the compromise <i>when everyone votes sincerely</i>. But it's not
  strategy-free: if Martha Right supporters pay attention to the
  polls, they can (and should) drop Sally Middle off their ballots.
  If all Martha Right supporters do this, they trigger a 40 point
  drop in Sally Middle's Borda score, causing Ms. Right to win.</p>

  <p>Even if Martha Right supporters don't do this, it's likely
  that many supporters of Joe Left will do the same thing if they
  think that Joe has a shot at winning. Thus Borda picks a
  compromise when voters na&iuml;vely list all of their
  preferences, but fails when they learn how to beat the
  system.</p>

  <p>Borda's method fails to meet the Condorcet criterion, which is
  arguably the most important for determining the victor in a
  single-winner election.</p>

  <h4>The Hare Method</h4>

  <p>Dating from 1860, the Hare method is perhaps the best known
  method for tabulating preference ballots outside the United
  States. It's used in Australia and Ireland for single-office
  elections. Preference ballots are tabulated counting only the
  first-place candidate on each ballot. The candidate with the
  fewest number of first place votes is eliminated, and every
  ballot listing that candidate as its first choice has the vote
  transferred to its second choice.</p>

  <p>The Hare method is a popular way of eliminating primaries and
  allowing people to vote for potentially unpopular alternatives to
  the two major candidates without fear of wasting one's vote. It
  does a pretty good job of eliminating strategy and in many ways
  is a substantial improvement over the American vote-for-only-one
  system.</p>

  <p>Using Hare to tally the results from our election, we tally
  the first choices to find that Martha Right receives 40% of the
  vote, Joe Left receives 35%, and Sally Middle is eliminated with
  only 25% of the vote. The votes for Sally Middle are
  redistributed based on the second choice of those voters. Joe
  Left then wins with 51% of the vote.</p>

  <p>Thus, Hare falls short when considering popular compromises,
  such as Sally Middle; like Borda's method, it also fails the
  Condorcet criterion.</p>

  <p><b>Pairwise Election Methods</b></p>

  <p>Under a class of election methods known as pairwise methods,
  the election above would result in a different winner. The
  relative election results of every possible combination of two
  candidates is tallied and the winner of key pairwise matchups is
  declared winner of the overall election.</p>

  <p>In the above example, the results of the pairwise matchups
  would be as follows:</p>
  <pre>
Joe Left     (51%) vs Martha Right (49%) 
Sally Middle (60%) vs Martha Right (40%) 
Sally Middle (65%) vs Joe Left     (35%)  
</pre>

  <p>Sally Middle beats both Joe Left and Martha Right, and
  therefore wins the election overall.</p>

  <p>What distinguishes the different pairwise election methods
  from one another is how they deal with circulaf preferences. A
  circular preference occurs when one candidate defeats another who
  in turn defeats our original winner: A beats B beats C beats A.
  This isn't necessarily a flaw in pairwise systems - one could say
  it's merely a sign that the electorate is ambivalent. Some
  theorists, such as Charles Dodgson (a.k.a. Lewis Carroll, author
  of <i>Alice in Wonderland</i>), claim that if a single winner
  can't be found, then the election should be called off (Levin and
  Nalebuff, 1995).</p>

  <p>Nonetheless, many pairwise methods have been designed to
  arbitrate this situation. Three in particular, Condorcet's
  Method, Smith's Method, and Copeland's Method, deserve
  mention.</p>

  <h4>Condorcet's Method</h4>

  <p>Condorcet's method is probably the most well known. Each
  voter's list is used to simulate how that voter would have voted
  in pairwise matchups between each of the candidates on the
  ballot. Separate tallies of every possible two-way election are
  calculated, and the winner is the candidate who wins all two-way
  matchups. Circular preferences are resolved in Condorcet's method
  by choosing the candidate whose largest pairwise defeat is the
  smallest, as measured by how many voters explicitly voted for
  someone else over the candidate.</p>

  <p>The reason why many election reformers prefer this method is
  that, under most plausible circumstances, it solves the "lesser
  of two evils" problem described above, which many consider to be
  the litmus test for determining a good pairwise method. However,
  as Anderson notes, it can produce unexpected results in certain
  rare circumstances.</p>

  <h4>Smith's Method</h4>

  <p>Smith's Method isn't so much a pairwise tie breaker as a
  method of determining which candidates should <i>qualify</i> for
  a tie-breaker. The "Smith Set" is the smallest non-zero set of
  candidates who beat all the candidates outside the set in all
  pairwise matchups. Not all pairwise methods will pick a member of
  the Smith Set (most notably, Condorcet's method) yet intuitively,
  one would hope that would be the case. Smith's method, therefore,
  makes a good precondition to a tie-breaker such as
  Condorcet's.</p>

  <h4>Copeland's Method</h4>

  <p>Copeland's Method computes the winner of the election by
  counting the number of pairwise wins, losses, and ties for each
  candidate. The candidate with the best record wins the election,
  much in the same way that a sports team with the best record gets
  the top seed in that sport's playoffs.</p>

  <p>One problem with Copeland's Method is that, like Smith's
  method, it is prone to ties, and so is often paired with another
  tie breaker. It's also vulnerable when there are three parties
  locked in a three-way tie. In all likelihood, winning candidates
  will belong to the party that has the most candidates on the
  ballot, because they'll win the most pairwise contests, even
  though many of those victories might come from intraparty
  matchups. This would encourage parties with sufficient funds to
  support multiple, similar candidates in order to skew the
  election in their favor.</p>

  <p>There are several other methods that exist for choosing a
  winner in a preference balloted election, many of which provide a
  defensible set of criteria. For those of us trying to educate
  people on alternative election methods, our goal has been to
  choose the most important criteria and find the election method
  which best meets those criteria.</p>

  <p>So what's all this got to do with Perl?</p>

  <p>For many of us who aren't mathematicians by trade, it becomes
  difficult to debate the relative merits of the different methods
  without a way of visualizing some examples. The solution was to
  write a program which illustrates the data in a comprehensible
  way.</p>

  <p>Now it's time to do a little preaching to the choir. I chose
  to write this program in Perl for several reasons, many of which
  are all too familiar to Perl aficionados. However, they bear
  repeating in the context of programs for elections:</p>

  <ul>
    <li>Perl is freely available, with source code. This is a
    particularly crucial feature for something designed to serve
    the public. Though there are relatively few voters with the
    knowledge or initiative to verify the source code, there is a
    certain peace of mind derived from knowing that anyone can dig
    into the underbelly of the vote-counting machine at any
    time.</li>

    <li>Perl is widely available. Since Perl is available on so
    many platforms, very few people with a computer are prevented
    from using it. This means election results can be verified on a
    wide range of computers. Having the source available also
    ensures that it will be possible to port to new platforms as
    they become available.</li>

    <li>Limitless arrays. Since array sizes don't need to be
    predetermined, I was able to design the system to handle as
    many candidates as necessary.</li>

    <li>CGI. CGI programming has become the standard in
    cross-platform GUI development, and Perl is the standard for
    writing CGI programs. HTML tables proved ideal for displaying
    voting results.</li>

    <li>Speed of development. My initial prototype wasn't that
    tough to write, and had little source code. The current version
    is much larger, but still quite manageable.</li>
  </ul>I relied heavily on Perl 5 for my program. This is because
  Perl 5, unlike Perl 4, supports true two-dimensional arrays,
  helpful for storing pairwise election results.

  <h3>The Algorithms</h3>

  <p>Before I talk about Perl specifically, I'll explain the
  algorithm involved in <tt>condorcet.pl</tt>.</p>

  <p>Consider a sample field of six candidates:</p>
  <pre>
A - John Anderson 
B - Jerry Brown 
C - Bill Clinton 
D - Bob Dole 
E - Dwight Eisenhower 
F - Steve Forbes  
</pre>

  <p><tt>condorcet.pl</tt> first creates a 6x6 matrix. The matrix
  entry at location <tt>[x, y]</tt> contains the number of votes
  <tt>x</tt> received over <tt>y</tt>. So [A, B] is the number of
  votes John Anderson received over Jerry Brown, and [B, A] is the
  number of votes Jerry Brown received over John Anderson.</p>

  <p>Each ballot is tallied by determining the pairwise results:
  who beats whom. So if someone ranks their ballot</p>
  <pre>
A, B, C, E, D, F 
</pre>

  <p>then my program increments [A,B], [A,C], [A,E], [A,D], [A,F],
  [B,C], [B,E], [B,D], [B,F], [C,E], [C,D], [C,F], [E,D], [E,F],
  and [D,F], since this is how the voter would have voted in each
  pairwise election. This assumes that the voter's preferences are
  transitive, e.g. if they prefer A over B and B over C, that they
  will necessarily prefer A over C. This lets us simplify the
  voting process, and ensure a certain consistency among the
  ballots.</p>

  <p>Next, <tt>condorcet.pl</tt> uses the matrix to determine the
  pairwise winners. Each complementary matchup is evaluated, and
  the winner receives one point in the "win" column, and the loser
  receives one point in the "loss" column. If the simulated
  pairwise election is a tie, both receive one point in the "tie"
  column.</p>

  <p>Here is one possible outcome:</p>
  <pre>
   Wins Losses Ties 
E    5     0         (Eisenhower beats everyone in
                      separate pairwise elections.)
A    4     1         (A loses to E, but beats everyone
                      else) 
B    3     2         (B loses to A and E) 
C    1     3     1   (C loses to A, E and B, and ties D) 
D    1     3     1   (D loses to A, E and B, and ties C) 
F    0     5         (F loses in all elections)  
</pre>

  <p>This is a clean pairwise victory for Eisenhower. If no
  candidate emerges unscathed by a pairwise defeat or tie, an
  alternative method of calculating the winner involves finding the
  candidate whose worst pairwise defeat was the smallest. For
  instance, let's modify the table above:</p>
  <pre>
 
         Wins   Losses        Ties 
E       3       3         (E loses to C, D, and F) 
A       4       2         (A loses to E and D) 
B       3       3         (B loses to F, A, and E) 
C       3       3         (C loses to A, E and B) 
D       3       3         (D loses to A, F and B) 
F       2       4         (F loses to A, B, C, and D)  
</pre>

  <p>This is where pairwise methods start to differ. Copeland's
  method would select A (John Anderson) as the winner, since he has
  the most wins. In order to calculate the winner in a Condorcet
  election, we need to look at the matchups where each candidate
  was defeated. Let's say the election has 1000 votes. The table
  below shows how the losses for each candidate might tally:</p>
  <pre>
  
E  (495, 505)  (492, 508)  (474, 526)* 
A  (491, 509)  (482, 518)* 
B  (482, 518)  (476, 524)* (492, 508) 
C  (474, 526)* (488, 512)  (490, 510) 
D  (497, 503)  (491, 509)* (493, 507) 
F  (482, 518)  (481, 519)  (477, 523)*  (498, 502) 

* = worst defeat  

</pre>

  <p>In this election, D (Bob Dole) has the smallest "worst defeat"
  with 509 votes against him, so he'd be the winner using
  Condorcet's method. This is true in spite of the fact that A lost
  fewer matchups, and in fact beat D in a pairwise matchup. The
  theory behind this is that Marquis de Condorcet thought it
  appropriate to ask the question, "Given that there is no
  candidate who a majority of the electorate would pick over any
  other candidate, who is the candidate that a <i>plurality</i>
  chooses over any other candidate?" No solution to this quandary
  is going to be particularly satisfying, but many would argue that
  Condorcet's tie-breaker works about as well as any.</p>

  <p>On the Election Methods List (a mailing list where election
  methods are discussed; see the end of the article for more
  information), an ASCII notation evolved that works pretty well as
  shorthand for expressing a bundle of ballots. I've extended that
  shorthand to make it easily implemented in Perl. We start off
  associating candidates with an integer by creating a two-column,
  comma separated list of candidate numbers and names:</p>
  <pre>
1,Joe Left 
2,Sally Middle 
3,Martha Right 
4,Bertha Up 
5,George Down  
</pre>

  <p>Parsing that is trivial. What becomes a bit more interesting
  is the next portion: a list of candidate numbers separated by
  '&gt;' when there is a preference, and '=' when there isn't. The
  ballot below is an example:</p>

  <p align="center"><a href="images/rl-figd.gif"><img src=
  "images/rl-figd_small.gif" align="center" alt=
  "Figure 3: This Ballot" border="0" width="250" height=
  "147"></a></p>

  <p align="center"><font size="-1"><b>Figure 3:</b> This
  Ballot</font></p>

  <p align="center"><a href="images/rl-figb.gif"><img src=
  "images/rl-figb_small.gif" align="center" alt=
  "Figure 4: Total points per Candidate" border="0" width="250"
  height="138"></a></p>

  <p align="center"><font size="-1"><b>Figure 4:</b> 40
  Ballots</font></p>

  <p>This ballot would be encoded as 3 &gt; 4 = 5 &gt; 2. That is,
  3 is preferred to 4 and 5 is preferred to 2, or Martha preferred
  to Bertha and George preferred to Sally (and Joe Left an implied
  last). This value can optionally be prepended by a quantity of
  voters who voted in that way. For example, coding the example
  (Three Way Election), we arrive at the following:</p>
  <pre>
  
40: 3 &gt; 2 
9:  2 &gt; 3 
16: 2 &gt; 1 
35: 1 &gt; 2 

</pre>

  <p>Now for some Perl. I'm sure I'll hear of ways to condense this
  down to one short line, but even the snippet below isn't too
  bad:</p>
  <pre>
my (@votelist)=();
foreach $tier ( split(/&gt;/, $ballotstring) ) { 
    my (@foo) = split(/=/, $tier); 
    push(@votelist, \@foo);     
}  
</pre>

  <p>This uses the Perl 5 ability to create lists of lists, and
  creates a structure of an ordered list of tiers, with each tier
  consisting of equally-ranked candidates. This structure is stored
  in an object, along with the number of votes (if required by the
  voting scheme).</p>

  <h3>The Pairwise Engine</h3>

  <p>The code at the top of the next page calculates the pairwise
  tally. The results are stored in the array
  <tt>$self-&gt;{tally};</tt> because I don't have to pre-declare
  its size, it can handle as many candidates as necessary, without
  predeclaring a ridiculously large array or creating a dynamically
  allocated structure. This keeps the code relatively simple,
  although my quasi-object oriented approach makes it harder to
  read a chunk out of context.</p>

  <p>The next stage involves figuring out the winners. For this I
  create a makeshift voting database, with separate fields for the
  number of wins, losses, and ties for each candidate, as well as
  his worst defeat, as measured by the total number of votes
  against that candidate. Sadly, I wasn't feeling particularly
  programmer friendly the day I was writing this, and so I made a
  goofy two-dimensional array rather than an associative array or
  one-dimensional array with better names. Fortunately, the code
  isn't too difficult to understand.</p>

  <p>Here is the meaning of each of the fields, where $i is the
  candidate number:</p>
  <pre>
$edata-&gt;{results}[$i][0] # defeats for $i
$edata-&gt;{results}[$i][1] # ties for $i
$edata-&gt;{results}[$i][2] # victories for $i
$edata-&gt;{results}[$i][3] # $i's worst defeat
</pre>This structure contains all the pairwise tallies, giving us
the data we need to calculate the Condorcet, Smith, and Copeland
winners. I'll leave it to you to fetch the code if you want to see
how all of the methods are calculated, but to give you a taste,
here's the code implementing the Copeland method:
  <pre>
sub rank_copeland {     
    my ($self, $edata)=@_;  
    # A Copeland score is computed by doubling
    # the number of victories and adding the
    # number of ties a candidate received.  
    my (@copeland_ranks) = sort {
            -(($self-&gt;{results}[$a][2]*2                             
              + $self-&gt;{results}[$a][1]) &lt;=&gt;
             ($self-&gt;{results}[$b][2]*2                      
              + $self-&gt;{results}[$b][1]))
            }     
        $edata-&gt;candnum_array;     
    $self-&gt;{copeland_ranks} = \@copeland_ranks; 
}  
</pre>

  <p>This passes an anonymous function to Perl's <tt>sort()</tt>
  routine, which then returns the candidates' Copeland scores.</p>

  <h3>Using CGI To Spit It All Out</h3>

  <p>The best thing about Perl is that , in combination with CGI,
  it's easy to geneerate nice looking output, even with copious
  amounts of complicated data. Given the ballots from Total Points
  per Candidate (Figure 2), I'm able to generate the HTML table
  below the next section of code (Figure 5).</p>

  <p>You needn't run the code yourself to try this out. Just
  visit:</p>

  <p><a href="http://www.eskimo.com/~robla/politics/condorcet.html"
  target=
  "resource window">http://www.eskimo.com/~robla/politics/condorcet.html</a></p>
  <pre>
sub pairwise_tally {
    my ($self, $votelist) = @_; 

    # $self is an object containing all pairwise election data.
    # @self-&gt;{tally} is a 2D array storing the pairwise tally results.
    # $self-&gt;{tally}[$candx][$candy] is the number of votes that $candx
    #     received over $candy. 
    # $votelist is a string containing all of the ballots.

    for ( split(/\n/, $votelist) ) {

        # $loservec is a boolean vector with a flag set for all losers,
        # reset with every new ballot.  All are losers until
        # they're listed on a ballot.

        my ($loservec) = $self-&gt;{candvec};

        # Parse ballot.  Skip if no ballot is returned.

        (!(my($ballot) = new ballot_obj($self, $_))) &amp;&amp; next;

        # @{$ballot-&gt;{rankings}} is an array of integers representing the
        # candidates the voter(s) voted for, in order of preference.

        # In addition, $ballot-&gt;{quantity} is the number of
        # identical ballots we're considering at this time.

        my (@votelist) = @{$ballot-&gt;{rankings}};

        foreach $tier (@votelist) {        # For each preference listed...
            # Remove the chosen candidate(s) from the loser vector.
            foreach $peer (@{$tier}) {
                vec($loservec, $peer, 1) = 0;
            } 

            # For all candidates...
            for ($i = 0; $i &lt;= $#{$self-&gt;{candidate}}; $i++) {

                # If said candidate hasn't been listed yet...
                if (vec($loservec, $i, 1)) {

                    # ...they've been beaten by the chosen candidate.
                    # Increment their "votes for the other guy" counter
                    # by the appropriate number of ballots.
                    foreach $peer (@{$tier}) {
                        if (defined($self-&gt;{tally}[$peer][$i])) {
                            $self-&gt;{tally}[$peer][$i] += $ballot-&gt;{quantity};
                        } else {
                            $self-&gt;{tally}[$peer][$i] =  $ballot-&gt;{quantity};
                        }
                    }
                }
            }
        }
        $self-&gt;{total_vote} += $ballot-&gt;{quantity};
    }
}

</pre>

  <p align="center"><a href="images/figuref3.gif"><img src=
  "images/figuref3_small.gif" align="center" alt=
  "Figure 5: Pairwise Election Results" border="0" width="250"
  height="169"></a></p>

  <p align="center"><font size="-1"><b>Figure 5:</b> Pairwise
  Election Results</font></p>

  <h3>Result</h3>

  <p>The winner is <b>Sally Middle</b></p>

  <p>There's still plenty of work to be done:</p>

  <ul>
    <li>A more user-friendly front end would be nice.</li>

    <li>A "voting booth" program could be written to generate data
    for use with <tt>condorcet.pl</tt>.</li>

    <li>Many common election methods could be implemented with this
    program. It would be illuminating to compare Hare and Borda
    methods with Condorcet, Copeland, and Smith.</li>

    <li>It would be nice to compute not just the winner, but a list
    of ranked winners for each election method.</li>

    <li>A future version could allow one to combine methods. For
    example, a method very popular on the election-methods-list is
    Smith/Condorcet (compute the Smith winner, and break ties using
    Condorcet).</li>
  </ul>

  <h3>Random Thoughts</h3>

  <p>Flexible and robust election systems have applications beyond
  their traditional role in government. Local elections, decision
  making, and shareholder elections are all obvious applications.
  There's a role for election methods in computer science - one
  could build a genetic algorithm that generates a pool of voters
  who submit preference ballots to make decisions).</p>

  <p>Sadly, many Americans have been indoctrinated into believing
  that the American system is the finest in the world and need not
  be questioned. The vote-for-only-one ballot would be okay if
  there were only one issue and two points of view, but society,
  alas, is a bit more complex.</p>

  <p>Many pundits and armchair activists talk about how the
  American system of politics is broken, and then only offer up
  ways of restricting "the bad guys" as a solution, whether the bad
  guys are big business, labor unions, or special-interest
  coalitions. Yet few people are actually really putting the system
  itself under scrutiny. Which is a shame, considering the
  consequences of such simplistic feedback mechanisms in how we
  select our leaders.</p>

  <h3>References</h3>

  <p>Amy, Douglas. <i>Real Choices, New Voices</i>. Columbia
  University Press, 1993.</p>

  <p>Anderson, Lowell Bruce. <i>Voting Theory</i>. Handbooks in OR
  &amp; MS, Vol.6, editors S.M. Pollock, et al. Elsevier Science
  B.V., 1994.</p>

  <p>Barrett, Laurence I. <i>Give Me Your Tired Parties</i>.
  AllPolitics, March 1996.
  (http://allpolitics.com/news/email/9603/01/index.shtml)</p>

  <p>Fishburn, Peter C. and Steven Brams. <i>Paradoxes of
  Preferential Voting</i>. Mathematics Magazine, Vol. 56, No. 4,
  Sept. 1983, pp. 207-214.</p>

  <p>Levin, Jonathan and Barry Nalebuff. <i>An Introduction to
  Vote-Counting Schemes</i>. The Journal of Economic Perspectives,
  Vol. 9, No. 1, pp. 3-26, Winter 1995.</p>

  <p>Niemi, Richard G. and William H. Riker. <i>The Choice of
  Voting Systems</i>. Scientific American, Vol. 234, No. 6, pp.
  21-27.</p>

  <p>Riker, W.H. <i>The Two-party System and Duverger's Law: An
  Essay on the History of Political Science</i>. The American
  Political Science Review, Vol. 76, pp. 753-766, 1982.</p>

  <h3>Sites</h3>

  <ul>
    <li>The Condorcet's Method Home Page

      <p><a href=
      "http://www.eskimo.com/~robla/politics/condorcet.html"
      target="resource window">http://www.eskimo.com/~robla/politics/condorcet.html</a></p>

      <p>I've put together this page from various pieces I've found
      on the net, and includes programs written by other people in
      other computer languages.</p>
    </li>

    <li>The Election Methods Mailing List

      <p><a href=
      "http://www.eskimo.com/~robla/cpr/election-methods.html"
      target=
      "resource window">http://www.eskimo.com/~robla/cpr/election-methods.html</a></p>

      <p>This list discusses the technical details of election
      methods. Much of my Condorcet work was facilitated by the
      list members (in particular Mike Ossipoff, Steve Eppley, and
      Bruce Anderson).</p>
    </li>

    <li>The Center for Voting and Democracy

      <p><a href="http://www.igc.apc.org/cvd" target=
      "resource window">http://www.igc.apc.org/cvd</a></p>

      <p>CVD works toward all forms of election reform. Though
      their primary focus has been on advancing proportional
      representation, they do advocate single-winner reform as
      well.</p>
    </li>
  </ul>

  <p>__END__</p>
  <hr>
  <i>Rob Lanphier works at Progressive Networks (home of
  RealAudio). He spends what little spare time he has promoting
  alternative voting methods and conning his wife Margaret into
  creating magazine article graphics (and thanking her for
  them).</i> <!-- end of article -->
   <!-- end of file -->
</body>
</html>
