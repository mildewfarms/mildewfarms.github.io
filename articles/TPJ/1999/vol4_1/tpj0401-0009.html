<html>
<head>
  <title>Listing 5: SiteDefs.pm for moviedb (excerpt) - The Perl Journal, Spring 1999</title>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 12 April 2005), see www.w3.org">
  <meta name="vscategory" content="Perl">
  <meta name="vsisbn" content="">
  <meta name="vstitle" content=
  "Web Databases the Genome Project Way - Listing 5">
  <meta name="vsauthor" content="Lincoln D. Stein">
  <meta name="searchdescription" content="">
  <meta name="vsimprint" content="The Perl Journal">
  <meta name="vspublisher" content="Earthweb">
  <meta name="vspubdate" content="Spring 1999">

</head>

<body bgcolor="#FFFFFF" text="#000000" link="#DD0000" vlink=
"#DD0000" alink="#DD0000" leftmargin="0" topmargin="0" marginwidth=
"0" marginheight="0">
  <table cellspacing="0" cellpadding="5" width="100%" height="100%"
  border="0">
    <tr align="left" valign="top">
      <td bgcolor="#CCCC99">
        <table width="98%">
          <tr>
            <td valign="top" bgcolor="#CCCC99" nowrap><font face=
            "Arial,Helvetica" size="+1">Listing 5.</font><br>
            <font size="-1" face="Arial,Helvetica" color=
            "#663300"><b>SiteDefs.pm for moviedb
            (excerpt)</b></font><br>
            <font size="-1" face="Arial,Helvetica" color=
            "#663300"><i>Lincoln D. Stein</i></font></td>

            <td valign="top" bgcolor="#CCCC99"><font size="-1"
            face="Arial,Helvetica" color="#663300">"Web Databases
            the Genome Project Way"<br>
            The Perl Journal, Spring 1999</font></td>
          </tr>
        </table>
      </td>
    </tr>

    <tr>
      <td>
        <table width="98%">
          <tr>
            <td width="5%" bgcolor="#FFFFFF">&nbsp;</td>

            <td bgcolor="#FFFFFF">
              <pre>
<font color="#000000">package SiteDefs;

# ... deleted stuff ...

my %movie_displays;

# %DATABASES maps database names to host/port pairs.
%DATABASES = (
  # .... deleted stuff ....
  'moviedb'    =&gt; {
    host       =&gt; 'localhost',
    port       =&gt; 200008,
    stylesheet =&gt; '/stylesheets/moviedb.css',
    searches   =&gt; [qw(search grep query)],
    url_mapper =&gt; \&amp;movie_mapper,
    displays   =&gt; \%movie_displays,
    title      =&gt; '&lt;center&gt;&lt;span class="banner"&gt;
              Moviedb Test Database&lt;/span&gt;&lt;/center&gt;',
  },
);

######################################################
# These are displays for the test 
#"movie" database 
######################################################

# Mapping objects to displays for the movies

sub movie_mapper {
    my ($display, $name, $class) = @_;
    my $n = escape($name);
    return ('person' =&gt; "name=$n") 
                   if $class eq 'Person'; 
                           return ('movie' =&gt; "name=$n") 
                           if $class eq 'Movie';

    # fall through
    return basic_mapper($display, $name, $class);
}

%movie_displays =
  (
    # In the movie database, there are special pages
    # for people and movies.
    Person     =&gt; [
                    {'url' =&gt; 'person',
                     'label' =&gt; 'Biography',
                     'icon' =&gt; '/icons/quill.gif'},
                  ],
    Movie      =&gt; [
                    {'url' =&gt; 'movie',
                     'label' =&gt; 'Movie Report',
                     'icon' =&gt; '/icons/movie.gif'},
                  ],
  );
# ... deleted stuff ...

1;</font>
</pre>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>
